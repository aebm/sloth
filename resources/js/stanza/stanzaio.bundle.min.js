!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.XMPP=e()}}(function(){var define,module,exports;return function e(f,n,o){function d(t,l){if(!n[t]){if(!f[t]){var u="function"==typeof require&&require;if(!l&&u)return u(t,!0);if(i)return i(t,!0);throw new Error("Cannot find module '"+t+"'")}var p=n[t]={exports:{}};f[t][0].call(p.exports,function(e){var n=f[t][1][e];return d(n?n:e)},p,p.exports,e,f,n,o)}return n[t].exports}for(var i="function"==typeof require&&require,t=0;t<o.length;t++)d(o[t]);return d}({1:[function(e,f,n){(function(f){"use strict";n.lang=f.env.LANG,n.Stream=e("./lib/stanza/stream"),n.BOSH=e("./lib/stanza/bosh"),n.Message=e("./lib/stanza/message"),n.Presence=e("./lib/stanza/presence"),n.Iq=e("./lib/stanza/iq"),n.PubsubEvent=e("./lib/stanza/pubsubEvents").EventItem,n.PubsubItem=e("./lib/stanza/pubsub").Item,n.JID=e("xmpp-jid").JID,n.Client=e("./lib/client"),n.crypto=e("crypto"),n.jxt=e("jxt"),n.jingle=e("./lib/stanza/jingle"),n.createClient=function(f){var o=new n.Client(f);return o.use(e("./lib/plugins")),o}}).call(this,e("FWaASH"))},{"./lib/client":2,"./lib/plugins":22,"./lib/stanza/bosh":53,"./lib/stanza/iq":70,"./lib/stanza/jingle":72,"./lib/stanza/message":76,"./lib/stanza/presence":82,"./lib/stanza/pubsub":85,"./lib/stanza/pubsubEvents":87,"./lib/stanza/stream":99,FWaASH:169,crypto:157,jxt:329,"xmpp-jid":355}],2:[function(e,f){"use strict";function n(e){var f=this;i.call(this),e=e||{},this._initConfig(e),this.stanzas=d.getGlobalJXT(),this.jid=new m,this.transports={websocket:x,bosh:j,"old-websocket":P},this.negotiatedFeatures={},this.featureOrder=["sasl","streamManagement","bind","clientStateIndication","streamManagement","caps","session"],this.features={},this.sm=new g(this),this.on("stream:data",function(e){var n=e.toJSON();if("iq"===e._name&&(n._xmlChildCount=0,o.each(e.xml.childNodes,function(e){1===e.nodeType&&(n._xmlChildCount+=1)})),f.emit(e._eventname||e._name,n),"message"===e._name||"presence"===e._name||"iq"===e._name)f.sm.handle(n),f.emit("stanza",n);else{if("smAck"===e._name)return f.sm.process(n);if("smRequest"===e._name)return f.sm.ack()}n.id&&(f.emit("id:"+n.id,n),f.emit(e._name+":id:"+n.id,n))}),this.on("streamFeatures",function(e){var n=[];f.featureOrder.forEach(function(o){e[o]&&!f.negotiatedFeatures[o]&&n.push(function(n){!f.negotiatedFeatures[o]&&f.features[o]?f.features[o](e,n):n()})}),u.series(n,function(e,n){if("restart"===e)f.transport.restart();else if("disconnect"===e){var o=new w({condition:"policy-violation",text:"failed to negotiate stream features: "+n});f.emit("stream:error",o),f.disconnect()}})}),this.features.sasl=function(e,n){var d=f.SASLFactory.create(e.sasl.mechanisms);if(!d)return f.releaseGroup("sasl"),f.emit("auth:failed"),n("disconnect","authentication failed");f.on("sasl:success","sasl",function(){f.negotiatedFeatures.sasl=!0,f.releaseGroup("sasl"),f.emit("auth:success",f.config.credentials),n("restart")}),f.on("sasl:challenge","sasl",function(e){d.challenge(e.value),f.send(new c.Response({value:d.response(f.getCredentials())})),d.cache&&(o.each(d.cache,function(e,n){e&&(f.config.credentials[n]=y(e))}),f.emit("credentials:update",f.config.credentials)),n()}),f.on("sasl:failure","sasl",function(){f.releaseGroup("sasl"),f.emit("auth:failed"),n("disconnect","authentication failed")}),f.on("sasl:abort","sasl",function(){f.releaseGroup("sasl"),f.emit("auth:failed"),n("disconnect","authentication failed")});var i={mechanism:d.name};d.clientFirst&&(i.value=d.response(f.getCredentials())),f.send(new c.Auth(i))},this.features.bind=function(e,n){f.sendIq({type:"set",bind:{resource:f.config.resource}},function(o,d){if(o)return f.emit("session:error",o),n("disconnect","JID binding failed");f.negotiatedFeatures.bind=!0,f.emit("session:bound",d.bind.jid),f.jid=new m(d.bind.jid);var i=!e.session||e.session&&e.session.optional;!f.sessionStarted&&i&&(f.sessionStarted=!0,f.emit("session:started",d.bind.jid)),n()})},this.features.session=function(e,n){return e.session.optional||f.sessionStarted?(f.negotiatedFeatures.session=!0,n()):void f.sendIq({type:"set",session:{}},function(e){return e?n("disconnect","session request failed"):(f.negotiatedFeatures.session=!0,f.sessionStarted||(f.sessionStarted=!0,f.emit("session:started",f.jid)),void n())})},this.features.caps=function(e,n){f.emit("disco:caps",{from:new m(f.jid.domain),caps:e.caps}),f.negotiatedFeatures.caps=!0,n()},this.features.streamManagement=function(e,n){return f.config.useStreamManagement?(f.on("stream:management:enabled","sm",function(e){f.sm.enabled(e),f.negotiatedFeatures.streamManagement=!0,f.releaseGroup("sm"),n()}),f.on("stream:management:resumed","sm",function(e){f.sm.resumed(e),f.negotiatedFeatures.streamManagement=!0,f.negotiatedFeatures.bind=!0,f.sessionStarted=!0,f.releaseGroup("sm"),n("break")}),f.on("stream:management:failed","sm",function(){f.sm.failed(),f.emit("session:end"),f.releaseGroup("session"),f.releaseGroup("sm"),n()}),void(f.sm.id?f.sm.id&&f.sm.allowResume?f.sm.resume():n():f.negotiatedFeatures.bind?f.sm.enable():n())):n()},this.on("disconnected",function(){f.transport&&(f.transport.off("*"),delete f.transport),f.sessionStarted=!1,f.negotiatedFeatures.sasl=!1,f.negotiatedFeatures.streamManagement=!1,f.negotiatedFeatures.bind=!1,f.negotiatedFeatures.session=!1,f.releaseGroup("connection")}),this.on("iq",function(e){var n=e.type,o=e._xmlChildCount;delete e._xmlChildCount;var d=Object.keys(e);if("get"===e.type||"set"===e.type){if(1!==o)return f.sendIq(e.errorReply({error:{type:"modify",condition:"bad-request"}}));if(!d.length)return f.sendIq(e.errorReply({error:{type:"cancel",condition:"feature-not-implemented"}}));var i="iq:"+n+":"+d[0];f.callbacks[i]?f.emit(i,e):f.sendIq(e.errorReply({error:{type:"cancel",condition:"feature-not-implemented"}}))}}),this.on("message",function(e){Object.keys(e.$body||{}).length&&("chat"===e.type||"normal"===e.type?f.emit("chat",e):"groupchat"===e.type&&f.emit("groupchat",e)),"error"===e.type&&f.emit("message:error",e)}),this.on("presence",function(e){var n=e.type||"available";"error"===n&&(n="presence:error"),f.emit(n,e)})}var o=e("underscore"),d=e("jxt"),i=e("wildemitter"),t=e("util"),l=e("bluebird"),u=e("async"),p=e("node-uuid"),s=e("atob"),y=e("btoa"),c=e("./stanza/sasl"),a=e("./stanza/message"),r=e("./stanza/presence"),w=e("./stanza/streamError"),b=e("./stanza/iq"),m=e("xmpp-jid").JID,g=e("./sm"),x=e("./transports/websocket"),P=e("./transports/old-websocket"),j=e("./transports/bosh"),v=e("hostmeta"),M=e("saslmechanisms"),X={external:e("sasl-external"),"scram-sha-1":e("sasl-scram-sha-1"),"digest-md5":e("alt-sasl-digest-md5"),plain:e("sasl-plain"),anonymous:e("sasl-anonymous")};e("./stanza/stream"),e("./stanza/sm"),e("./stanza/csi"),e("./stanza/error"),e("./stanza/streamFeatures"),e("./stanza/bind"),e("./stanza/session"),t.inherits(n,i),Object.defineProperty(n.prototype,"stream",{get:function(){return this.transport?this.transport.stream:void 0}}),n.prototype._initConfig=function(e){var f=this,n=this.config||{};this.config=o.extend({useStreamManagement:!0,transports:["websocket","bosh"],sasl:["external","scram-sha-1","digest-md5","plain","anonymous"]},n,e),o.isArray(this.config.sasl)||(this.config.sasl=[this.config.sasl]),this.SASLFactory=new M,this.config.sasl.forEach(function(e){if("string"==typeof e){var n=X[e.toLowerCase()];n&&f.SASLFactory.use(n)}else f.SASLFactory.use(e)}),this.config.jid=new m(this.config.jid),this.config.server||(this.config.server=this.config.jid.domain),this.config.password&&(this.config.credentials=this.config.credentials||{},this.config.credentials.password=this.config.password,delete this.config.password),this.config.transport&&(this.config.transports=[this.config.transport]),o.isArray(this.config.transports)||(this.config.transports=[this.config.transports])},n.prototype.use=function(e){e(this,this.stanzas,this.config)},n.prototype.nextId=function(){return p.v4()},n.prototype.discoverBindings=function(e,f){v(e,function(e,n){if(e)return f(e,[]);var o={websocket:[],bosh:[]},d=n.links||[];d.forEach(function(e){e.href&&"urn:xmpp:alt-connections:websocket"===e.rel&&o.websocket.push(e.href),e.href&&"urn:xmpp:altconnect:websocket"===e.rel&&o.websocket.push(e.href),e.href&&"urn:xmpp:alt-connections:xbosh"===e.rel&&o.bosh.push(e.href),e.href&&"urn:xmpp:altconnect:bosh"===e.rel&&o.bosh.push(e.href)}),f(!1,o)})},n.prototype.getCredentials=function(){var e=this.config.credentials||{},f=new m(this.config.jid),n=e.username||f.local,d=e.server||f.domain,i={username:n,password:this.config.password,server:d,host:d,realm:d,serviceType:"xmpp",serviceName:d},t=o.extend(i,e),l=["saltedPassword","clientKey","serverKey"];return l.forEach(function(e){t[e]&&(t[e]=s(t[e]))}),t},n.prototype.connect=function(e,f){var n=this;if(this._initConfig(e),f&&f.name&&f.url){var o=n.transport=new n.transports[f.name](n.sm);return o.on("*",function(e,f){n.emit(e,f)}),o.connect(n.config)}return!f&&1===n.config.transports.length&&(f={},f.name=n.config.transports[0],("websocket"===f.name||"old-websocket"===f.name)&&(f.url=n.config.wsURL),"bosh"===f.name&&(f.url=n.config.boshURL),f.name&&f.url)?n.connect(null,f):n.discoverBindings(n.config.server,function(e,f){if(e)return console.error("Could not find https://"+n.config.server+"/.well-known/host-meta file to discover connection endpoints for the requested transports."),n.disconnect();for(var o=0,d=n.config.transports.length;d>o;o++){var i=n.config.transports[o];console.log("Checking for %s endpoints",i);for(var t=0,l=(f[i]||[]).length;l>t;t++){var u=f[i][t];if(0===u.indexOf("wss://")||0===u.indexOf("https://"))return"websocket"===i?n.config.wsURL=u:n.config.boshURL=u,console.log("Using %s endpoint: %s",i,u),n.connect(null,{name:i,url:u});console.warn("Discovered unencrypted %s endpoint (%s). Ignoring",i,u)}}return console.error("No endpoints found for the requested transports."),n.disconnect()})},n.prototype.disconnect=function(){this.sessionStarted&&(this.releaseGroup("session"),this.sm.started||this.emit("session:end")),this.sessionStarted=!1,this.releaseGroup("connection"),this.transport?this.transport.disconnect():this.emit("disconnected")},n.prototype.send=function(e){this.transport&&this.transport.send(e),this.sm.track(e)},n.prototype.sendMessage=function(e){e=e||{},e.id||(e.id=this.nextId());var f=new a(e);return this.emit("message:sent",f.toJSON()),this.send(f),e.id},n.prototype.sendPresence=function(e){return e=e||{},e.id||(e.id=this.nextId()),this.send(new r(e)),e.id},n.prototype.sendIq=function(e,f){var n,o,d,i,t=this;e=e||{},e.id||(e.id=this.nextId());var u=e.toJSON?e:new b(e);return"error"===e.type||"result"===e.type?void this.send(u):(i=new m(e.to),d={},d[""]=!0,d[i.full]=!0,d[i.bare]=!0,d[i.domain]=!0,d[t.jid.bare]=!0,d[t.jid.domain]=!0,o="iq:id:"+e.id,n=new l(function(e,f){var n=function(i){d[i.from.full]&&("result"===i.type||"error"===i.type)&&(t.off(o,n),i.error?f(i):e(i))};t.on(o,"session",n)}),this.send(u),n.timeout(1e3*t.config.timeout||15e3)["catch"](l.TimeoutError,function(){throw{id:e.id,type:"error",error:{condition:"timeout"}}}).nodeify(f))},n.prototype.sendStreamError=function(e){e=e||{};var f=new w(e);this.emit("stream:error",f),this.send(f),this.disconnect()},n.prototype.JID=function(e){return new m(e)},f.exports=n},{"./sm":47,"./stanza/bind":49,"./stanza/csi":57,"./stanza/error":61,"./stanza/iq":70,"./stanza/message":76,"./stanza/presence":82,"./stanza/sasl":95,"./stanza/session":96,"./stanza/sm":98,"./stanza/stream":99,"./stanza/streamError":100,"./stanza/streamFeatures":101,"./transports/bosh":106,"./transports/old-websocket":107,"./transports/websocket":108,"alt-sasl-digest-md5":109,async:110,atob:111,bluebird:114,btoa:189,hostmeta:190,jxt:329,"node-uuid":340,"sasl-anonymous":342,"sasl-external":344,"sasl-plain":346,"sasl-scram-sha-1":347,saslmechanisms:352,underscore:353,util:186,wildemitter:354,"xmpp-jid":355}],3:[function(e,f){"use strict";f.exports=function(e){e.disco.addFeature("urn:xmpp:attention:0"),e.getAttention=function(f,n){n=n||{},n.to=f,n.type="headline",n.attention=!0,e.sendMessage(n)},e.on("message",function(f){f.attention&&e.emit("attention",f)})}},{}],4:[function(e,f){"use strict";e("../stanza/avatar"),f.exports=function(e){e.disco.addFeature("urn:xmpp:avatar:metadata+notify"),e.on("pubsub:event",function(f){f.event.updated&&"urn:xmpp:avatar:metadata"===f.event.updated.node&&e.emit("avatar",{jid:f.from,source:"pubsub",avatars:f.event.updated.published[0].avatars})}),e.on("presence",function(f){f.avatarId&&e.emit("avatar",{jid:f.from,source:"vcard",avatars:[{id:f.avatarId}]})}),e.publishAvatar=function(e,f,n){return this.publish("","urn:xmpp:avatar:data",{id:e,avatarData:f},n)},e.useAvatars=function(e,f){return this.publish("","urn:xmpp:avatar:metadata",{id:"current",avatars:e},f)},e.getAvatar=function(e,f,n){return this.getItem(e,"urn:xmpp:avatar:data",f,n)}}},{"../stanza/avatar":48}],5:[function(e,f){"use strict";e("../stanza/blocking"),f.exports=function(e){e.disco.addFeature("urn:xmpp:blocking"),e.block=function(f,n){return e.sendIq({type:"set",block:{jids:[f]}},n)},e.unblock=function(f,n){return e.sendIq({type:"set",unblock:{jids:[f]}},n)},e.getBlocked=function(f){return e.sendIq({type:"get",blockList:!0},f)},e.on("iq:set:block",function(f){e.emit("block",{jids:f.block.jids||[]}),e.sendIq(f.resultReply())}),e.on("iq:set:unblock",function(f){e.emit("unblock",{jids:f.unblock.jids||[]}),e.sendIq(f.resultReply())})}},{"../stanza/blocking":50}],6:[function(e,f){"use strict";e("../stanza/bob"),f.exports=function(e){e.disco.addFeature("urn:xmpp:bob"),e.getBits=function(f,n,o){return e.sendIq({to:f,type:"get",bob:{cid:n}},o)}}},{"../stanza/bob":51}],7:[function(e,f){"use strict";e("../stanza/bookmarks");var n=e("underscore"),o=e("xmpp-jid").JID;f.exports=function(e){e.getBookmarks=function(e){return this.getPrivateData({bookmarks:!0},e)},e.setBookmarks=function(e,f){return this.setPrivateData({bookmarks:e},f)},e.addBookmark=function(f,d){return f.jid=new o(f.jid),this.getBookmarks().then(function(o){var d=o.privateStorage.bookmarks.conferences||[],i=n.filter(d,function(e){return e.jid.bare===f.jid.bare});return i.length?n.extend(i[0],f):d.push(f),e.setBookmarks({conferences:d})}).nodeify(d)},e.removeBookmark=function(f,d){return f=new o(f),this.getBookmarks().then(function(o){var d=o.privateStorage.bookmarks.conferences||[];return d=n.filter(d,function(e){return f.bare!==e.jid.bare}),e.setBookmarks({conferences:d})}).nodeify(d)}}},{"../stanza/bookmarks":52,underscore:353,"xmpp-jid":355}],8:[function(e,f){"use strict";e("../stanza/carbons"),f.exports=function(e){e.disco.addFeature("urn:xmpp:carbons:2"),e.enableCarbons=function(e){return this.sendIq({type:"set",enableCarbons:!0},e)},e.disableCarbons=function(e){return this.sendIq({type:"set",disableCarbons:!0},e)},e.on("message",function(f){return f.carbonSent?e.emit("carbon:sent",f):f.carbonReceived?e.emit("carbon:received",f):void 0}),e.on("carbon:*",function(f,n){var o=f.split(":")[1];if(n.from.bare===e.jid.bare){var d,i;"received"===o?(d=n.carbonReceived.forwarded.message,i=n.carbonReceived.forwarded.delay):(d=n.carbonSent.forwarded.message,i=n.carbonSent.forwarded.delay),d.delay||(i?d.delay.stamp=i.stamp:d.delay={stamp:new Date(Date.now())}),d.carbon=!0,d.from.bare===e.jid.bare?e.emit("message:sent",d):e.emit("message",d)}})}},{"../stanza/carbons":55}],9:[function(e,f){"use strict";f.exports=function(e){e.disco.addFeature("http://jabber.org/protocol/chatstates"),e.on("message",function(f){f.chatState&&(e.emit("chat:state",{to:f.to,from:f.from,chatState:f.chatState}),e.emit("chatState",{to:f.to,from:f.from,chatState:f.chatState}))})}},{}],10:[function(e,f){"use strict";e("../stanza/command");var n="http://jabber.org/protocol/commands";f.exports=function(e){e.disco.addFeature(n),e.disco.addItem({name:"Ad-Hoc Commands",node:n}),e.getCommands=function(f,o){return e.getDiscoItems(f,n,o)}}},{"../stanza/command":56}],11:[function(e,f){"use strict";f.exports=function(e){e.disco.addFeature("urn:xmpp:message-correct:0"),e.on("message",function(f){f.replace&&(e.emit("replace",f),e.emit("replace:"+f.id,f))})}},{}],12:[function(e,f){"use strict";var n=e("../stanza/csi");f.exports=function(e){e.features.clientStateIndication=function(f,n){e.negotiatedFeatures.clientStateIndication=!0,n()},e.markActive=function(){this.negotiatedFeatures.clientStateIndication&&this.send(new n.Active)},e.markInactive=function(){this.negotiatedFeatures.clientStateIndication&&this.send(new n.Inactive)}}},{"../stanza/csi":57}],13:[function(e,f){"use strict";e("../stanza/dataforms"),f.exports=function(e){e.disco.addFeature("jabber:x:data"),e.disco.addFeature("urn:xmpp:media-element"),e.disco.addFeature("http://jabber.org/protocol/xdata-validate"),e.disco.addFeature("http://jabber.org/protocol/xdata-layout"),e.on("message",function(f){f.form&&e.emit("dataform",f)})}},{"../stanza/dataforms":58}],14:[function(e,f){"use strict";e("../stanza/delayed"),f.exports=function(e){e.disco.addFeature("urn:xmpp:delay")}},{"../stanza/delayed":59}],15:[function(e,f){(function(n){"use strict";function o(e,f){var o="",d=e.features.sort(),i=[],u={},p=[];t.forEach(e.identities,function(e){i.push([e.category||"",e.type||"",e.lang||"",e.name||""].join("/"))});var s=i.length,y=d.length;if(i=t.unique(i,!0),d=t.unique(d,!0),y!==d.length||s!==i.length)return!1;o+=i.join("<")+"<",o+=d.join("<")+"<";var c=!1;if(t.forEach(e.extensions,function(e){for(var f=e.fields,n=0,o=f.length;o>n;n++)if("FORM_TYPE"===f[n].name&&"hidden"===f[n].type){var d=f[n].value;return u[d]?void(c=!0):(u[d]=e,void p.push(d))}}),c)return!1;p.sort(),t.forEach(p,function(e){var f=u[e],n={},d=[];o+="<"+e,t.forEach(f.fields,function(e){var f=e.name;if("FORM_TYPE"!==f){var o=e.value||"";"object"!=typeof o&&(o=o.split("\n")),n[f]=o.sort(),d.push(f)}}),d.sort(),t.forEach(d,function(e){o+="<"+e,t.forEach(n[e],function(e){o+="<"+e})})});var a=l.createHash(f).update(new n(o,"utf8")).digest("base64"),r=4-a.length%4;4===r&&(r=0);for(var w=0;r>w;w++)a+="=";return a}function d(e,f,n){var d=o(e,f);return d&&d===n}function i(){this.features={},this.identities={},this.extensions={},this.items={},this.caps={}}var t=e("underscore"),l=e("iana-hashes");e("../stanza/disco"),e("../stanza/caps"),i.prototype={constructor:{value:i},addFeature:function(e,f){f=f||"",this.features[f]||(this.features[f]=[]),this.features[f].push(e)},addIdentity:function(e,f){f=f||"",this.identities[f]||(this.identities[f]=[]),this.identities[f].push(e)},addItem:function(e,f){f=f||"",this.items[f]||(this.items[f]=[]),this.items[f].push(e)},addExtension:function(e,f){f=f||"",this.extensions[f]||(this.extensions[f]=[]),this.extensions[f].push(e)}},f.exports=function(e){e.disco=new i(e),e.disco.addFeature("http://jabber.org/protocol/disco#info"),e.disco.addIdentity({category:"client",type:"web"}),e.getDiscoInfo=function(e,f,n){return this.sendIq({to:e,type:"get",discoInfo:{node:f}},n)},e.getDiscoItems=function(e,f,n){return this.sendIq({to:e,type:"get",discoItems:{node:f}},n)},e.updateCaps=function(){var f=this.config.capsNode||"https://stanza.io",n=JSON.parse(JSON.stringify({identities:this.disco.identities[""],features:this.disco.features[""],extensions:this.disco.extensions[""]})),d=o(n,"sha-1");return this.disco.caps={node:f,hash:"sha-1",ver:d},f=f+"#"+d,this.disco.features[f]=n.features,this.disco.identities[f]=n.identities,this.disco.extensions[f]=n.extensions,e.getCurrentCaps()},e.getCurrentCaps=function(){var f=e.disco.caps;if(!f.ver)return{ver:null,discoInfo:null};var n=f.node+"#"+f.ver;return{ver:f.ver,discoInfo:{identities:e.disco.identities[n],features:e.disco.features[n],extensions:e.disco.extensions[n]}}},e.on("presence",function(f){f.caps&&e.emit("disco:caps",f)}),e.on("iq:get:discoInfo",function(f){var n=f.discoInfo.node||"",o=f.discoInfo.node||"";n===e.disco.caps.node+"#"+e.disco.caps.ver&&(o=n,n=""),e.sendIq(f.resultReply({discoInfo:{node:o,identities:e.disco.identities[n]||[],features:e.disco.features[n]||[],extensions:e.disco.extensions[n]||[]}}))}),e.on("iq:get:discoItems",function(f){var n=f.discoItems.node;e.sendIq(f.resultReply({discoItems:{node:n,items:e.disco.items[n]||[]}}))}),e.verifyVerString=d,e.generateVerString=o,e.updateCaps()}}).call(this,e("buffer").Buffer)},{"../stanza/caps":54,"../stanza/disco":60,buffer:150,"iana-hashes":193,underscore:353}],16:[function(e,f){"use strict";f.exports=function(e){e.disco.addFeature("jid\\20escaping")}},{}],17:[function(e,f){"use strict";e("../stanza/extdisco"),f.exports=function(e){e.disco.addFeature("urn:xmpp:extdisco:1"),e.getServices=function(e,f,n){return this.sendIq({type:"get",to:e,services:{type:f}},n)},e.getServiceCredentials=function(e,f,n){return this.sendIq({type:"get",to:e,credentials:{service:{host:f}}},n)}}},{"../stanza/extdisco":62}],18:[function(e,f){"use strict";e("../stanza/forwarded"),f.exports=function(e){e.disco.addFeature("urn:xmpp:forward:0")}},{"../stanza/forwarded":64}],19:[function(e,f){"use strict";e("../stanza/geoloc"),f.exports=function(e){e.disco.addFeature("http://jabber.org/protocol/geoloc"),e.disco.addFeature("http://jabber.org/protocol/geoloc+notify"),e.on("pubsub:event",function(f){f.event.updated&&"http://jabber.org/protocol/geoloc"===f.event.updated.node&&e.emit("geoloc",{jid:f.from,geoloc:f.event.updated.published[0].geoloc})}),e.publishGeoLoc=function(e,f){return this.publish("","http://jabber.org/protocol/geoloc",{geoloc:e},f)}}},{"../stanza/geoloc":66}],20:[function(e,f){"use strict";var n=e("iana-hashes");f.exports=function(e){e.disco.addFeature("urn:xmpp:hashes:1");var f=n.getHashes();f.forEach(function(f){e.disco.addFeature("urn:xmpp:hash-function-text-names:"+f)})}},{"iana-hashes":193}],21:[function(e,f){"use strict";f.exports=function(e){e.disco.addFeature("urn:xmpp:idle:1")}},{}],22:[function(e,f){"use strict";f.exports=function(f){f.use(e("./disco")),f.use(e("./attention")),f.use(e("./avatar")),f.use(e("./blocking")),f.use(e("./bob")),f.use(e("./bookmarks")),f.use(e("./carbons")),f.use(e("./chatstates")),f.use(e("./command")),f.use(e("./correction")),f.use(e("./csi")),f.use(e("./dataforms")),f.use(e("./delayed")),f.use(e("./escaping")),f.use(e("./extdisco")),f.use(e("./forwarding")),f.use(e("./geoloc")),f.use(e("./hashes")),f.use(e("./idle")),f.use(e("./invisible")),f.use(e("./jidprep")),f.use(e("./jingle")),f.use(e("./json")),f.use(e("./keepalive")),f.use(e("./logging")),f.use(e("./mam")),f.use(e("./muc")),f.use(e("./mood")),f.use(e("./nick")),f.use(e("./oob")),f.use(e("./ping")),f.use(e("./private")),f.use(e("./psa")),f.use(e("./pubsub")),f.use(e("./reach")),f.use(e("./receipts")),f.use(e("./register")),f.use(e("./roster")),f.use(e("./rtt")),f.use(e("./shim")),f.use(e("./time")),f.use(e("./vcard")),f.use(e("./version"))}},{"./attention":3,"./avatar":4,"./blocking":5,"./bob":6,"./bookmarks":7,"./carbons":8,"./chatstates":9,"./command":10,"./correction":11,"./csi":12,"./dataforms":13,"./delayed":14,"./disco":15,"./escaping":16,"./extdisco":17,"./forwarding":18,"./geoloc":19,"./hashes":20,"./idle":21,"./invisible":23,"./jidprep":24,"./jingle":25,"./json":26,"./keepalive":27,"./logging":28,"./mam":29,"./mood":30,"./muc":31,"./nick":32,"./oob":33,"./ping":34,"./private":35,"./psa":36,"./pubsub":37,"./reach":38,"./receipts":39,"./register":40,"./roster":41,"./rtt":42,"./shim":43,"./time":44,"./vcard":45,"./version":46}],23:[function(e,f){"use strict";e("../stanza/visibility"),f.exports=function(e){e.goInvisible=function(e){return this.sendIq({type:"set",invisible:!0},e)},e.goVisible=function(e){return this.sendIq({type:"set",visible:!0},e)}}},{"../stanza/visibility":105}],24:[function(e,f){"use strict";e("../stanza/jidprep"),f.exports=function(e){e.prepJID=function(f,n){return e.sendIq({to:e.jid.domain,type:"get",jidPrep:f},n)}}},{"../stanza/jidprep":71}],25:[function(e,f){"use strict";var n=e("jingle");e("../stanza/jingle"),e("../stanza/rtp"),e("../stanza/iceUdp"),e("../stanza/file"),f.exports=function(e){var f=e.jingle=new n;f.capabilities.forEach(function(f){e.disco.addFeature(f)});var o=["outgoing","incoming","accepted","terminated","ringing","mute","unmute","hold","resumed"];o.forEach(function(n){f.on(n,function(f,o){e.emit("jingle:"+n,f,o)})}),f.on("createdSession",function(f){e.emit("jingle:created",f)}),f.on("peerStreamAdded",function(f,n){e.emit("jingle:remotestream:added",f,n)}),f.on("peerStreamRemoved",function(f,n){e.emit("jingle:remotestream:removed",f,n)}),f.on("send",function(f){e.sendIq(f,function(f){f&&e.emit("jingle:error",f)})}),e.on("session:bound",function(e){f.jid=e,f.selfID=e.full}),e.on("iq:set:jingle",function(e){f.process(e)}),e.on("unavailable",function(e){var n=e.from.full;f.endPeerSessions(n,!0)}),e.discoverICEServers=function(f){return this.getServices(e.config.server).then(function(f){for(var n=f.services.services,o=[],d=0;d<n.length;d++){var i=n[d],t={};"stun"===i.type||"stuns"===i.type?(t.url=i.type+":"+i.host,i.port&&(t.url+=":"+i.port),o.push(t),e.jingle.addICEServer(t)):("turn"===i.type||"turns"===i.type)&&(t.url=i.type+":"+i.host,i.port&&(t.url+=":"+i.port),i.transport&&"udp"!==i.transport&&(t.url+="?transport="+i.transport),i.username&&(t.username=i.username),i.password&&(t.credential=i.password),o.push(t),e.jingle.addICEServer(t))}return o}).nodeify(f)}}},{"../stanza/file":63,"../stanza/iceUdp":69,"../stanza/jingle":72,"../stanza/rtp":93,jingle:313}],26:[function(e,f){"use strict";e("../stanza/json"),f.exports=function(e){e.disco.addFeature("urn:xmpp:json:0")}},{"../stanza/json":73}],27:[function(e,f){"use strict";function n(e,f){return new o(function(f,n){e.sm.started?(e.once("stream:management:ack",f),e.sm.request()):e.ping().then(f)["catch"](function(e){e.error&&"timeout"!==e.error.condition?f():n()})}).timeout(1e3*f||15e3)}var o=e("bluebird");f.exports=function(e){e.enableKeepAlive=function(f){function o(){e.sessionStarted&&n(e,f.timeout)["catch"](function(){e.sendStreamError({condition:"connection-timeout"})})}f=f||{},f.interval=f.interval||300,f.timeout=f.timeout||15,e._keepAliveInterval=setInterval(o,1e3*f.interval)},e.disableKeepAlive=function(){e._keepAliveInterval&&(clearInterval(e._keepAliveInterval),delete e._keepAliveInterval)},e.on("disconnected",function(){e.disableKeepAlive()})}},{bluebird:114}],28:[function(e,f){"use strict";e("../stanza/logging"),f.exports=function(e){e.disco.addFeature("","urn:xmpp:eventlog"),e.sendLog=function(f,n){e.sendMessage({to:f,type:"normal",log:n})}}},{"../stanza/logging":74}],29:[function(e,f){"use strict";e("../stanza/mam");var n=e("xmpp-jid").JID;f.exports=function(e){e.disco.addFeature("urn:xmpp:mam:tmp"),e.getHistory=function(f,o){var d=this,i=this.nextId();f=f||{},f.queryid=i;var t=f.to||"";delete f.to;var l=new n(t||e.jid.bare),u={};u[""]=!0,u[l.full]=!0,u[l.bare]=!0,u[l.domain]=!0,u[e.jid.bare]=!0,u[e.jid.domain]=!0;var p=[];return this.on("mam:"+i,"session",function(e){u[e.from.full]&&p.push(e)}),this.sendIq({type:"get",to:t,id:i,mamQuery:f}).then(function(e){return e.mamQuery.results=p,e})["finally"](function(){d.off("mam:"+i)}).nodeify(o)},e.getHistoryPreferences=function(e){return this.sendIq({type:"get",mamPrefs:!0},e)},e.setHistoryPreferences=function(e,f){return this.sendIq({type:"set",mamPrefs:e},f)},e.on("message",function(f){f.mam&&e.emit("mam:"+f.mam.queryid,f)})}},{"../stanza/mam":75,"xmpp-jid":355}],30:[function(e,f){"use strict";e("../stanza/mood");var n="http://jabber.org/protocol/mood";f.exports=function(e){e.disco.addFeature(n),e.disco.addFeature(n+"+notify"),e.on("pubsub:event",function(f){f.event.updated&&f.event.updated.node===n&&e.emit("mood",{jid:f.from,mood:f.event.updated.published[0].mood})}),e.publishMood=function(e,f,o){return this.publish("",n,{mood:{value:e,text:f}},o)}}},{"../stanza/mood":77}],31:[function(e,f){"use strict";e("../stanza/muc"),e("../stanza/hats");var n=e("underscore"),o=e("xmpp-jid").JID;f.exports=function(e){function f(){n.each(e.joinedRooms,function(f,n){e.joinedRooms[n]=!1,e.joinRoom(n,f)})}e.disco.addFeature("http://jabber.org/protocol/muc"),e.disco.addFeature("jabber:x:conference"),e.disco.addFeature("urn:xmpp:hats:0"),e.joinedRooms={},e.on("session:started",f),e.on("stream:management:resumed",f),e.on("message",function(f){f.muc?(f.muc.invite&&e.emit("muc:invite",{from:f.muc.invite.from,room:f.from,reason:f.muc.invite.reason,password:f.muc.password,thread:f.muc.invite.thread,type:"mediated"}),f.muc.destroyed&&e.emit("muc:destroyed",{room:f.from,newRoom:f.muc.destroyed.jid,reason:f.muc.destroyed.reason,password:f.muc.password}),f.muc.decline&&e.emit("muc:declined",{room:f.from,from:f.muc.decline.from,reason:f.muc.decline.reason})):f.mucInvite&&e.emit("muc:invite",{from:f.from,room:f.mucInvite.jid,reason:f.mucInvite.reason,password:f.mucInvite.password,thread:f.mucInvite.thread,type:"direct"}),"groupchat"===f.type&&f.subject&&e.emit("muc:subject",f)}),e.on("presence",function(f){if(f.joinMuc&&"error"===f.type)e.emit("muc:error",f);else if(f.muc){var n=f.muc.codes&&f.muc.codes.indexOf("110")>=0;"error"===f.type?e.emit("muc:error",f):"unavailable"===f.type?(e.emit("muc:unavailable",f),n&&(e.emit("muc:leave",f),delete e.joinedRooms[f.from.bare])):(e.emit("muc:available",f),n&&!e.joinedRooms[f.from.bare]&&(e.emit("muc:join",f),e.joinedRooms[f.from.bare]=f.from.resource))}}),e.joinRoom=function(e,f,n){n=n||{},n.to=e+"/"+f,n.caps=this.disco.caps,n.joinMuc=n.joinMuc||{},this.sendPresence(n)},e.leaveRoom=function(e,f,n){n=n||{},n.to=e+"/"+f,n.type="unavailable",this.sendPresence(n)},e.ban=function(f,n,o,d){e.setRoomAffiliation(f,n,"outcast",o,d)},e.kick=function(f,n,o,d){e.setRoomRole(f,n,"none",o,d)},e.invite=function(f,n){e.sendMessage({to:f,muc:{invites:n}})},e.directInvite=function(f,n){n.jid=f,e.sendMessage({to:n.to,mucInvite:n})},e.declineInvite=function(f,n,o){e.sendMessage({to:f,muc:{decline:{to:n,reason:o}}})},e.changeNick=function(f,n){e.sendPresence({to:new o(f).bare+"/"+n})},e.setSubject=function(f,n){e.sendMessage({to:f,type:"groupchat",subject:n})},e.discoverReservedNick=function(f,n){e.getDiscoInfo(f,"x-roomuser-item",function(e,f){if(e)return n(e);var o=f.discoInfo.identities[0]||{};n(null,o.name)})},e.requestRoomVoice=function(f){e.sendMessage({to:f,form:{fields:[{name:"FORM_TYPE",value:"http://jabber.org/protocol/muc#request"},{name:"muc#role",type:"text-single",value:"participant"}]}})},e.setRoomAffiliation=function(e,f,n,o,d){return this.sendIq({type:"set",to:e,mucAdmin:{jid:f,affiliation:n,reason:o}},d)},e.setRoomRole=function(e,f,n,o,d){return this.sendIq({type:"set",to:e,mucAdmin:{nick:f,role:n,reason:o}},d)},e.getRoomMembers=function(e,f,n){return this.sendIq({type:"get",to:e,mucAdmin:f},n)},e.getRoomConfig=function(e,f){return this.sendIq({to:e,type:"get",mucOwner:!0},f)},e.configureRoom=function(e,f,n){return f.type||(f.type="submit"),this.sendIq({to:e,type:"set",mucOwner:{form:f}},n)},e.getUniqueRoomName=function(e,f){return this.sendIq({type:"get",to:e,mucUnique:!0},f)}}},{"../stanza/hats":68,"../stanza/muc":78,underscore:353,"xmpp-jid":355}],32:[function(e,f){"use strict";e("../stanza/nick");var n="http://jabber.org/protocol/nick";f.exports=function(e){e.disco.addFeature(n),e.disco.addFeature(n+"+notify"),e.on("pubsub:event",function(f){f.event.updated&&f.event.updated.node===n&&e.emit("nick",{jid:f.from,nick:f.event.updated.published[0].nick})}),e.publishNick=function(e,f){return this.publish("",n,{nick:e},f)}}},{"../stanza/nick":79}],33:[function(e,f){"use strict";e("../stanza/oob"),f.exports=function(e){e.disco.addFeature("jabber:x:oob")}},{"../stanza/oob":80}],34:[function(e,f){"use strict";e("../stanza/ping"),f.exports=function(e){e.disco.addFeature("urn:xmpp:ping"),e.on("iq:get:ping",function(f){e.sendIq(f.resultReply())}),e.ping=function(e,f){return this.sendIq({to:e,type:"get",ping:!0},f)}}},{"../stanza/ping":81}],35:[function(e,f){"use strict";
e("../stanza/private"),f.exports=function(e){e.getPrivateData=function(e,f){return this.sendIq({type:"get",privateStorage:e},f)},e.setPrivateData=function(e,f){return this.sendIq({type:"set",privateStorage:e},f)}}},{"../stanza/private":83}],36:[function(e,f){"use strict";e("../stanza/psa"),f.exports=function(e){e.disco.addFeature("urn:xmpp:psa")}},{"../stanza/psa":84}],37:[function(e,f){"use strict";e("../stanza/pubsub"),e("../stanza/pubsubOwner"),e("../stanza/pubsubEvents"),e("../stanza/pubsubError"),f.exports=function(e){e.on("message",function(f){if(f.event){if(e.emit("pubsub:event",f),e.emit("pubsubEvent",f),f.event.updated){var n=f.event.updated.published,o=f.event.updated.retracted;n&&n.length&&e.emit("pubsub:published",f),o&&o.length&&e.emit("pubsub:retracted",f)}f.event.purged&&e.emit("pubsub:purged",f),f.event.deleted&&e.emit("pubsub:deleted",f),f.event.subscriptionChanged&&e.emit("pubsub:subscription",f),f.event.configurationChanged&&e.emit("pubsub:config",f)}f.pubsub&&f.pubsub.affiliations&&e.emit("pubsub:affiliation",f)}),e.subscribeToNode=function(f,n,o){return n.jid=n.jid||e.jid,this.sendIq({type:"set",to:f,pubsub:{subscribe:n}},o)},e.unsubscribeFromNode=function(f,n,o){return n.jid=n.jid||e.jid.bare,this.sendIq({type:"set",to:f,pubsub:{unsubscribe:n}},o)},e.publish=function(e,f,n,o){return this.sendIq({type:"set",to:e,pubsub:{publish:{node:f,item:n}}},o)},e.getItem=function(e,f,n,o){return this.sendIq({type:"get",to:e,pubsub:{retrieve:{node:f,item:n}}},o)},e.getItems=function(e,f,n,o){return n=n||{},n.node=f,this.sendIq({type:"get",to:e,pubsub:{retrieve:{node:f,max:n.max},rsm:n.rsm}},o)},e.retract=function(e,f,n,o,d){return this.sendIq({type:"set",to:e,pubsub:{retract:{node:f,notify:o,id:n}}},d)},e.purgeNode=function(e,f,n){return this.sendIq({type:"set",to:e,pubsubOwner:{purge:f}},n)},e.deleteNode=function(e,f,n){return this.sendIq({type:"set",to:e,pubsubOwner:{del:f}},n)},e.createNode=function(e,f,n,o){var d={type:"set",to:e,pubsubOwner:{create:f}};return n&&(d.pubsubOwner.config={form:n}),this.sendIq(d,o)},e.getSubscriptions=function(e,f,n){return f=f||{},this.sendIq({type:"get",to:e,pubsub:{subscriptions:f}},n)},e.getAffiliations=function(e,f,n){return f=f||{},this.sendIq({type:"get",to:e,pubsub:{affiliations:f}},n)},e.getNodeSubscribers=function(e,f,n,o){return n=n||{},n.node=f,this.sendIq({type:"get",to:e,pubsubOwner:{subscriptions:n}},o)},e.updateNodeSubscriptions=function(e,f,n,o){return this.sendIq({type:"set",to:e,pubsubOwner:{subscriptions:{node:f,list:n}}},o)},e.getNodeAffiliations=function(e,f,n,o){return n=n||{},n.node=f,this.sendIq({type:"get",to:e,pubsubOwner:{affiliations:n}},o)},e.updateNodeAffiliations=function(e,f,n,o){return this.sendIq({type:"set",to:e,pubsubOwner:{affiliations:{node:f,list:n}}},o)}}},{"../stanza/pubsub":85,"../stanza/pubsubError":86,"../stanza/pubsubEvents":87,"../stanza/pubsubOwner":88}],38:[function(e,f){"use strict";e("../stanza/reach"),f.exports=function(e){e.disco.addFeature("urn:xmpp:reach:0"),e.disco.addFeature("urn:xmpp:reach:0+notify"),e.on("pubsub:event",function(f){f.event.updated&&"urn:xmpp:reach:0"===f.event.updated.node&&e.emit("reachability",{jid:f.from,addresses:f.event.updated.published[0].reach})}),e.on("presence",function(f){f.reach&&f.reach.length&&e.emit("reachability",{jid:f.from,addresses:f.reach})}),e.publishReachability=function(e,f){return this.publish("","urn:xmpp:reach:0",{reach:e},f)}}},{"../stanza/reach":89}],39:[function(e,f){"use strict";f.exports=function(e){e.disco.addFeature("urn:xmpp:receipts"),e.on("message",function(f){var n={normal:!0,chat:!0,headline:!0};n[f.type]&&f.requestReceipt&&!f.receipt&&e.sendMessage({to:f.from,receipt:f.id,id:f.id}),f.receipt&&(e.emit("receipt",f),e.emit("receipt:"+f.receipt))})}},{}],40:[function(e,f){"use strict";e("../stanza/register"),f.exports=function(e){e.getAccountInfo=function(e,f){return this.sendIq({type:"get",to:e,register:!0},f)},e.updateAccount=function(e,f,n){return this.sendIq({type:"set",to:e,register:f},n)},e.deleteAccount=function(e,f){return this.sendIq({type:"set",to:e,register:{remove:!0}},f)}}},{"../stanza/register":90}],41:[function(e,f){"use strict";e("../stanza/roster"),f.exports=function(e){e.on("iq:set:roster",function(f){var n={};return n[""]=!0,n[e.jid.bare]=!0,n[e.jid.domain]=!0,n[f.from.full]?(e.emit("roster:update",f),void e.sendIq({id:f.id,type:"result"})):e.sendIq(f.errorReply({error:{type:"cancel",condition:"service-unavailable"}}))}),e.getRoster=function(f){var n=this;return f=f||function(){},e.sendIq({type:"get",roster:{ver:n.config.rosterVer}}).then(function(e){if(e.roster){var f=e.roster.ver;f&&(n.config.rosterVer=f,n.emit("roster:ver",f))}return e}).nodeify(f)},e.updateRosterItem=function(f,n){return e.sendIq({type:"set",roster:{items:[f]}},n)},e.removeRosterItem=function(f,n){return e.updateRosterItem({jid:f,subscription:"remove"},n)},e.subscribe=function(f){e.sendPresence({type:"subscribe",to:f})},e.unsubscribe=function(f){e.sendPresence({type:"unsubscribe",to:f})},e.acceptSubscription=function(f){e.sendPresence({type:"subscribed",to:f})},e.denySubscription=function(f){e.sendPresence({type:"unsubscribed",to:f})}}},{"../stanza/roster":91}],42:[function(e,f){"use strict";e("../stanza/rtt"),f.exports=function(e){e.disco.addFeature("urn:xmpp:rtt:0"),e.on("message",function(f){f.rtt&&(e.emit("rtt",f),e.emit("rtt:"+f.rtt.event,f))})}},{"../stanza/rtt":94}],43:[function(e,f){e("../stanza/shim");var n="http://jabber.org/protocol/shim";f.exports=function(e){e.disco.addFeature(n),e.disco.addFeature(n+"#SubID",n)}},{"../stanza/shim":97}],44:[function(e,f){"use strict";e("../stanza/time"),f.exports=function(e){e.disco.addFeature("urn:xmpp:time"),e.getTime=function(e,f){return this.sendIq({to:e,type:"get",time:!0},f)},e.on("iq:get:time",function(f){var n=new Date;e.sendIq(f.resultReply({time:{utc:n,tzo:n.getTimezoneOffset()}}))})}},{"../stanza/time":102}],45:[function(e,f){"use strict";e("../stanza/vcard"),f.exports=function(e){e.disco.addFeature("vcard-temp"),e.getVCard=function(e,f){return this.sendIq({to:e,type:"get",vCardTemp:!0},f)},e.publishVCard=function(e,f){return this.sendIq({type:"set",vCardTemp:e},f)}}},{"../stanza/vcard":103}],46:[function(e,f){"use strict";e("../stanza/version"),f.exports=function(e){e.disco.addFeature("jabber:iq:version"),e.on("iq:get:version",function(f){e.sendIq(f.resultReply({version:e.config.softwareVersion||{name:"stanza.io"}}))}),e.getSoftwareVersion=function(e,f){return this.sendIq({to:e,type:"get",version:!0},f)}}},{"../stanza/version":104}],47:[function(e,f){"use strict";function n(e,f){return(e%f+f)%f}function o(e){this.client=e,this.id=!1,this.allowResume=!0,this.started=!1,this.lastAck=0,this.handled=0,this.windowSize=1,this.unacked=[],this.pendingAck=!1}var d=e("./stanza/sm"),i=Math.pow(2,32);o.prototype={constructor:{value:o},enable:function(){var e=new d.Enable;e.resume=this.allowResume,this.client.send(e),this.handled=0,this.started=!0},resume:function(){var e=new d.Resume({h:this.handled,previd:this.id});this.client.send(e),this.started=!0},enabled:function(e){this.id=e.id},resumed:function(e){this.id=e.previd,e.h&&this.process(e,!0)},failed:function(){this.started=!1,this.id=!1,this.lastAck=0,this.handled=0,this.unacked=[]},ack:function(){this.client.send(new d.Ack({h:this.handled}))},request:function(){this.pendingAck=!0,this.client.send(new d.Request)},process:function(e,f){var o=this,d=n(e.h-this.lastAck,i);this.pendingAck=!1;for(var t=0;d>t&&this.unacked.length>0;t++)this.client.emit("stanza:acked",this.unacked.shift());if(this.lastAck=e.h,f){var l=this.unacked;this.unacked=[],l.forEach(function(e){o.client.send(e)})}this.needAck()&&this.request()},track:function(e){var f=e._name,n={message:!0,presence:!0,iq:!0};this.started&&n[f]&&(this.unacked.push(e),this.needAck()&&this.request())},handle:function(){this.started&&(this.handled=n(this.handled+1,i))},needAck:function(){return!this.pendingAck&&this.unacked.length>=this.windowSize}},f.exports=o},{"./stanza/sm":98}],48:[function(e,f){"use strict";var n=e("underscore"),o=e("jxt"),d=e("./pubsub").Item,i=e("./pubsubEvents").EventItem,t=f.exports=o.define({name:"avatar",namespace:"urn:xmpp:avatar:metadata",element:"info",fields:{id:o.attribute("id"),bytes:o.attribute("bytes"),height:o.attribute("height"),width:o.attribute("width"),type:o.attribute("type","image/png"),url:o.attribute("url")}}),l={get:function(){var e=o.find(this.xml,"urn:xmpp:avatar:metadata","metadata"),f=[];if(e.length){var d=o.find(e[0],"urn:xmpp:avatar:metadata","info");n.forEach(d,function(e){f.push(new t({},e))})}return f},set:function(e){var f=o.findOrCreate(this.xml,"urn:xmpp:avatar:metadata","metadata");o.setAttribute(f,"xmlns","urn:xmpp:avatar:metadata"),n.forEach(e,function(e){var n=new t(e);f.appendChild(n.xml)})}};o.add(d,"avatars",l),o.add(i,"avatars",l),o.add(d,"avatarData",o.subText("urn:xmpp:avatar:data","data")),o.add(i,"avatarData",o.subText("urn:xmpp:avatar:data","data"))},{"./pubsub":85,"./pubsubEvents":87,jxt:329,underscore:353}],49:[function(e,f){var n=e("jxt"),o=e("./iq"),d=e("./streamFeatures"),i=e("jxt-xmpp-types"),t="urn:ietf:params:xml:ns:xmpp-bind",l=f.exports=n.define({name:"bind",namespace:t,element:"bind",fields:{resource:n.subText(t,"resource"),jid:i.jidSub(t,"jid")}});n.extend(o,l),n.extend(d,l)},{"./iq":70,"./streamFeatures":101,jxt:329,"jxt-xmpp-types":328}],50:[function(e,f,n){"use strict";var o=e("jxt"),d=e("./iq"),i=e("xmpp-jid").JID,t="urn:xmpp:blocking",l={get:function(){var e=[],f=o.find(this.xml,t,"item");return f.length?(f.forEach(function(f){e.push(new i(o.getAttribute(f,"jid","")))}),e):e},set:function(e){var f=this;e.forEach(function(e){var n=o.createElement(t,"item",t);o.setAttribute(n,"jid",e.toString()),f.xml.appendChild(n)})}};n.Block=o.define({name:"block",namespace:t,element:"block",fields:{jids:l}}),n.Unblock=o.define({name:"unblock",namespace:t,element:"unblock",fields:{jids:l}}),n.BlockList=o.define({name:"blockList",namespace:t,element:"blocklist",fields:{jids:l}}),o.extend(d,n.Block),o.extend(d,n.Unblock),o.extend(d,n.BlockList)},{"./iq":70,jxt:329,"xmpp-jid":355}],51:[function(e,f){var n=e("jxt"),o=e("./iq"),d=e("./message"),i=e("./presence"),t="urn:xmpp:bob",l=f.exports=n.define({name:"bob",namespace:t,element:"data",fields:{cid:n.attribute("cid"),maxAge:n.numberAttribute("max-age"),type:n.attribute("type"),data:n.text()}});n.extend(o,l),n.extend(d,l),n.extend(i,l)},{"./iq":70,"./message":76,"./presence":82,jxt:329}],52:[function(e,f){var n=e("jxt"),o=e("jxt-xmpp-types"),d=e("./private"),i=n.define({name:"_conference",namespace:"storage:bookmarks",element:"conference",fields:{name:n.attribute("name"),autoJoin:n.boolAttribute("autojoin"),jid:o.jidAttribute("jid"),nick:n.subText("storage:bookmarks","nick")}}),t=f.exports=n.define({name:"bookmarks",namespace:"storage:bookmarks",element:"storage"});n.extend(d,t),n.extend(t,i,"conferences")},{"./private":83,jxt:329,"jxt-xmpp-types":328}],53:[function(e,f){"use strict";var n=e("jxt"),o=e("jxt-xmpp-types"),d="http://jabber.org/protocol/httpbind",i="urn:xmpp:xbosh";f.exports=n.define({name:"bosh",namespace:d,element:"body",prefixes:{xmpp:i},fields:{accept:n.attribute("accept"),ack:n.numberAttribute("ack"),authid:n.attribute("authid"),charsets:n.attribute("charsets"),condition:n.attribute("condition"),content:n.attribute("content"),from:o.jidAttribute("from",!0),hold:n.numberAttribute("hold"),inactivity:n.numberAttribute("inactivity"),key:n.attribute("key"),maxpause:n.numberAttribute("maxpause"),newKey:n.attribute("newkey"),pause:n.numberAttribute("pause"),polling:n.numberAttribute("polling"),resport:n.numberAttribute("report"),requests:n.numberAttribute("requests"),rid:n.numberAttribute("rid"),sid:n.attribute("sid"),stream:n.attribute("stream"),time:n.attribute("time"),to:o.jidAttribute("to",!0),type:n.attribute("type"),ver:n.attribute("ver"),wait:n.numberAttribute("wait"),uri:n.subText(d,"uri"),lang:n.langAttribute(),version:n.attribute("xmpp:version","1.0"),restart:n.attribute("xmpp:restart"),restartLogic:n.boolAttribute("xmpp:restartLogic"),payload:{get:function(){for(var e=[],f=0,o=this.xml.childNodes.length;o>f;f++){var d=n.build(this.xml.childNodes[f]);void 0!==d&&e.push(d)}return e},set:function(e){var f=this;e.forEach(function(e){f.xml.appendChild(e.xml)})}}}})},{jxt:329,"jxt-xmpp-types":328}],54:[function(e,f){var n=e("jxt"),o=e("./presence"),d=e("./streamFeatures"),i=f.exports=n.define({name:"caps",namespace:"http://jabber.org/protocol/caps",element:"c",fields:{ver:n.attribute("ver"),node:n.attribute("node"),hash:n.attribute("hash"),ext:n.attribute("ext")}});n.extend(o,i),n.extend(d,i)},{"./presence":82,"./streamFeatures":101,jxt:329}],55:[function(e,f,n){var o=e("jxt"),d=e("./message"),i=e("./iq"),t=e("./forwarded");n.Sent=o.define({name:"carbonSent",eventName:"carbon:sent",namespace:"urn:xmpp:carbons:2",element:"sent"}),n.Received=o.define({name:"carbonReceived",eventName:"carbon:received",namespace:"urn:xmpp:carbons:2",element:"received"}),n.Private=o.define({name:"carbonPrivate",eventName:"carbon:private",namespace:"urn:xmpp:carbons:2",element:"private"}),n.Enable=o.define({name:"enableCarbons",namespace:"urn:xmpp:carbons:2",element:"enable"}),n.Disable=o.define({name:"disableCarbons",namespace:"urn:xmpp:carbons:2",element:"disable"}),o.extend(n.Sent,t),o.extend(n.Received,t),o.extend(d,n.Sent),o.extend(d,n.Received),o.extend(d,n.Private),o.extend(i,n.Enable),o.extend(i,n.Disable)},{"./forwarded":64,"./iq":70,"./message":76,jxt:329}],56:[function(e,f){"use strict";var n=e("jxt"),o=e("./dataforms").DataForm,d=e("./error"),i=e("./iq"),t="http://jabber.org/protocol/commands",l=["next","prev","complete","cancel"],u=["bad-action","bad-locale","bad-payload","bad-sessionid","malformed-action","session-expired"],p=f.exports=n.define({name:"command",namespace:t,element:"command",fields:{action:n.attribute("action"),node:n.attribute("node"),sessionid:n.attribute("sessionid"),status:n.attribute("status"),noteType:n.subAttribute(t,"note","type"),note:n.subText(t,"note"),execute:n.subAttribute(t,"actions","execute"),actions:{get:function(){var e=[],f=n.find(this.xml,t,"actions");return f.length?(l.forEach(function(o){var d=n.find(f[0],t,o);d.length&&e.push(o)}),e):[]},set:function(e){for(var f=n.findOrCreate(this.xml,t,"actions"),o=0,d=f.childNodes.length;d>o;o++)f.removeChild(f.childNodes[o]);e.forEach(function(e){f.appendChild(n.createElement(t,e.toLowerCase(),t))})}}}});n.add(d,"adhocCommandCondition",n.enumSub(t,u)),n.extend(i,p),n.extend(p,o)},{"./dataforms":58,"./error":61,"./iq":70,jxt:329}],57:[function(e,f,n){var o=e("jxt"),d=e("./streamFeatures"),i="urn:xmpp:csi";n.CSIFeature=o.define({name:"clientStateIndication",namespace:i,element:"csi"}),n.Active=o.define({name:"csiActive",eventName:"csi:active",namespace:i,element:"active",topLevel:!0}),n.Inactive=o.define({name:"csiInactive",eventName:"csi:inactive",namespace:i,element:"inactive",topLevel:!0}),o.extend(d,n.CSIFeature)},{"./streamFeatures":101,jxt:329}],58:[function(e,f,n){"use strict";var o=e("jxt"),d=e("./message"),i=e("xmpp-jid").JID,t="jabber:x:data",l="urn:xmpp:media-element",u="http://jabber.org/protocol/xdata-validate",p="http://jabber.org/protocol/xdata-layout",s=["text-single","text-private","list-single","jid-single"];n.Field=o.define({name:"_field",namespace:t,element:"field",init:function(e){this._type=(e||{}).type||this.type},fields:{type:{get:function(){return o.getAttribute(this.xml,"type","text-single")},set:function(e){this._type=e,o.setAttribute(this.xml,"type",e)}},name:o.attribute("var"),desc:o.subText(t,"desc"),required:o.boolSub(t,"required"),label:o.attribute("label"),value:{get:function(){var e=o.getMultiSubText(this.xml,t,"value");return"boolean"===this._type?"1"===e[0]||"true"===e[0]:e.length>1?"text-multi"===this._type?e.join("\n"):"jid-multi"===this._type?e.map(function(e){return new i(e)}):e:s.indexOf(this._type)>=0?"jid-single"===this._type?new i(e[0]):e[0]:e},set:function(e){if("boolean"===this._type){var f=e===!0||"true"===e||"1"===e;o.setSubText(this.xml,t,"value",f?"1":"0")}else"text-multi"===this._type&&"string"==typeof e&&(e=e.split("\n")),o.setMultiSubText(this.xml,t,"value",e)}}}}),n.Option=o.define({name:"_formoption",namespace:t,element:"option",fields:{label:o.attribute("label"),value:o.subText(t,"value")}}),n.Item=o.define({name:"_formitem",namespace:t,element:"item"}),n.Media=o.define({name:"media",element:"media",namespace:l,fields:{height:o.numberAttribute("height"),width:o.numberAttribute("width")}}),n.MediaURI=o.define({name:"_mediaURI",element:"uri",namespace:l,fields:{uri:o.text(),type:o.attribute("type")}}),n.Validation=o.define({name:"validation",element:"validate",namespace:u,fields:{dataType:o.attribute("datatype"),basic:o.boolSub(u,"basic"),open:o.boolSub(u,"open"),regex:o.subText(u,"regex")}}),n.Range=o.define({name:"range",element:"range",namespace:u,fields:{min:o.attribute("min"),max:o.attribute("max")}}),n.ListRange=o.define({name:"select",element:"list-range",namespace:u,fields:{min:o.numberAttribute("min"),max:o.numberAttribute("max")}});var y={get:function(){for(var e=[],f=0,o=this.xml.childNodes.length;o>f;f++){var d=this.xml.childNodes[f];if(d.namespaceURI===p)switch(d.localName){case"text":e.push({text:d.textContent});break;case"fieldref":e.push({field:d.getAttribute("var")});break;case"reportedref":e.push({reported:!0});break;case"section":e.push({section:new n.Section(null,d,this).toJSON()})}}return e},set:function(e){for(var f=0,d=e.length;d>f;f++){var i=e[f];if(i.text){var t=o.createElement(p,"text",p);t.textContent=i.text,this.xml.appendChild(t)}if(i.field){var l=o.createElement(p,"fieldref",p);l.setAttribute("var",i.field),this.xml.appendChild(l)}if(i.reported&&this.xml.appendChild(o.createElement(p,"reportedref",p)),i.section){var u=o.createElement(p,"section",p);this.xml.appendChild(u);var s=new n.Section(null,u);s.label=i.section.label,s.contents=i.section.contents}}}};n.Section=o.define({name:"_section",element:"section",namespace:p,fields:{label:o.attribute("label"),contents:y}}),n.Page=o.define({name:"_page",element:"page",namespace:p,fields:{label:o.attribute("label"),contents:y}}),n.DataForm=o.define({name:"form",namespace:t,element:"x",init:function(){if(this.reportedFields.length){var e={};this.reportedFields.forEach(function(f){e[f.name]=f.type}),this.items.forEach(function(f){f.fields.forEach(function(f){f.type=f._type=e[f.name]})})}},fields:{title:o.subText(t,"title"),instructions:o.multiSubText(t,"instructions"),type:o.attribute("type","form"),reportedFields:o.subMultiExtension(t,"reported",n.Field)}}),o.extend(d,n.DataForm),o.extend(n.DataForm,n.Field,"fields"),o.extend(n.DataForm,n.Item,"items"),o.extend(n.DataForm,n.Page,"layout"),o.extend(n.Field,n.Media),o.extend(n.Field,n.Validation),o.extend(n.Field,n.Option,"options"),o.extend(n.Item,n.Field,"fields"),o.extend(n.Media,n.MediaURI,"uris"),o.extend(n.Validation,n.Range),o.extend(n.Validation,n.ListRange)},{"./message":76,jxt:329,"xmpp-jid":355}],59:[function(e,f){var n=e("jxt"),o=e("./message"),d=e("./presence"),i=e("jxt-xmpp-types"),t=f.exports=n.define({name:"delay",namespace:"urn:xmpp:delay",element:"delay",fields:{from:i.jidAttribute("from"),stamp:n.dateAttribute("stamp"),reason:n.text()}});n.extend(o,t),n.extend(d,t)},{"./message":76,"./presence":82,jxt:329,"jxt-xmpp-types":328}],60:[function(e,f,n){"use strict";var o=e("jxt"),d=e("jxt-xmpp-types"),i=e("./iq"),t=e("./rsm"),l=e("./dataforms").DataForm,u="http://jabber.org/protocol/disco#info",p="http://jabber.org/protocol/disco#items";n.DiscoInfo=o.define({name:"discoInfo",namespace:u,element:"query",fields:{node:o.attribute("node"),features:o.multiSubAttribute(u,"feature","var")}});var s=o.define({name:"_discoIdentity",namespace:u,element:"identity",fields:{category:o.attribute("category"),type:o.attribute("type"),name:o.attribute("name"),lang:o.langAttribute()}});n.DiscoItems=o.define({name:"discoItems",namespace:p,element:"query",fields:{node:o.attribute("node")}});var y=o.define({name:"_discoItem",namespace:p,element:"item",fields:{jid:d.jidAttribute("jid"),node:o.attribute("node"),name:o.attribute("name")}});o.extend(i,n.DiscoInfo),o.extend(i,n.DiscoItems),o.extend(n.DiscoItems,t),o.extend(n.DiscoItems,y,"items"),o.extend(n.DiscoInfo,s,"identities"),o.extend(n.DiscoInfo,l,"extensions")},{"./dataforms":58,"./iq":70,"./rsm":92,jxt:329,"jxt-xmpp-types":328}],61:[function(e,f){"use strict";var n=e("jxt"),o=e("jxt-xmpp-types"),d=e("./message"),i=e("./presence"),t=e("./iq"),l="urn:ietf:params:xml:ns:xmpp-stanzas",u=["bad-request","conflict","feature-not-implemented","forbidden","gone","internal-server-error","item-not-found","jid-malformed","not-acceptable","not-allowed","not-authorized","payment-required","recipient-unavailable","redirect","registration-required","remote-server-not-found","remote-server-timeout","resource-constraint","service-unavailable","subscription-required","undefined-condition","unexpected-request"],p=f.exports=n.define({name:"error",namespace:"jabber:client",element:"error",fields:{lang:{get:function(){return(this.parent||{}).lang||""}},condition:n.enumSub(l,u),gone:{get:function(){return n.getSubText(this.xml,l,"gone")},set:function(e){this.condition="gone",n.setSubText(this.xml,l,"gone",e)}},redirect:{get:function(){return n.getSubText(this.xml,l,"redirect")},set:function(e){this.condition="redirect",n.setSubText(this.xml,l,"redirect",e)}},code:n.attribute("code"),type:n.attribute("type"),by:o.jidAttribute("by"),$text:{get:function(){return n.getSubLangText(this.xml,l,"text",this.lang)}},text:{get:function(){var e=this.$text;return e[this.lang]||""},set:function(e){n.setSubLangText(this.xml,l,"text",e,this.lang)}}}});n.extend(d,p),n.extend(i,p),n.extend(t,p)},{"./iq":70,"./message":76,"./presence":82,jxt:329,"jxt-xmpp-types":328}],62:[function(e,f,n){var o=e("jxt"),d=e("./iq"),i=e("./dataforms").DataForm,t="urn:xmpp:extdisco:1",l=n.Services=o.define({name:"services",namespace:t,element:"services",fields:{type:o.attribute("type")}}),u=n.Credentials=o.define({name:"credentials",namespace:t,element:"credentials"}),p=o.define({name:"service",namespace:t,element:"service",fields:{host:o.attribute("host"),port:o.attribute("port"),transport:o.attribute("transport"),type:o.attribute("type"),username:o.attribute("username"),password:o.attribute("password")}});o.extend(l,p,"services"),o.extend(u,p),o.extend(p,i),o.extend(d,l),o.extend(d,u)},{"./dataforms":58,"./iq":70,jxt:329}],63:[function(e,f,n){"use strict";var o=e("jxt"),d=e("./jingle"),i=e("./hash"),t="urn:xmpp:jingle:apps:file-transfer:3",l="urn:xmpp:thumbs:0";n.File=o.define({name:"_file",namespace:t,element:"file",fields:{name:o.subText(t,"name"),desc:o.subText(t,"desc"),size:o.numberSub(t,"size"),date:o.dateSub(t,"date")}}),n.Range=o.define({name:"range",namespace:t,element:"range",fields:{offset:o.numberAttribute("offset")}}),n.Thumbnail=o.define({name:"thumbnail",namespace:l,element:"thumbnail",fields:{cid:o.attribute("cid"),mimeType:o.attribute("mime-type"),width:o.numberAttribute("width"),height:o.numberAttribute("height")}}),n.FileTransfer=o.define({name:"_filetransfer",namespace:t,element:"description",fields:{descType:{value:"filetransfer"},offer:o.subExtension("offer",t,"offer",n.File),request:o.subExtension("request",t,"request",n.File)}}),d.registerDescription(n.FileTransfer),o.extend(n.File,i,"hashes"),o.extend(n.File,n.Range),o.extend(n.File,n.Thumbnail),o.extend(d.Content,n.FileTransfer)},{"./hash":67,"./jingle":72,jxt:329}],64:[function(e,f){var n=e("jxt"),o=e("./message"),d=e("./presence"),i=e("./iq"),t=e("./delayed"),l=f.exports=n.define({name:"forwarded",eventName:"forward",namespace:"urn:xmpp:forward:0",element:"forwarded"});n.extend(o,l),n.extend(l,o),n.extend(l,d),n.extend(l,i),n.extend(l,t)},{"./delayed":59,"./iq":70,"./message":76,"./presence":82,jxt:329}],65:[function(e,f,n){"use strict";var o=e("jxt"),d=e("jxt-xmpp-types"),i="urn:ietf:params:xml:ns:xmpp-framing";n.Open=o.define({name:"openStream",namespace:i,element:"open",topLevel:!0,fields:{lang:o.langAttribute(),id:o.attribute("id"),version:o.attribute("version","1.0"),to:d.jidAttribute("to",!0),from:d.jidAttribute("from",!0)}}),n.Close=o.define({name:"closeStream",namespace:i,element:"close",topLevel:!0,fields:{seeOtherURI:o.attribute("see-other-uri")}})},{jxt:329,"jxt-xmpp-types":328}],66:[function(e,f){"use strict";var n=e("jxt"),o=e("jxt-xmpp-types"),d=e("./pubsub").Item,i=e("./pubsubEvents").EventItem,t="http://jabber.org/protocol/geoloc",l=f.exports=n.define({name:"geoloc",namespace:t,element:"geoloc",fields:{accuracy:n.numberSub(t,"accuracy",!0),altitude:n.numberSub(t,"alt",!0),area:n.subText(t,"area"),heading:n.numberSub(t,"bearing",!0),bearing:n.numberSub(t,"bearing",!0),building:n.subText(t,"building"),country:n.subText(t,"country"),countrycode:n.subText(t,"countrycode"),datum:n.subText(t,"datum"),description:n.subText(t,"description"),error:n.numberSub(t,"error",!0),floor:n.subText(t,"floor"),latitude:n.numberSub(t,"lat",!0),locality:n.subText(t,"locality"),longitude:n.numberSub(t,"lon",!0),postalcode:n.subText(t,"postalcode"),region:n.subText(t,"region"),room:n.subText(t,"room"),speed:n.numberSub(t,"speed",!0),street:n.subText(t,"street"),text:n.subText(t,"text"),timestamp:n.dateSub(t,"timestamp"),tzo:o.tzoSub(t,"tzo"),uri:n.subText(t,"uri")}});n.extend(d,l),n.extend(i,l)},{"./pubsub":85,"./pubsubEvents":87,jxt:329,"jxt-xmpp-types":328}],67:[function(e,f){var n=e("jxt");f.exports=n.define({name:"hash",namespace:"urn:xmpp:hashes:1",element:"hash",fields:{algo:n.attribute("algo"),value:n.text()}})},{jxt:329}],68:[function(e,f){"use strict";var n=e("jxt"),o=e("./presence"),d="urn:xmpp:hats:0",i=f.exports=n.define({name:"_hat",namespace:d,element:"hat",fields:{lang:n.langAttribute(),name:n.attribute("name"),displayName:n.attribute("displayName")}});n.add(o,"hats",n.subMultiExtension(d,"hats",i))},{"./presence":82,jxt:329}],69:[function(e,f,n){var o=e("jxt"),d=e("./jingle"),i="urn:xmpp:jingle:transports:ice-udp:1";n.ICEUDP=o.define({name:"_iceUdp",namespace:i,element:"transport",fields:{transType:{value:"iceUdp"},pwd:o.attribute("pwd"),ufrag:o.attribute("ufrag")}}),n.RemoteCandidate=o.define({name:"remoteCandidate",namespace:i,element:"remote-candidate",fields:{component:o.attribute("component"),ip:o.attribute("ip"),port:o.attribute("port")}}),n.Candidate=o.define({name:"_iceUdpCandidate",namespace:i,element:"candidate",fields:{component:o.attribute("component"),foundation:o.attribute("foundation"),generation:o.attribute("generation"),id:o.attribute("id"),ip:o.attribute("ip"),network:o.attribute("network"),port:o.attribute("port"),priority:o.attribute("priority"),protocol:o.attribute("protocol"),relAddr:o.attribute("rel-addr"),relPort:o.attribute("rel-port"),tcpType:o.attribute("tcptype"),type:o.attribute("type")}}),n.Fingerprint=o.define({name:"_iceFingerprint",namespace:"urn:xmpp:jingle:apps:dtls:0",element:"fingerprint",fields:{hash:o.attribute("hash"),setup:o.attribute("setup"),value:o.text(),required:o.boolAttribute("required")}}),n.SctpMap=o.define({name:"_sctpMap",namespace:"urn:xmpp:jingle:transports:dtls-sctp:1",element:"sctpmap",fields:{number:o.attribute("number"),protocol:o.attribute("protocol"),streams:o.attribute("streams")}}),d.registerTransport(n.ICEUDP),o.extend(d.Content,n.ICEUDP),o.extend(n.ICEUDP,n.Candidate,"candidates"),o.extend(n.ICEUDP,n.RemoteCandidate),o.extend(n.ICEUDP,n.Fingerprint,"fingerprints"),o.extend(n.ICEUDP,n.SctpMap,"sctp")},{"./jingle":72,jxt:329}],70:[function(e,f){"use strict";var n=e("jxt"),o=e("jxt-xmpp-types"),d=f.exports=n.define({name:"iq",namespace:"jabber:client",element:"iq",topLevel:!0,fields:{lang:n.langAttribute(),id:n.attribute("id"),to:o.jidAttribute("to",!0),from:o.jidAttribute("from",!0),type:n.attribute("type")}}),i=d.prototype.toJSON;d.prototype.toJSON=function(){var e=i.call(this);return e.resultReply=this.resultReply,e.errorReply=this.errorReply,e},d.prototype.resultReply=function(e){return e=e||{},e.to=this.from,e.id=this.id,e.type="result",new d(e)},d.prototype.errorReply=function(e){return e=e||{},e.to=this.from,e.id=this.id,e.type="error",new d(e)}},{jxt:329,"jxt-xmpp-types":328}],71:[function(e){var f=e("jxt"),n=e("./iq"),o=e("xmpp-jid").JID,d="urn:xmpp:jidprep:0";f.add(n,"jidPrep",{get:function(){var e=f.getSubText(this.xml,d,"jid");if(e){var n=new o(e);return n.prepped=!0,n}},set:function(e){f.setSubText(this.xml,d,"jid",(e||"").toString())}})},{"./iq":70,jxt:329,"xmpp-jid":355}],72:[function(e,f,n){"use strict";var o=e("jxt"),d=e("./iq"),i=e("./error"),t="urn:xmpp:jingle:1",l="urn:xmpp:jingle:errors:1",u=["out-of-order","tie-break","unknown-session","unsupported-info"],p=["alternative-session","busy","cancel","connectivity-error","decline","expired","failed-application","failed-transport","general-error","gone","incompatible-parameters","media-error","security-error","success","timeout","unsupported-applications","unsupported-transports"],s={descriptions:[],transports:[]};n.registerDescription=function(e){s.descriptions.push(e.prototype._name)},n.registerTransport=function(e){s.transports.push(e.prototype._name)},n.Jingle=o.define({name:"jingle",namespace:t,element:"jingle",fields:{action:o.attribute("action"),initiator:o.attribute("initiator"),responder:o.attribute("responder"),sid:o.attribute("sid")}}),n.Content=o.define({name:"_jingleContent",namespace:t,element:"content",fields:{creator:o.attribute("creator"),disposition:o.attribute("disposition","session"),name:o.attribute("name"),senders:o.attribute("senders","both"),description:{get:function(){for(var e=s.descriptions,f=0,n=e.length;n>f;f++)if(this._extensions[e[f]])return this._extensions[e[f]]},set:function(e){var f="_"+e.descType;this[f]=e}},transport:{get:function(){for(var e=s.transports,f=0,n=e.length;n>f;f++)if(this._extensions[e[f]])return this._extensions[e[f]]},set:function(e){var f="_"+e.transType;this[f]=e}}}}),n.Reason=o.define({name:"reason",namespace:t,element:"reason",fields:{condition:o.enumSub(t,p),alternativeSession:{get:function(){return o.getSubText(this.xml,t,"alternative-session")},set:function(e){this.condition="alternative-session",o.setSubText(this.xml,t,"alternative-session",e)}},text:o.subText(t,"text")}}),o.add(i,"jingleCondition",o.enumSub(l,u)),o.extend(d,n.Jingle),o.extend(n.Jingle,n.Content,"contents"),o.extend(n.Jingle,n.Reason)},{"./error":61,"./iq":70,jxt:329}],73:[function(e,f){"use strict";var n=e("jxt"),o=e("./message"),d=e("./pubsub").Item,i=e("./pubsubEvents").EventItem,t=f.exports={get:function(){var e=n.getSubText(this.xml,"urn:xmpp:json:0","json");return e?JSON.parse(e):void 0},set:function(e){e=JSON.stringify(e),e&&n.setSubText(this.xml,"urn:xmpp:json:0","json",e)}};n.add(o,"json",t),n.add(d,"json",t),n.add(i,"json",t)},{"./message":76,"./pubsub":85,"./pubsubEvents":87,jxt:329}],74:[function(e,f,n){"use strict";var o=e("jxt"),d=e("./message"),i="urn:xmpp:eventlog";n.Log=o.define({name:"log",namespace:i,element:"log",fields:{id:o.attribute("id"),timestamp:o.dateAttribute("timestamp"),type:o.attribute("type"),level:o.attribute("level"),object:o.attribute("object"),subject:o.attribute("subject"),facility:o.attribute("facility"),module:o.attribute("module"),message:o.subText(i,"message"),stackTrace:o.subText(i,"stackTrace")}}),n.Tag=o.define({name:"_logtag",namespace:i,element:"tag",fields:{name:o.attribute("name"),value:o.attribute("value"),type:o.attribute("type")}}),o.extend(n.Log,n.Tag,"tags"),o.extend(d,n.Log)},{"./message":76,jxt:329}],75:[function(e,f,n){"use strict";var o=e("jxt"),d=e("jxt-xmpp-types"),i=e("./message"),t=e("./iq"),l=e("./forwarded"),u=e("./rsm"),p=e("xmpp-jid").JID;n.MAMQuery=o.define({name:"mamQuery",namespace:"urn:xmpp:mam:tmp",element:"query",fields:{queryid:o.attribute("queryid"),start:o.dateSub("urn:xmpp:mam:tmp","start"),end:o.dateSub("urn:xmpp:mam:tmp","end"),"with":d.jidSub("urn:xmpp:mam:tmp","with")}}),n.Result=o.define({name:"mam",eventName:"mam:result",namespace:"urn:xmpp:mam:tmp",element:"result",fields:{queryid:o.attribute("queryid"),id:o.attribute("id")}}),n.Archived=o.define({name:"_mamArchived",namespace:"urn:xmpp:mam:tmp",element:"archived",fields:{by:d.jidAttribute("by"),id:o.attribute("id")}}),n.Prefs=o.define({name:"mamPrefs",namespace:"urn:xmpp:mam:tmp",element:"prefs",fields:{defaultCondition:o.attribute("default"),always:{get:function(){var e=[],f=o.find(this.xml,this._NS,"always");
if(0===f.length)return e;f=f[0];var n=o.getMultiSubText(f,this._NS,"jid");return n.forEach(function(f){e.push(new p(f.textContent))}),e},set:function(e){if(e.length>0){var f=o.find(this.xml,this._NS,"always");o.setMultiSubText(f,this._NS,"jid",e)}}},never:{get:function(){var e=[],f=o.find(this.xml,this._NS,"always");if(0===f.length)return e;f=f[0];var n=o.getMultiSubText(f,this._NS,"jid");return n.forEach(function(f){e.push(new p(f.textContent))}),e},set:function(e){if(e.length>0){var f=o.find(this.xml,this._NS,"never");o.setMultiSubText(f,this._NS,"jid",e)}}}}}),o.extend(i,n.Archived,"archived"),o.extend(t,n.MAMQuery),o.extend(t,n.Prefs),o.extend(i,n.Result),o.extend(n.Result,l),o.extend(n.MAMQuery,u)},{"./forwarded":64,"./iq":70,"./message":76,"./rsm":92,jxt:329,"jxt-xmpp-types":328,"xmpp-jid":355}],76:[function(e,f){"use strict";var n=e("jxt"),o=e("jxt-xmpp-types");f.exports=n.define({name:"message",namespace:"jabber:client",element:"message",topLevel:!0,fields:{lang:n.langAttribute(),id:n.attribute("id"),to:o.jidAttribute("to",!0),from:o.jidAttribute("from",!0),type:n.attribute("type","normal"),thread:n.subText("jabber:client","thread"),parentThread:n.subAttribute("jabber:client","thread","parent"),subject:n.subText("jabber:client","subject"),$body:{get:function(){return n.getSubLangText(this.xml,this._NS,"body",this.lang)}},body:{get:function(){var e=this.$body;return e[this.lang]||""},set:function(e){n.setSubLangText(this.xml,this._NS,"body",e,this.lang)}},attention:n.boolSub("urn:xmpp:attention:0","attention"),chatState:n.enumSub("http://jabber.org/protocol/chatstates",["active","composing","paused","inactive","gone"]),replace:n.subAttribute("urn:xmpp:message-correct:0","replace","id"),requestReceipt:n.boolSub("urn:xmpp:receipts","request"),receipt:n.subAttribute("urn:xmpp:receipts","received","id")}})},{jxt:329,"jxt-xmpp-types":328}],77:[function(e,f){"use strict";var n=e("jxt"),o=e("./pubsub").Item,d=e("./pubsubEvents").EventItem,i=e("./message"),t="http://jabber.org/protocol/mood",l=["afraid","amazed","amorous","angry","annoyed","anxious","aroused","ashamed","bored","brave","calm","cautious","cold","confident","confused","contemplative","contented","cranky","crazy","creative","curious","dejected","depressed","disappointed","disgusted","dismayed","distracted","embarrassed","envious","excited","flirtatious","frustrated","grateful","grieving","grumpy","guilty","happy","hopeful","hot","humbled","humiliated","hungry","hurt","impressed","in_awe","in_love","indignant","interested","intoxicated","invincible","jealous","lonely","lucky","mean","moody","nervous","neutral","offended","outraged","playful","proud","relaxed","relieved","remorseful","restless","sad","sarcastic","serious","shocked","shy","sick","sleepy","spontaneous","stressed","strong","surprised","thankful","thirsty","tired","undefined","weak","worried"],u=f.exports=n.define({name:"mood",namespace:t,element:"mood",fields:{text:n.subText(t,"text"),value:n.enumSub(t,l)}});n.extend(o,u),n.extend(d,u),n.extend(i,u)},{"./message":76,"./pubsub":85,"./pubsubEvents":87,jxt:329}],78:[function(e,f,n){"use strict";var o=e("jxt"),d=e("./message"),i=e("./presence"),t=e("./iq"),l=e("./dataforms").DataForm,u=e("jxt-xmpp-types"),p="http://jabber.org/protocol/muc",s=p+"#user",y=p+"#admin",c=p+"#owner",a=p+"#unique",r=function(e,f){return{get:function(){return this._extensions[e]?this[e][f]:void 0},set:function(n){this[e][f]=n}}},w=o.define({name:"_mucUserItem",namespace:s,element:"item",fields:{affiliation:o.attribute("affiliation"),nick:o.attribute("nick"),jid:u.jidAttribute("jid"),role:o.attribute("role"),reason:o.subText(s,"reason")}}),b=o.define({name:"_mucUserActor",namespace:s,element:"actor",fields:{nick:o.attribute("nick"),jid:u.jidAttribute("jid")}}),m=o.define({name:"destroyed",namespace:s,element:"destroy",fields:{jid:u.jidAttribute("jid"),reason:o.subText(s,"reason")}}),g=o.define({name:"invite",namespace:s,element:"invite",fields:{to:u.jidAttribute("to"),from:u.jidAttribute("from"),reason:o.subText(s,"reason"),thread:o.subAttribute(s,"continue","thread"),"continue":o.boolSub(s,"continue")}}),x=o.define({name:"decline",namespace:s,element:"decline",fields:{to:u.jidAttribute("to"),from:u.jidAttribute("from"),reason:o.subText(s,"reason")}}),P=o.define({name:"_mucAdminItem",namespace:y,element:"item",fields:{affiliation:o.attribute("affiliation"),nick:o.attribute("nick"),jid:u.jidAttribute("jid"),role:o.attribute("role"),reason:o.subText(y,"reason")}}),j=o.define({name:"actor",namespace:s,element:"actor",fields:{nick:o.attribute("nick"),jid:u.jidAttribute("jid")}}),v=o.define({name:"destroy",namespace:c,element:"destroy",fields:{jid:u.jidAttribute("jid"),password:o.subText(c,"password"),reason:o.subText(c,"reason")}});n.MUC=o.define({name:"muc",namespace:s,element:"x",fields:{affiliation:r("_mucUserItem","affiliation"),nick:r("_mucUserItem","nick"),jid:r("_mucUserItem","jid"),role:r("_mucUserItem","role"),actor:r("_mucUserItem","_mucUserActor"),reason:r("_mucUserItem","reason"),password:o.subText(s,"password"),codes:{get:function(){return o.getMultiSubText(this.xml,s,"status",function(e){return o.getAttribute(e,"code")})},set:function(e){var f=this;o.setMultiSubText(this.xml,s,"status",e,function(e){var n=o.createElement(s,"status",s);o.setAttribute(n,"code",e),f.xml.appendChild(n)})}}}}),n.MUCAdmin=o.define({name:"mucAdmin",namespace:y,element:"query",fields:{affiliation:r("_mucAdminItem","affiliation"),nick:r("_mucAdminItem","nick"),jid:r("_mucAdminItem","jid"),role:r("_mucAdminItem","role"),actor:r("_mucAdminItem","_mucAdminActor"),reason:r("_mucAdminItem","reason")}}),n.MUCOwner=o.define({name:"mucOwner",namespace:c,element:"query"}),n.MUCJoin=o.define({name:"joinMuc",namespace:p,element:"x",fields:{password:o.subText(p,"password"),history:{get:function(){var e={},f=o.find(this.xml,this._NS,"history");if(!f.length)return{};f=f[0];var n=f.getAttribute("maxchars")||"",d=f.getAttribute("maxstanas")||"",i=f.getAttribute("seconds")||"",t=f.getAttribute("since")||"";n&&(e.maxchars=parseInt(n,10)),d&&(e.maxstanzas=parseInt(d,10)),i&&(e.seconds=parseInt(i,10)),t&&(e.since=new Date(t))},set:function(e){var f=o.find(this.xml,this._NS,"history");if(f.length)for(var n=0;n<f.length;n++)this.xml.removeChild(f[n]);var d=o.createElement(this._NS,"history",this._NS);this.xml.appendChild(d),e.maxchars&&d.setAttribute(""+e.maxchars),e.maxstanzas&&d.setAttribute(""+e.maxstanzas),e.seconds&&d.setAttribute(""+e.seconds),e.since&&d.setAttribute(e.since.toISOString())}}}}),n.DirectInvite=o.define({name:"mucInvite",namespace:"jabber:x:conference",element:"x",fields:{jid:u.jidAttribute("jid"),password:o.attribute("password"),reason:o.attribute("reason"),thread:o.attribute("thread"),"continue":o.boolAttribute("continue")}}),o.add(t,"mucUnique",o.subText(a,"unique")),o.extend(w,b),o.extend(n.MUC,w),o.extend(n.MUC,g,"invites"),o.extend(n.MUC,x),o.extend(n.MUC,m),o.extend(P,j),o.extend(n.MUCAdmin,P,"items"),o.extend(n.MUCOwner,v),o.extend(n.MUCOwner,l),o.extend(i,n.MUC),o.extend(d,n.MUC),o.extend(i,n.MUCJoin),o.extend(d,n.DirectInvite),o.extend(t,n.MUCAdmin),o.extend(t,n.MUCOwner)},{"./dataforms":58,"./iq":70,"./message":76,"./presence":82,jxt:329,"jxt-xmpp-types":328}],79:[function(e){"use strict";var f=e("jxt"),n=e("./pubsub").Item,o=e("./pubsubEvents").EventItem,d=e("./presence"),i=e("./message"),t=f.subText("http://jabber.org/protocol/nick","nick");f.add(n,"nick",t),f.add(o,"nick",t),f.add(d,"nick",t),f.add(i,"nick",t)},{"./message":76,"./presence":82,"./pubsub":85,"./pubsubEvents":87,jxt:329}],80:[function(e,f){"use strict";var n=e("jxt"),o=e("./message"),d="jabber:x:oob",i=f.exports=n.define({name:"oob",element:"x",namespace:d,fields:{url:n.subText(d,"url"),desc:n.subText(d,"desc")}});n.extend(o,i,"oobURIs")},{"./message":76,jxt:329}],81:[function(e,f){var n=e("jxt"),o=e("./iq"),d="urn:xmpp:ping",i=f.exports=n.define({name:"ping",namespace:d,element:"ping",fields:{}});n.extend(o,i)},{"./iq":70,jxt:329}],82:[function(e,f){"use strict";var n=e("jxt"),o=e("jxt-xmpp-types");f.exports=n.define({name:"presence",namespace:"jabber:client",element:"presence",topLevel:!0,fields:{lang:n.langAttribute(),id:n.attribute("id"),to:o.jidAttribute("to",!0),from:o.jidAttribute("from",!0),priority:n.numberSub("jabber:client","priority",!1,0),show:n.subText("jabber:client","show"),type:{get:function(){return n.getAttribute(this.xml,"type","available")},set:function(e){"available"===e&&(e=!1),n.setAttribute(this.xml,"type",e)}},$status:{get:function(){return n.getSubLangText(this.xml,this._NS,"status",this.lang)}},status:{get:function(){var e=this.$status;return e[this.lang]||""},set:function(e){n.setSubLangText(this.xml,this._NS,"status",e,this.lang)}},idleSince:n.dateSubAttribute("urn:xmpp:idle:1","idle","since"),decloak:n.subAttribute("urn:xmpp:decloak:0","decloak","reason"),avatarId:{get:function(){var e="vcard-temp:x:update",f=n.find(this.xml,e,"x");return f.length?n.getSubText(f[0],e,"photo"):""},set:function(e){var f="vcard-temp:x:update",o=n.findOrCreate(this.xml,f,"x");if(""===e)n.setBoolSub(o,f,"photo",!0);else{if(e===!0)return;e?n.setSubText(o,f,"photo",e):this.xml.removeChild(o)}}}}})},{jxt:329,"jxt-xmpp-types":328}],83:[function(e,f){var n=e("jxt"),o=e("./iq"),d=f.exports=n.define({name:"privateStorage",namespace:"jabber:iq:private",element:"query"});n.extend(o,d)},{"./iq":70,jxt:329}],84:[function(e,f){"use strict";var n=e("jxt"),o=e("jxt-xmpp-types"),d=e("./presence"),i="urn:xmpp:psa",t=["server-unavailable","connection-paused"],l=f.exports=n.define({name:"state",namespace:i,element:"state-annotation",fields:{from:o.jidAttribute("from"),condition:n.enumSub(i,t),description:n.subText(i,"description")}});n.extend(d,l)},{"./presence":82,jxt:329,"jxt-xmpp-types":328}],85:[function(e,f,n){"use strict";var o=e("jxt"),d=e("jxt-xmpp-types"),i=e("./iq"),t=e("./message"),l=e("./dataforms").DataForm,u=e("./rsm"),p="http://jabber.org/protocol/pubsub";n.Pubsub=o.define({name:"pubsub",namespace:"http://jabber.org/protocol/pubsub",element:"pubsub",fields:{publishOptions:{get:function(){var e=o.find(this.xml,this._NS,"publish-options");return e.length&&e[0].childNodes.length?new l({},e[0].childNodes[0]):void 0},set:function(e){var f=o.findOrCreate(this.xml,this._NS,"publish-options");if(e){var n=new l(e);f.appendChild(n.xml)}}}}}),n.Subscribe=o.define({name:"subscribe",namespace:p,element:"subscribe",fields:{node:o.attribute("node"),jid:d.jidAttribute("jid")}}),n.Subscription=o.define({name:"subscription",namespace:p,element:"subscription",fields:{node:o.attribute("node"),jid:d.jidAttribute("jid"),subid:o.attribute("subid"),type:o.attribute("subscription"),configurable:o.boolSub("subscribe-options"),configurationRequired:{get:function(){var e=o.find(this.xml,p,"subscribe-options");return e.length?o.getBoolSub(e[0],p,"required"):!1}}}}),n.SubscriptionOptions=o.define({name:"subscriptionOptions",namespace:p,element:"options",fields:{node:o.attribute("node"),jid:d.jidAttribute("jid"),subid:o.attribute("subid")}}),n.Unsubscribe=o.define({name:"unsubscribe",namespace:p,element:"unsubscribe",fields:{node:o.attribute("node"),jid:d.jidAttribute("jid")}}),n.Subscriptions=o.define({name:"subscriptions",namespace:p,element:"subscriptions",fields:{node:o.attribute("node"),jid:d.jidAttribute("jid")}}),n.Affiliation=o.define({name:"affiliation",namespace:p,element:"affiliation",fields:{node:o.attribute("node"),jid:d.jidAttribute("jid"),type:o.attribute("affiliation")}}),n.Affiliations=o.define({name:"affiliations",namespace:p,element:"affiliations",fields:{node:o.attribute("node"),jid:d.jidAttribute("jid")}}),n.Publish=o.define({name:"publish",namespace:p,element:"publish",fields:{node:o.attribute("node")}}),n.Retract=o.define({name:"retract",namespace:p,element:"retract",fields:{node:o.attribute("node"),notify:o.boolAttribute("notify"),id:o.subAttribute(p,"item","id")}}),n.Retrieve=o.define({name:"retrieve",namespace:p,element:"items",fields:{node:o.attribute("node"),max:o.attribute("max_items")}}),n.Item=o.define({name:"item",namespace:p,element:"item",fields:{id:o.attribute("id")}}),o.extend(n.Pubsub,n.Subscribe),o.extend(n.Pubsub,n.Unsubscribe),o.extend(n.Pubsub,n.Publish),o.extend(n.Pubsub,n.Retrieve),o.extend(n.Pubsub,n.Subscription),o.extend(n.Pubsub,n.SubscriptionOptions),o.extend(n.Pubsub,n.Subscriptions),o.extend(n.Pubsub,n.Affiliations),o.extend(n.Pubsub,u),o.extend(n.Publish,n.Item,"items"),o.extend(n.Retrieve,n.Item,"items"),o.extend(n.SubscriptionOptions,l),o.extend(n.Subscriptions,n.Subscription,"list"),o.extend(n.Affiliations,n.Affiliation,"list"),o.extend(i,n.Pubsub),o.extend(t,n.Pubsub)},{"./dataforms":58,"./iq":70,"./message":76,"./rsm":92,jxt:329,"jxt-xmpp-types":328}],86:[function(e){"use strict";var f=e("jxt"),n=e("./error"),o="http://jabber.org/protocol/pubsub#errors",d=["closed-node","configuration-required","invalid-jid","invalid-options","invalid-payload","invalid-subid","item-forbidden","item-required","jid-required","max-items-exceeded","max-nodes-exceeded","nodeid-required","not-in-roster-group","not-subscribed","payload-too-big","payload-required","pending-subscription","presence-subscription-required","subid-required","too-many-subscriptions","unsupported","unsupported-access-model"];f.add(n,"pubsubCondition",f.enumSub(o,d))},{"./error":61,jxt:329}],87:[function(e,f,n){"use strict";var o=e("jxt"),d=e("jxt-xmpp-types"),i=e("./message"),t=e("./dataforms").DataForm,l="http://jabber.org/protocol/pubsub#event";n.Event=o.define({name:"event",namespace:l,element:"event"}),n.EventPurge=o.define({name:"purged",namespace:l,element:"purge",fields:{node:o.attribute("node")}}),n.EventDelete=o.define({name:"deleted",namespace:l,element:"delete",fields:{node:o.attribute("node"),redirect:o.subAttribute(l,"redirect","uri")}}),n.EventSubscription=o.define({name:"subscriptionChanged",namespace:l,element:"subscription",fields:{node:o.attribute("node"),jid:d.jidAttribute("jid"),type:o.attribute("subscription"),subid:o.attribute("subid"),expiry:{get:function(){var e=o.getAttribute(this.xml,"expiry");return"presence"===e?e:e?new Date(e):void 0},set:function(e){e&&("string"!=typeof e&&(e=e.toISOString()),o.setAttribute(this.xml,"expiry",e))}}}}),n.EventConfiguration=o.define({name:"configurationChanged",namespace:l,element:"configuration",fields:{node:o.attribute("node")}}),n.EventItems=o.define({name:"updated",namespace:l,element:"items",fields:{node:o.attribute("node"),retracted:{get:function(){var e=[],f=o.find(this.xml,this._NS,"retract");return f.forEach(function(f){e.push(f.getAttribute("id"))}),e},set:function(e){var f=this;e.forEach(function(e){var n=o.createElement(f._NS,"retract",f._NS);n.setAttribute("id",e),this.xml.appendChild(n)})}}}}),n.EventItem=o.define({name:"_eventItem",namespace:l,element:"item",fields:{id:o.attribute("id"),node:o.attribute("node"),publisher:d.jidAttribute("publisher")}}),o.extend(n.EventConfiguration,t),o.extend(n.EventItems,n.EventItem,"published"),o.extend(n.Event,n.EventItems),o.extend(n.Event,n.EventSubscription),o.extend(n.Event,n.EventConfiguration),o.extend(n.Event,n.EventDelete),o.extend(n.Event,n.EventPurge),o.extend(i,n.Event)},{"./dataforms":58,"./message":76,jxt:329,"jxt-xmpp-types":328}],88:[function(e,f,n){"use strict";var o=e("jxt"),d=e("jxt-xmpp-types"),i=e("./iq"),t=e("./dataforms").DataForm,l="http://jabber.org/protocol/pubsub#owner";n.PubsubOwner=o.define({name:"pubsubOwner",namespace:l,element:"pubsub",fields:{create:o.subAttribute(l,"create","node"),purge:o.subAttribute(l,"purge","node"),del:o.subAttribute(l,"delete","node"),redirect:{get:function(){var e=o.find(this.xml,this._NS,"delete");return e.length?o.getSubAttribute(e[0],this._NS,"redirect","uri"):""},set:function(e){var f=o.findOrCreate(this.xml,this._NS,"delete");o.setSubAttribute(f,this._NS,"redirect","uri",e)}}}}),n.Configure=o.define({name:"config",namespace:l,element:"configure",fields:{node:o.attribute("node")}}),n.Subscription=o.define({name:"subscription",namespace:l,element:"subscription",fields:{node:o.attribute("node"),jid:d.jidAttribute("jid"),subid:o.attribute("subid"),type:o.attribute("subscription"),configurable:o.boolSub("subscribe-options"),configurationRequired:{get:function(){var e=o.find(this.xml,l,"subscribe-options");return e.length?o.getBoolSub(e[0],l,"required"):!1}}}}),n.Subscriptions=o.define({name:"subscriptions",namespace:l,element:"subscriptions",fields:{node:o.attribute("node")}}),n.Affiliation=o.define({name:"affiliation",namespace:l,element:"affiliation",fields:{node:o.attribute("node"),type:o.attribute("affiliation")}}),n.Affiliations=o.define({name:"affiliations",namespace:l,element:"affiliations",fields:{node:o.attribute("node")}}),o.extend(n.Configure,t),o.extend(n.PubsubOwner,n.Configure),o.extend(n.PubsubOwner,n.Subscriptions),o.extend(n.PubsubOwner,n.Affiliations),o.extend(n.Subscriptions,n.Subscription,"list"),o.extend(n.Affiliations,n.Affiliation,"list"),o.extend(i,n.PubsubOwner)},{"./dataforms":58,"./iq":70,jxt:329,"jxt-xmpp-types":328}],89:[function(e,f){"use strict";var n=e("underscore"),o=e("jxt"),d=e("./pubsub").Item,i=e("./pubsubEvents").EventItem,t=e("./presence"),l="urn:xmpp:reach:0",u=f.exports=o.define({name:"_reachAddr",namespace:l,element:"addr",fields:{uri:o.attribute("uri"),$desc:{get:function(){return o.getSubLangText(this.xml,l,"desc",this.lang)}},desc:{get:function(){var e=this.$desc;return e[this.lang]||""},set:function(e){o.setSubLangText(this.xml,l,"desc",e,this.lang)}}}}),p={get:function(){var e=o.find(this.xml,l,"reach"),f=[];if(e.length){var d=o.find(e[0],l,"addr");n.forEach(d,function(e){f.push(new u({},e))})}return f},set:function(e){var f=o.findOrCreate(this.xml,l,"reach");o.setAttribute(f,"xmlns",l),n.forEach(e,function(e){var n=new u(e);f.appendChild(n.xml)})}};o.add(d,"reach",p),o.add(i,"reach",p),o.add(t,"reach",p)},{"./presence":82,"./pubsub":85,"./pubsubEvents":87,jxt:329,underscore:353}],90:[function(e,f){var n=e("jxt"),o=e("./iq"),d=e("./dataforms").DataForm,i=e("./oob"),t="jabber:iq:register",l=f.exports=n.define({name:"register",namespace:t,element:"query",fields:{instructions:n.subText(t,"instructions"),registered:n.boolSub(t,"registered"),remove:n.boolSub(t,"remove"),username:n.subText(t,"username"),nick:n.subText(t,"nick"),password:n.subText(t,"password"),name:n.subText(t,"name"),first:n.subText(t,"first"),last:n.subText(t,"last"),email:n.subText(t,"email"),address:n.subText(t,"address"),city:n.subText(t,"city"),state:n.subText(t,"state"),zip:n.subText(t,"zip"),phone:n.subText(t,"phone"),url:n.subText(t,"url"),date:n.subText(t,"date"),misc:n.subText(t,"misc"),text:n.subText(t,"text"),key:n.subText(t,"key")}});n.extend(o,l),n.extend(l,d),n.extend(l,i)},{"./dataforms":58,"./iq":70,"./oob":80,jxt:329}],91:[function(e,f){"use strict";var n=e("jxt"),o=e("jxt-xmpp-types"),d=e("./iq"),i="jabber:iq:roster",t=f.exports=n.define({name:"roster",namespace:i,element:"query",fields:{ver:{get:function(){return n.getAttribute(this.xml,"ver")},set:function(e){var f=""===e;n.setAttribute(this.xml,"ver",e,f)}}}}),l=n.define({name:"_rosterItem",namespace:i,element:"item",fields:{jid:o.jidAttribute("jid",!0),name:n.attribute("name"),subscription:n.attribute("subscription","none"),subscriptionRequested:{get:function(){var e=n.getAttribute(this.xml,"ask");return"subscribe"===e}},preApproved:n.boolAttribute(i,"approved"),groups:n.multiSubText(i,"group")}});n.extend(d,t),n.extend(t,l,"items")},{"./iq":70,jxt:329,"jxt-xmpp-types":328}],92:[function(e,f){"use strict";var n=e("jxt"),o="http://jabber.org/protocol/rsm";f.exports=n.define({name:"rsm",namespace:o,element:"set",fields:{after:n.subText(o,"after"),before:{get:function(){return n.getSubText(this.xml,this._NS,"before")},set:function(e){e===!0?n.findOrCreate(this.xml,this._NS,"before"):n.setSubText(this.xml,this._NS,"before",e)}},count:n.numberSub(o,"count",!1,0),first:n.subText(o,"first"),firstIndex:n.subAttribute(o,"first","index"),index:n.subText(o,"index"),last:n.subText(o,"last"),max:n.subText(o,"max")}})},{jxt:329}],93:[function(e,f,n){"use strict";var o=e("jxt"),d=e("./jingle"),i="urn:xmpp:jingle:apps:rtp:1",t="urn:xmpp:jingle:apps:rtp:rtcp-fb:0",l="urn:xmpp:jingle:apps:rtp:rtp-hdrext:0",u="urn:xmpp:jingle:apps:rtp:info:1",p="urn:xmpp:jingle:apps:rtp:ssma:0",s="urn:xmpp:jingle:apps:grouping:0",y={get:function(){var e=o.find(this.xml,t,"rtcp-fb"),f=[];return e.forEach(function(e){f.push({type:o.getAttribute(e,"type"),subtype:o.getAttribute(e,"subtype")})}),e=o.find(this.xml,t,"rtcp-fb-trr-int"),e.forEach(function(e){f.push({type:o.getAttribute(e,"type"),value:o.getAttribute(e,"value")})}),f},set:function(e){var f=this,n=o.find(this.xml,t,"rtcp-fb");n.forEach(function(e){f.xml.removeChild(e)}),n=o.find(this.xml,t,"rtcp-fb-trr-int"),n.forEach(function(e){f.xml.removeChild(e)}),e.forEach(function(e){var n;"trr-int"===e.type?(n=o.createElement(t,"rtcp-fb-trr-int",i),o.setAttribute(n,"type",e.type),o.setAttribute(n,"value",e.value)):(n=o.createElement(t,"rtcp-fb",i),o.setAttribute(n,"type",e.type),o.setAttribute(n,"subtype",e.subtype)),f.xml.appendChild(n)})}};n.RTP=o.define({name:"_rtp",namespace:i,element:"description",fields:{descType:{value:"rtp"},media:o.attribute("media"),ssrc:o.attribute("ssrc"),mux:o.boolSub(i,"rtcp-mux"),encryption:{get:function(){var e=o.find(this.xml,i,"encryption");if(!e.length)return[];e=e[0];var f=this,d=o.find(e,i,"crypto"),t=[];return d.forEach(function(e){t.push(new n.Crypto({},e,f).toJSON())}),t},set:function(e){var f=o.find(this.xml,i,"encryption");if(f.length&&this.xml.removeChild(f),e.length){o.setBoolSubAttribute(this.xml,i,"encryption","required",!0),f=o.find(this.xml,i,"encryption")[0];var d=this;e.forEach(function(e){var o=new n.Crypto(e,null,d);f.appendChild(o.xml)})}}},feedback:y,headerExtensions:{get:function(){var e=o.find(this.xml,l,"rtp-hdrext"),f=[];return e.forEach(function(e){f.push({id:o.getAttribute(e,"id"),uri:o.getAttribute(e,"uri"),senders:o.getAttribute(e,"senders")})}),f},set:function(e){var f=this,n=o.find(this.xml,l,"rtp-hdrext");n.forEach(function(e){f.xml.removeChild(e)}),e.forEach(function(e){var n=o.createElement(l,"rtp-hdrext",i);o.setAttribute(n,"id",e.id),o.setAttribute(n,"uri",e.uri),o.setAttribute(n,"senders",e.senders),f.xml.appendChild(n)})}}}}),n.PayloadType=o.define({name:"_payloadType",namespace:i,element:"payload-type",fields:{channels:o.attribute("channels"),clockrate:o.attribute("clockrate"),id:o.attribute("id"),maxptime:o.attribute("maxptime"),name:o.attribute("name"),ptime:o.attribute("ptime"),feedback:y,parameters:{get:function(){var e=[],f=o.find(this.xml,i,"parameter");return f.forEach(function(f){e.push({key:o.getAttribute(f,"name"),value:o.getAttribute(f,"value")})}),e},set:function(e){var f=this;e.forEach(function(e){var n=o.createElement(i,"parameter");o.setAttribute(n,"name",e.key),o.setAttribute(n,"value",e.value),f.xml.appendChild(n)})}}}}),n.Bandwidth=o.define({name:"bandwidth",namespace:i,element:"bandwidth",fields:{type:o.attribute("type"),bandwidth:o.text()}}),n.Crypto=o.define({name:"crypto",namespace:i,element:"crypto",fields:{cipherSuite:o.attribute("crypto-suite"),keyParams:o.attribute("key-params"),sessionParams:o.attribute("session-params"),tag:o.attribute("tag")}}),n.ContentGroup=o.define({name:"_group",namespace:s,element:"group",fields:{semantics:o.attribute("semantics"),contents:o.multiSubAttribute(s,"content","name")}}),n.SourceGroup=o.define({name:"_sourceGroup",namespace:p,element:"ssrc-group",fields:{semantics:o.attribute("semantics"),sources:o.multiSubAttribute(p,"source","ssrc")}}),n.Source=o.define({name:"_source",namespace:p,element:"source",fields:{ssrc:o.attribute("ssrc"),parameters:{get:function(){var e=[],f=o.find(this.xml,p,"parameter");return f.forEach(function(f){e.push({key:o.getAttribute(f,"name"),value:o.getAttribute(f,"value")})}),e},set:function(e){var f=this;e.forEach(function(e){var n=o.createElement(p,"parameter");o.setAttribute(n,"name",e.key),o.setAttribute(n,"value",e.value),f.xml.appendChild(n)})}}}}),n.Mute=o.define({name:"mute",namespace:u,element:"mute",fields:{creator:o.attribute("creator"),name:o.attribute("name")}}),n.Unmute=o.define({name:"unmute",namespace:u,element:"unmute",fields:{creator:o.attribute("creator"),name:o.attribute("name")}}),d.registerDescription(n.RTP),o.extend(d.Content,n.RTP),o.extend(n.RTP,n.Bandwidth),o.extend(n.RTP,n.PayloadType,"payloads"),o.extend(n.RTP,n.Source,"sources"),o.extend(n.RTP,n.SourceGroup,"sourceGroups"),o.extend(d.Jingle,n.Mute),o.extend(d.Jingle,n.Unmute),o.extend(d.Jingle,n.ContentGroup,"groups"),o.add(d.Jingle,"ringing",o.boolSub(u,"ringing")),o.add(d.Jingle,"hold",o.boolSub(u,"hold")),o.add(d.Jingle,"active",o.boolSub(u,"active"))},{"./jingle":72,jxt:329}],94:[function(e,f){var n=e("jxt"),o=e("./message"),d="urn:xmpp:rtt:0",i={insert:"t",erase:"e",wait:"w"},t={t:"insert",e:"erase",w:"wait"},l=f.exports=n.define({name:"rtt",namespace:d,element:"rtt",fields:{id:n.attribute("id"),event:n.attribute("event","edit"),seq:n.numberAttribute("seq"),actions:{get:function(){for(var e=[],f=0,o=this.xml.childNodes.length;o>f;f++){var i=this.xml.childNodes[f],l=i.localName,u={};if(i.namespaceURI===d&&t[l]){u.type=t[l];var p=n.getAttribute(i,"p");p&&(u.pos=parseInt(p,10));var s=n.getAttribute(i,"n");s&&(u.num=parseInt(s,10));var y=n.getText(i);y&&"t"===l&&(u.text=y),e.push(u)}}return e},set:function(e){for(var f=this,o=0,t=this.xml.childNodes.length;t>o;o++)this.xml.removeChild(this.xml.childNodes[o]);e.forEach(function(e){if(i[e.type]){var o=n.createElement(d,i[e.type],d);void 0!==e.pos&&n.setAttribute(o,"p",e.pos.toString()),e.num&&n.setAttribute(o,"n",e.num.toString()),e.text&&n.setText(o,e.text),f.xml.appendChild(o)}})}}}});n.extend(o,l)},{"./message":76,jxt:329}],95:[function(e,f,n){"use strict";var o=e("jxt"),d=e("./streamFeatures"),i="urn:ietf:params:xml:ns:xmpp-sasl",t=["aborted","account-disabled","credentials-expired","encryption-required","incorrect-encoding","invalid-authzid","invalid-mechanism","malformed-request","mechanism-too-weak","not-authorized","temporary-auth-failure"];n.Mechanisms=o.define({name:"sasl",namespace:i,element:"mechanisms",fields:{mechanisms:o.multiSubText(i,"mechanism")}}),n.Auth=o.define({name:"saslAuth",eventName:"sasl:auth",namespace:i,element:"auth",topLevel:!0,fields:{value:o.b64Text(),mechanism:o.attribute("mechanism")}}),n.Challenge=o.define({name:"saslChallenge",eventName:"sasl:challenge",namespace:i,element:"challenge",topLevel:!0,fields:{value:o.b64Text()}}),n.Response=o.define({name:"saslResponse",eventName:"sasl:response",namespace:i,element:"response",topLevel:!0,fields:{value:o.b64Text()}}),n.Abort=o.define({name:"saslAbort",eventName:"sasl:abort",namespace:i,element:"abort",topLevel:!0}),n.Success=o.define({name:"saslSuccess",eventName:"sasl:success",namespace:i,element:"success",topLevel:!0,fields:{value:o.b64Text()}}),n.Failure=o.define({name:"saslFailure",eventName:"sasl:failure",namespace:i,element:"failure",topLevel:!0,fields:{lang:{get:function(){return this._lang||""},set:function(e){this._lang=e}},condition:o.enumSub(i,t),$text:{get:function(){return o.getSubLangText(this.xml,i,"text",this.lang)}},text:{get:function(){var e=this.$text;return e[this.lang]||""},set:function(e){o.setSubLangText(this.xml,i,"text",e,this.lang)}}}}),o.extend(d,n.Mechanisms)},{"./streamFeatures":101,jxt:329}],96:[function(e,f){var n=e("jxt"),o=e("./iq"),d=e("./streamFeatures"),i="urn:ietf:params:xml:ns:xmpp-session",t=f.exports=n.define({name:"session",namespace:i,element:"session",fields:{required:n.boolSub(i,"required"),optional:n.boolSub(i,"optional")}});n.extend(d,t),n.extend(o,t)},{"./iq":70,"./streamFeatures":101,jxt:329}],97:[function(e,f){var n=e("jxt"),o=e("./message"),d=e("./presence"),i="http://jabber.org/protocol/shim",t=f.exports={get:function(){var e=n.find(this.xml,i,"headers");return e.length?n.getMultiSubText(e[0],i,"header",function(e){var f=n.getAttribute(e,"name");return f?{name:f,value:n.getText(e)}:void 0}):[]},set:function(e){var f=n.findOrCreate(this.xml,i,"headers");n.setMultiSubText(f,i,"header",e,function(e){var o=n.createElement(i,"header",i);n.setAttribute(o,"name",e.name),n.setText(o,e.value),f.appendChild(o)})}};n.add(o,"headers",t),n.add(d,"headers",t)},{"./message":76,"./presence":82,jxt:329}],98:[function(e,f,n){var o=e("jxt"),d=e("./streamFeatures"),i="urn:xmpp:sm:3";n.SMFeature=o.define({name:"streamManagement",namespace:i,element:"sm"}),n.Enable=o.define({name:"smEnable",eventName:"stream:management:enable",namespace:i,element:"enable",topLevel:!0,fields:{resume:o.boolAttribute("resume")}}),n.Enabled=o.define({name:"smEnabled",eventName:"stream:management:enabled",namespace:i,element:"enabled",topLevel:!0,fields:{id:o.attribute("id"),resume:o.boolAttribute("resume")}}),n.Resume=o.define({name:"smResume",eventName:"stream:management:resume",namespace:i,element:"resume",topLevel:!0,fields:{h:o.numberAttribute("h",!1,0),previd:o.attribute("previd")}}),n.Resumed=o.define({name:"smResumed",eventName:"stream:management:resumed",namespace:i,element:"resumed",topLevel:!0,fields:{h:o.numberAttribute("h",!1,0),previd:o.attribute("previd")}}),n.Failed=o.define({name:"smFailed",eventName:"stream:management:failed",namespace:i,element:"failed",topLevel:!0}),n.Ack=o.define({name:"smAck",eventName:"stream:management:ack",namespace:i,element:"a",topLevel:!0,fields:{h:o.numberAttribute("h",!1,0)}}),n.Request=o.define({name:"smRequest",eventName:"stream:management:request",namespace:i,element:"r",topLevel:!0}),o.extend(d,n.SMFeature)},{"./streamFeatures":101,jxt:329}],99:[function(e,f){"use strict";var n=e("jxt"),o=e("jxt-xmpp-types");f.exports=n.define({name:"stream",namespace:"http://etherx.jabber.org/streams",element:"stream",fields:{lang:n.langAttribute(),id:n.attribute("id"),version:n.attribute("version","1.0"),to:o.jidAttribute("to",!0),from:o.jidAttribute("from",!0)}})},{jxt:329,"jxt-xmpp-types":328}],100:[function(e,f){"use strict";var n=e("jxt"),o="urn:ietf:params:xml:ns:xmpp-streams",d=["bad-format","bad-namespace-prefix","conflict","connection-timeout","host-gone","host-unknown","improper-addressing","internal-server-error","invalid-from","invalid-namespace","invalid-xml","not-authorized","not-well-formed","policy-violation","remote-connection-failed","reset","resource-constraint","restricted-xml","see-other-host","system-shutdown","undefined-condition","unsupported-encoding","unsupported-feature","unsupported-stanza-type","unsupported-version"];f.exports=n.define({name:"streamError",namespace:"http://etherx.jabber.org/streams",element:"error",topLevel:!0,fields:{lang:{get:function(){return this._lang||""},set:function(e){this._lang=e}},condition:n.enumSub(o,d),seeOtherHost:{get:function(){return n.getSubText(this.xml,o,"see-other-host")},set:function(e){this.condition="see-other-host",n.setSubText(this.xml,o,"see-other-host",e)}},$text:{get:function(){return n.getSubLangText(this.xml,o,"text",this.lang)}},text:{get:function(){var e=this.$text;return e[this.lang]||""},set:function(e){n.setSubLangText(this.xml,o,"text",e,this.lang)}}}})},{jxt:329}],101:[function(e,f){"use strict";var n=e("jxt"),o=f.exports=n.define({name:"streamFeatures",namespace:"http://etherx.jabber.org/streams",element:"features",topLevel:!0}),d=n.define({name:"rosterVersioning",namespace:"urn:xmpp:features:rosterver",element:"ver"}),i=n.define({name:"subscriptionPreApproval",namespace:"urn:xmpp:features:pre-approval",element:"sub"});n.extend(o,d),n.extend(o,i)},{jxt:329}],102:[function(e,f){"use strict";var n=e("jxt"),o=e("jxt-xmpp-types"),d=e("./iq"),i=f.exports=n.define({name:"time",namespace:"urn:xmpp:time",element:"time",fields:{utc:n.dateSub("urn:xmpp:time","utc"),tzo:o.tzoSub("urn:xmpp:time","tzo",0)}});n.extend(d,i)},{"./iq":70,jxt:329,"jxt-xmpp-types":328}],103:[function(e,f){"use strict";var n=e("jxt"),o=e("./iq"),d="vcard-temp",i=f.exports=n.define({name:"vCardTemp",namespace:d,element:"vCard",fields:{role:n.subText(d,"ROLE"),website:n.subText(d,"URL"),title:n.subText(d,"TITLE"),description:n.subText(d,"DESC"),fullName:n.subText(d,"FN"),birthday:n.dateSub(d,"BDAY"),nicknames:n.multiSubText(d,"NICKNAME"),jids:n.multiSubText(d,"JABBERID")}}),t=n.define({name:"_email",namespace:d,element:"EMAIL",fields:{email:n.subText(d,"USERID"),home:n.boolSub(d,"HOME"),work:n.boolSub(d,"WORK"),preferred:n.boolSub(d,"PREF")}}),l=n.define({name:"_tel",namespace:d,element:"TEL",fields:{number:n.subText(d,"NUMBER"),home:n.boolSub(d,"HOME"),work:n.boolSub(d,"WORK"),mobile:n.boolSub(d,"CELL"),preferred:n.boolSub(d,"PREF")}}),u=n.define({name:"_address",namespace:d,element:"ADR",fields:{street:n.subText(d,"STREET"),street2:n.subText(d,"EXTADD"),country:n.subText(d,"CTRY"),city:n.subText(d,"LOCALITY"),region:n.subText(d,"REGION"),postalCode:n.subText(d,"PCODE"),pobox:n.subText(d,"POBOX"),home:n.boolSub(d,"HOME"),work:n.boolSub(d,"WORK"),preferred:n.boolSub(d,"PREF")}}),p=n.define({name:"organization",namespace:d,element:"ORG",fields:{name:n.subText(d,"ORGNAME"),unit:n.subText(d,"ORGUNIT")}}),s=n.define({name:"name",namespace:d,element:"N",fields:{family:n.subText(d,"FAMILY"),given:n.subText(d,"GIVEN"),middle:n.subText(d,"MIDDLE"),prefix:n.subText(d,"PREFIX"),suffix:n.subText(d,"SUFFIX")}}),y=n.define({name:"photo",namespace:d,element:"PHOTO",fields:{type:n.subText(d,"TYPE"),data:n.subText(d,"BINVAL"),url:n.subText(d,"EXTVAL")}});
n.extend(i,t,"emails"),n.extend(i,u,"addresses"),n.extend(i,l,"phoneNumbers"),n.extend(i,p),n.extend(i,s),n.extend(i,y),n.extend(o,i)},{"./iq":70,jxt:329}],104:[function(e,f){var n=e("jxt"),o=e("./iq"),d="jabber:iq:version",i=f.exports=n.define({name:"version",namespace:d,element:"query",fields:{name:n.subText(d,"name"),version:n.subText(d,"version"),os:n.subText(d,"os")}});n.extend(o,i)},{"./iq":70,jxt:329}],105:[function(e){var f=e("jxt"),n=e("./iq");f.add(n,"visible",f.boolSub("urn:xmpp:invisible:0","visible")),f.add(n,"invisible",f.boolSub("urn:xmpp:invisible:0","invisible"))},{"./iq":70,jxt:329}],106:[function(e,f){(function(n,o){"use strict";function d(){}function i(e,f,n,o){o=o||0;var t=s(e).cancellable().timeout(1e3*(f||20));return t.spread(function(e,f){if(e.statusCode<200||e.statusCode>=400)throw new d("HTTP Status Error");return f})["catch"](p.TimeoutError,function(){throw new d("Dead Connection, exceeded timeout limit")})["catch"](p.CancellationError,function(){})["catch"](function(){if(n>o)return p.delay(100).then(function(){return i(e,f,n,o+1)});throw new d("Dead Connection, exceeded retry limit")})}function t(e){var f=this;y.call(this),f.sm=e,f.sendQueue=[],f.requests=[],f.maxRequests=2,f.sid="",f.on("raw:incoming",function(e){if(e=e.trim(),""!==e){var n,o;try{n=c.parse(e,a)}catch(d){return o=new r({condition:"invalid-xml"}),f.emit("stream:error",o,d),f.send(o),f.disconnect()}f.hasStream||(f.hasStream=!0,f.stream={id:n.sid,lang:n.lang||"en",version:n.version||"1.0",to:n.to,from:n.from},f.sid=n.sid,f.maxRequests=n.requests);var i=n.payload;i.forEach(function(e){e.lang||(e.lang=f.stream.lang),f.emit("stream:data",e)}),"terminate"===n.type&&(f.rid=void 0,f.sid=void 0,f.emit("bosh:terminate",n),f.emit("stream:end"),f.emit("disconnected",f))}})}var l=e("underscore"),u=e("util"),p=e("bluebird"),s=p.promisify(e("request")),y=e("wildemitter"),c=e("jxt"),a=e("../stanza/bosh"),r=e("../stanza/streamError");u.inherits(d,Error),u.inherits(t,y),t.prototype.connect=function(e){var f=this;f.config=l.extend({rid:Math.ceil(9999999999*Math.random()),wait:30,maxRetries:5},e),f.hasStream=!1,f.sm.started=!1,f.url=e.boshURL,f.rid=f.config.rid,f.requests=[],f.rid++,f.request(new a({version:f.config.version||"1.0",to:f.config.server,lang:f.config.lang||"en",wait:f.config.wait,ver:"1.6",hold:1}))},t.prototype.disconnect=function(){this.hasStream?(this.rid++,this.request(new a({type:"terminate"}))):(this.requests.forEach(function(e){e.request.cancel()}),this.stream=void 0,this.sid=void 0,this.rid=void 0,this.emit("disconnected",this))},t.prototype.restart=function(){var e=this;e.rid++,e.request(new a({to:e.config.server,lang:e.config.lang||"en",restart:"true"}))},t.prototype.send=function(e){var f=this;f.hasStream&&(f.sendQueue.push(e),n.nextTick(f.longPoll.bind(f)))},t.prototype.longPoll=function(){var e=0===this.requests.length,f=this.sendQueue.length>0&&this.requests.length<this.maxRequests;if(this.sid&&(e||f)){var n=this.sendQueue;this.sendQueue=[],this.rid++,this.request(new a({payload:n}))}},t.prototype.request=function(e){var f=this,t={id:f.rid,request:null};e.rid=f.rid,e.sid=f.sid;var u=new o(e.toString(),"utf8").toString();f.emit("raw:outgoing",u),f.requests.push(t);var p=i({uri:f.url,body:u,method:"POST",strictSSL:!0},1.5*f.config.wait,this.config.maxRetries);return t.request=p,p.then(function(e){f.emit("raw:incoming",new o(e,"utf8").toString())})["catch"](d,function(e){f.hasStream=!1;var n=new r({condition:"connection-timeout"});f.emit("stream:error",n,e),f.disconnect()})["finally"](function(){f.requests=l.filter(f.requests,function(e){return e.id!==t.id}),"terminate"!==e.type&&n.nextTick(function(){n.nextTick(f.longPoll.bind(f))})})},f.exports=t}).call(this,e("FWaASH"),e("buffer").Buffer)},{"../stanza/bosh":53,"../stanza/streamError":100,FWaASH:169,bluebird:114,buffer:150,jxt:329,request:147,underscore:353,util:186,wildemitter:354}],107:[function(e,f){"use strict";function n(e){function f(e){return[n.streamStart,e,n.streamEnd].join("")}o.call(this,e);var n=this;n.on("connected",function(){n.streamStart='<stream:stream xmlns:stream="http://etherx.jabber.org/streams">',n.streamEnd="</stream:stream>"}),n.off("raw:incoming"),n.on("raw:incoming",function(e){var o,i,p;if(e=e.trim(),e=e.replace(/^(\s*<\?.*\?>\s*)*/,""),""!==e){if(e.match(n.streamEnd))return n.disconnect();if(n.hasStream)try{o=t.parse(f(e),l)}catch(s){return p=new u({condition:"invalid-xml"}),n.emit("stream:error",p,s),n.send(p),n.disconnect()}else{var y=e.match(/^<(\S+:)?(\S+) /);n.streamStart=e,n.streamEnd="</"+(y[1]||"")+y[2]+">",i=!1;try{o=t.parse(e+n.streamEnd,l)}catch(s){try{o=t.parse(e,l),i=!0}catch(c){return p=new u({condition:"invalid-xml"}),n.emit("stream:error",p,c),n.send(p),n.disconnect()}}n.hasStream=!0,n.stream=o,n.emit("stream:start",o)}d.each(o._extensions,function(e){e.lang||(e.lang=n.stream.lang),n.emit("stream:data",e)}),i&&n.emit("stream:end")}})}var o=e("./websocket"),d=e("underscore"),i=e("util"),t=e("jxt"),l=e("../stanza/stream"),u=e("../stanza/streamError");i.inherits(n,o),n.prototype.startHeader=function(){return["<stream:stream",'xmlns:stream="http://etherx.jabber.org/streams"','xmlns="jabber:client"','version="'+(this.config.version||"1.0")+'"','xml:lang="'+(this.config.lang||"en")+'"','to="'+this.config.server+'">'].join(" ")},n.prototype.closeHeader=function(){return"</stream:stream>"},f.exports=n},{"../stanza/stream":99,"../stanza/streamError":100,"./websocket":108,jxt:329,underscore:353,util:186}],108:[function(e,f){(function(n){"use strict";function o(e){var f=this;t.call(this),f.sm=e,f.closing=!1,f.sendQueue=l.queue(function(e,o){f.conn&&("string"!=typeof e&&(e=e.toString()),e=new n(e,"utf8").toString(),f.emit("raw:outgoing",e),f.conn.readyState===y&&f.conn.send(e)),o()},1),f.on("connected",function(){f.send(f.startHeader())}),f.on("raw:incoming",function(e){var n,o;if(e=e.trim(),""!==e){try{n=i.parse(e)}catch(d){return o=new p({condition:"invalid-xml"}),f.emit("stream:error",o,d),f.send(o),f.disconnect()}if("openStream"===n._name)return f.hasStream=!0,f.stream=n,f.emit("stream:start",n.toJSON());if("closeStream"===n._name)return f.emit("stream:end"),f.disconnect();n.lang||(n.lang=f.stream.lang),f.emit("stream:data",n)}})}var d=e("util"),i=e("jxt"),t=e("wildemitter"),l=e("async"),u=e("../stanza/framing"),p=e("../stanza/streamError"),s=e("faye-websocket")&&e("faye-websocket").Client?e("faye-websocket").Client:window.WebSocket,y=1;d.inherits(o,t),o.prototype.connect=function(e){var f=this;f.config=e,f.hasStream=!1,f.closing=!1,f.conn=new s(e.wsURL,"xmpp"),f.conn.onerror=function(e){e.preventDefault(),f.emit("disconnected",f)},f.conn.onclose=function(){f.emit("disconnected",f)},f.conn.onopen=function(){f.sm.started=!1,f.emit("connected",f)},f.conn.onmessage=function(e){f.emit("raw:incoming",new n(e.data,"utf8").toString())}},o.prototype.startHeader=function(){return new u.Open({version:this.config.version||"1.0",lang:this.config.lang||"en",to:this.config.server})},o.prototype.closeHeader=function(){return new u.Close},o.prototype.disconnect=function(){this.conn&&!this.closing?(this.closing=!0,this.send(this.closeHeader())):(this.hasStream=!1,this.stream=void 0,this.conn.readyState===y&&this.conn.close(),this.conn=void 0)},o.prototype.restart=function(){var e=this;e.hasStream=!1,e.send(this.startHeader())},o.prototype.send=function(e){this.sendQueue.push(e)},f.exports=o}).call(this,e("buffer").Buffer)},{"../stanza/framing":65,"../stanza/streamError":100,async:110,buffer:150,"faye-websocket":149,jxt:329,util:186,wildemitter:354}],109:[function(e,f){function n(e){for(var f={},n=e.split(/,(?=(?:[^"]|"[^"]*")*$)/),o=0,d=n.length;d>o;o++){var i=/(\w+)=["]?([^"]+)["]?$/.exec(n[o]);i&&(f[i[1]]=i[2])}return f}function o(){return i.randomBytes(16).toString("hex")}function d(e){e=e||{},this._genNonce=e.genNonce||o}var i=e("crypto");d.Mechanism=d,d.prototype.name="DIGEST-MD5",d.prototype.clientFirst=!1,d.prototype.response=function(e){if(this._completed)return void 0;var f=e.serviceType+"/"+e.host;e.serviceName&&e.host!==e.serviceName&&(f+="/"+e.serviceName);var n=e.realm||this._realm||"",o=this._genNonce(),d="00000001",t="auth",l="";l+='username="'+e.username+'"',n&&(l+=',realm="'+n+'"'),l+=',nonce="'+this._nonce+'"',l+=',cnonce="'+o+'"',l+=",nc="+d,l+=",qop="+t,l+=',digest-uri="'+f+'"';var u=i.createHash("md5").update(e.username).update(":").update(n).update(":").update(e.password).digest(),p=i.createHash("md5").update(u).update(":").update(this._nonce).update(":").update(o);e.authzid&&p.update(":").update(e.authzid),p=p.digest("hex");var s=i.createHash("md5").update("AUTHENTICATE:").update(f);("auth-int"===t||"auth-conf"===t)&&s.update(":00000000000000000000000000000000"),s=s.digest("hex");var y=i.createHash("md5").update(p).update(":").update(this._nonce).update(":").update(d).update(":").update(o).update(":").update(t).update(":").update(s).digest("hex");return l+=",response="+y,"utf-8"===this._charset&&(l+=",charset=utf-8"),e.authzid&&(l+='authzid="'+e.authzid+'"'),l},d.prototype.challenge=function(e){var f=n(e);return this._completed=!!f.rspauth,this._realm=f.realm,this._nonce=f.nonce,this._qop=(f.qop||"auth").split(","),this._stale=f.stale,this._maxbuf=parseInt(f.maxbuf)||65536,this._charset=f.charset,this._algo=f.algorithm,this._cipher=f.cipher,this._cipher&&this._cipher.split(","),this},f.exports=d},{crypto:157}],110:[function(e,f){(function(e){!function(){function n(e){var f=!1;return function(){if(f)throw new Error("Callback was already called.");f=!0,e.apply(o,arguments)}}var o,d,i={};o=this,null!=o&&(d=o.async),i.noConflict=function(){return o.async=d,i};var t=Object.prototype.toString,l=Array.isArray||function(e){return"[object Array]"===t.call(e)},u=function(e,f){if(e.forEach)return e.forEach(f);for(var n=0;n<e.length;n+=1)f(e[n],n,e)},p=function(e,f){if(e.map)return e.map(f);var n=[];return u(e,function(e,o,d){n.push(f(e,o,d))}),n},s=function(e,f,n){return e.reduce?e.reduce(f,n):(u(e,function(e,o,d){n=f(n,e,o,d)}),n)},y=function(e){if(Object.keys)return Object.keys(e);var f=[];for(var n in e)e.hasOwnProperty(n)&&f.push(n);return f};"undefined"!=typeof e&&e.nextTick?(i.nextTick=e.nextTick,i.setImmediate="undefined"!=typeof setImmediate?function(e){setImmediate(e)}:i.nextTick):"function"==typeof setImmediate?(i.nextTick=function(e){setImmediate(e)},i.setImmediate=i.nextTick):(i.nextTick=function(e){setTimeout(e,0)},i.setImmediate=i.nextTick),i.each=function(e,f,o){function d(f){f?(o(f),o=function(){}):(i+=1,i>=e.length&&o())}if(o=o||function(){},!e.length)return o();var i=0;u(e,function(e){f(e,n(d))})},i.forEach=i.each,i.eachSeries=function(e,f,n){if(n=n||function(){},!e.length)return n();var o=0,d=function(){f(e[o],function(f){f?(n(f),n=function(){}):(o+=1,o>=e.length?n():d())})};d()},i.forEachSeries=i.eachSeries,i.eachLimit=function(e,f,n,o){var d=c(f);d.apply(null,[e,n,o])},i.forEachLimit=i.eachLimit;var c=function(e){return function(f,n,o){if(o=o||function(){},!f.length||0>=e)return o();var d=0,i=0,t=0;!function l(){if(d>=f.length)return o();for(;e>t&&i<f.length;)i+=1,t+=1,n(f[i-1],function(e){e?(o(e),o=function(){}):(d+=1,t-=1,d>=f.length?o():l())})}()}},a=function(e){return function(){var f=Array.prototype.slice.call(arguments);return e.apply(null,[i.each].concat(f))}},r=function(e,f){return function(){var n=Array.prototype.slice.call(arguments);return f.apply(null,[c(e)].concat(n))}},w=function(e){return function(){var f=Array.prototype.slice.call(arguments);return e.apply(null,[i.eachSeries].concat(f))}},b=function(e,f,n,o){if(f=p(f,function(e,f){return{index:f,value:e}}),o){var d=[];e(f,function(e,f){n(e.value,function(n,o){d[e.index]=o,f(n)})},function(e){o(e,d)})}else e(f,function(e,f){n(e.value,function(e){f(e)})})};i.map=a(b),i.mapSeries=w(b),i.mapLimit=function(e,f,n,o){return m(f)(e,n,o)};var m=function(e){return r(e,b)};i.reduce=function(e,f,n,o){i.eachSeries(e,function(e,o){n(f,e,function(e,n){f=n,o(e)})},function(e){o(e,f)})},i.inject=i.reduce,i.foldl=i.reduce,i.reduceRight=function(e,f,n,o){var d=p(e,function(e){return e}).reverse();i.reduce(d,f,n,o)},i.foldr=i.reduceRight;var g=function(e,f,n,o){var d=[];f=p(f,function(e,f){return{index:f,value:e}}),e(f,function(e,f){n(e.value,function(n){n&&d.push(e),f()})},function(){o(p(d.sort(function(e,f){return e.index-f.index}),function(e){return e.value}))})};i.filter=a(g),i.filterSeries=w(g),i.select=i.filter,i.selectSeries=i.filterSeries;var x=function(e,f,n,o){var d=[];f=p(f,function(e,f){return{index:f,value:e}}),e(f,function(e,f){n(e.value,function(n){n||d.push(e),f()})},function(){o(p(d.sort(function(e,f){return e.index-f.index}),function(e){return e.value}))})};i.reject=a(x),i.rejectSeries=w(x);var P=function(e,f,n,o){e(f,function(e,f){n(e,function(n){n?(o(e),o=function(){}):f()})},function(){o()})};i.detect=a(P),i.detectSeries=w(P),i.some=function(e,f,n){i.each(e,function(e,o){f(e,function(e){e&&(n(!0),n=function(){}),o()})},function(){n(!1)})},i.any=i.some,i.every=function(e,f,n){i.each(e,function(e,o){f(e,function(e){e||(n(!1),n=function(){}),o()})},function(){n(!0)})},i.all=i.every,i.sortBy=function(e,f,n){i.map(e,function(e,n){f(e,function(f,o){f?n(f):n(null,{value:e,criteria:o})})},function(e,f){if(e)return n(e);var o=function(e,f){var n=e.criteria,o=f.criteria;return o>n?-1:n>o?1:0};n(null,p(f.sort(o),function(e){return e.value}))})},i.auto=function(e,f){f=f||function(){};var n=y(e),o=n.length;if(!o)return f();var d={},t=[],p=function(e){t.unshift(e)},c=function(e){for(var f=0;f<t.length;f+=1)if(t[f]===e)return void t.splice(f,1)},a=function(){o--,u(t.slice(0),function(e){e()})};p(function(){if(!o){var e=f;f=function(){},e(null,d)}}),u(n,function(n){var o=l(e[n])?e[n]:[e[n]],t=function(e){var o=Array.prototype.slice.call(arguments,1);if(o.length<=1&&(o=o[0]),e){var t={};u(y(d),function(e){t[e]=d[e]}),t[n]=o,f(e,t),f=function(){}}else d[n]=o,i.setImmediate(a)},r=o.slice(0,Math.abs(o.length-1))||[],w=function(){return s(r,function(e,f){return e&&d.hasOwnProperty(f)},!0)&&!d.hasOwnProperty(n)};if(w())o[o.length-1](t,d);else{var b=function(){w()&&(c(b),o[o.length-1](t,d))};p(b)}})},i.retry=function(e,f,n){var o=5,d=[];"function"==typeof e&&(n=f,f=e,e=o),e=parseInt(e,10)||o;var t=function(o,t){for(var l=function(e,f){return function(n){e(function(e,o){n(!e||f,{err:e,result:o})},t)}};e;)d.push(l(f,!(e-=1)));i.series(d,function(e,f){f=f[f.length-1],(o||n)(f.err,f.result)})};return n?t():t},i.waterfall=function(e,f){if(f=f||function(){},!l(e)){var n=new Error("First argument to waterfall must be an array of functions");return f(n)}if(!e.length)return f();var o=function(e){return function(n){if(n)f.apply(null,arguments),f=function(){};else{var d=Array.prototype.slice.call(arguments,1),t=e.next();d.push(t?o(t):f),i.setImmediate(function(){e.apply(null,d)})}}};o(i.iterator(e))()};var j=function(e,f,n){if(n=n||function(){},l(f))e.map(f,function(e,f){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),f.call(null,e,n)})},n);else{var o={};e.each(y(f),function(e,n){f[e](function(f){var d=Array.prototype.slice.call(arguments,1);d.length<=1&&(d=d[0]),o[e]=d,n(f)})},function(e){n(e,o)})}};i.parallel=function(e,f){j({map:i.map,each:i.each},e,f)},i.parallelLimit=function(e,f,n){j({map:m(f),each:c(f)},e,n)},i.series=function(e,f){if(f=f||function(){},l(e))i.mapSeries(e,function(e,f){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),f.call(null,e,n)})},f);else{var n={};i.eachSeries(y(e),function(f,o){e[f](function(e){var d=Array.prototype.slice.call(arguments,1);d.length<=1&&(d=d[0]),n[f]=d,o(e)})},function(e){f(e,n)})}},i.iterator=function(e){var f=function(n){var o=function(){return e.length&&e[n].apply(null,arguments),o.next()};return o.next=function(){return n<e.length-1?f(n+1):null},o};return f(0)},i.apply=function(e){var f=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,f.concat(Array.prototype.slice.call(arguments)))}};var v=function(e,f,n,o){var d=[];e(f,function(e,f){n(e,function(e,n){d=d.concat(n||[]),f(e)})},function(e){o(e,d)})};i.concat=a(v),i.concatSeries=w(v),i.whilst=function(e,f,n){e()?f(function(o){return o?n(o):void i.whilst(e,f,n)}):n()},i.doWhilst=function(e,f,n){e(function(o){if(o)return n(o);var d=Array.prototype.slice.call(arguments,1);f.apply(null,d)?i.doWhilst(e,f,n):n()})},i.until=function(e,f,n){e()?n():f(function(o){return o?n(o):void i.until(e,f,n)})},i.doUntil=function(e,f,n){e(function(o){if(o)return n(o);var d=Array.prototype.slice.call(arguments,1);f.apply(null,d)?n():i.doUntil(e,f,n)})},i.queue=function(e,f){function o(e,f,n,o){return e.started||(e.started=!0),l(f)||(f=[f]),0==f.length?i.setImmediate(function(){e.drain&&e.drain()}):void u(f,function(f){var d={data:f,callback:"function"==typeof o?o:null};n?e.tasks.unshift(d):e.tasks.push(d),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),i.setImmediate(e.process)})}void 0===f&&(f=1);var d=0,t={tasks:[],concurrency:f,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,f){o(t,e,!1,f)},kill:function(){t.drain=null,t.tasks=[]},unshift:function(e,f){o(t,e,!0,f)},process:function(){if(!t.paused&&d<t.concurrency&&t.tasks.length){var f=t.tasks.shift();t.empty&&0===t.tasks.length&&t.empty(),d+=1;var o=function(){d-=1,f.callback&&f.callback.apply(f,arguments),t.drain&&t.tasks.length+d===0&&t.drain(),t.process()},i=n(o);e(f.data,i)}},length:function(){return t.tasks.length},running:function(){return d},idle:function(){return t.tasks.length+d===0},pause:function(){t.paused!==!0&&(t.paused=!0,t.process())},resume:function(){t.paused!==!1&&(t.paused=!1,t.process())}};return t},i.priorityQueue=function(e,f){function n(e,f){return e.priority-f.priority}function o(e,f,n){for(var o=-1,d=e.length-1;d>o;){var i=o+(d-o+1>>>1);n(f,e[i])>=0?o=i:d=i-1}return o}function d(e,f,d,t){return e.started||(e.started=!0),l(f)||(f=[f]),0==f.length?i.setImmediate(function(){e.drain&&e.drain()}):void u(f,function(f){var l={data:f,priority:d,callback:"function"==typeof t?t:null};e.tasks.splice(o(e.tasks,l,n)+1,0,l),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),i.setImmediate(e.process)})}var t=i.queue(e,f);return t.push=function(e,f,n){d(t,e,f,n)},delete t.unshift,t},i.cargo=function(e,f){var n=!1,o=[],d={tasks:o,payload:f,saturated:null,empty:null,drain:null,drained:!0,push:function(e,n){l(e)||(e=[e]),u(e,function(e){o.push({data:e,callback:"function"==typeof n?n:null}),d.drained=!1,d.saturated&&o.length===f&&d.saturated()}),i.setImmediate(d.process)},process:function t(){if(!n){if(0===o.length)return d.drain&&!d.drained&&d.drain(),void(d.drained=!0);var i="number"==typeof f?o.splice(0,f):o.splice(0,o.length),l=p(i,function(e){return e.data});d.empty&&d.empty(),n=!0,e(l,function(){n=!1;var e=arguments;u(i,function(f){f.callback&&f.callback.apply(null,e)}),t()})}},length:function(){return o.length},running:function(){return n}};return d};var M=function(e){return function(f){var n=Array.prototype.slice.call(arguments,1);f.apply(null,n.concat([function(f){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(f?console.error&&console.error(f):console[e]&&u(n,function(f){console[e](f)}))}]))}};i.log=M("log"),i.dir=M("dir"),i.memoize=function(e,f){var n={},o={};f=f||function(e){return e};var d=function(){var d=Array.prototype.slice.call(arguments),t=d.pop(),l=f.apply(null,d);l in n?i.nextTick(function(){t.apply(null,n[l])}):l in o?o[l].push(t):(o[l]=[t],e.apply(null,d.concat([function(){n[l]=arguments;var e=o[l];delete o[l];for(var f=0,d=e.length;d>f;f++)e[f].apply(null,arguments)}])))};return d.memo=n,d.unmemoized=e,d},i.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},i.times=function(e,f,n){for(var o=[],d=0;e>d;d++)o.push(d);return i.map(o,f,n)},i.timesSeries=function(e,f,n){for(var o=[],d=0;e>d;d++)o.push(d);return i.mapSeries(o,f,n)},i.seq=function(){var e=arguments;return function(){var f=this,n=Array.prototype.slice.call(arguments),o=n.pop();i.reduce(e,n,function(e,n,o){n.apply(f,e.concat([function(){var e=arguments[0],f=Array.prototype.slice.call(arguments,1);o(e,f)}]))},function(e,n){o.apply(f,[e].concat(n))})}},i.compose=function(){return i.seq.apply(null,Array.prototype.reverse.call(arguments))};var X=function(e,f){var n=function(){var n=this,o=Array.prototype.slice.call(arguments),d=o.pop();return e(f,function(e,f){e.apply(n,o.concat([f]))},d)};if(arguments.length>2){var o=Array.prototype.slice.call(arguments,2);return n.apply(this,o)}return n};i.applyEach=a(X),i.applyEachSeries=w(X),i.forever=function(e,f){function n(o){if(o){if(f)return f(o);throw o}e(n)}n()},"undefined"!=typeof f&&f.exports?f.exports=i:"undefined"!=typeof define&&define.amd?define([],function(){return i}):o.async=i}()}).call(this,e("FWaASH"))},{FWaASH:169}],111:[function(e,f){(function(e){!function(){"use strict";function n(f){return new e(f,"base64").toString("binary")}f.exports=n}()}).call(this,e("buffer").Buffer)},{buffer:150}],112:[function(e,f){"use strict";f.exports=function(e){function f(e){var f=new n(e),o=f.promise();return o.isRejected()?o:(f.setHowMany(1),f.setUnwrap(),f.init(),o)}var n=e._SomePromiseArray;e.any=function(e){return f(e)},e.prototype.any=function(){return f(this)}}},{}],113:[function(e,f){(function(n){"use strict";function o(){this._isTickUsed=!1,this._schedule=d,this._length=0,this._lateBuffer=new i(16),this._functionBuffer=new i(65536);var e=this;this.consumeFunctionBuffer=function(){e._consumeFunctionBuffer()}}var d=e("./schedule.js"),i=e("./queue.js"),t=e("./util.js").errorObj,l=e("./util.js").tryCatch1,u="undefined"!=typeof n?n:void 0;o.prototype.haveItemsQueued=function(){return this._length>0},o.prototype.invokeLater=function(e,f,n){void 0===u||null==u.domain||e.domain||(e=u.domain.bind(e)),this._lateBuffer.push(e,f,n),this._queueTick()},o.prototype.invoke=function(e,f,n){void 0===u||null==u.domain||e.domain||(e=u.domain.bind(e));var o=this._functionBuffer;o.push(e,f,n),this._length=o.length(),this._queueTick()},o.prototype._consumeFunctionBuffer=function(){for(var e=this._functionBuffer;e.length()>0;){var f=e.shift(),n=e.shift(),o=e.shift();f.call(n,o)}this._reset(),this._consumeLateBuffer()},o.prototype._consumeLateBuffer=function(){for(var e=this._lateBuffer;e.length()>0;){var f=e.shift(),n=e.shift(),o=e.shift(),d=l(f,n,o);if(d===t){if(this._queueTick(),null==f.domain)throw d.e;f.domain.emit("error",d.e)}}},o.prototype._queueTick=function(){this._isTickUsed||(this._schedule(this.consumeFunctionBuffer),this._isTickUsed=!0)},o.prototype._reset=function(){this._isTickUsed=!1,this._length=0},f.exports=new o}).call(this,e("FWaASH"))},{"./queue.js":136,"./schedule.js":139,"./util.js":146,FWaASH:169}],114:[function(e,f){"use strict";var n=e("./promise.js")();f.exports=n},{"./promise.js":131}],115:[function(e,f){"use strict";var n=Object.create;if(n){var o=n(null),d=n(null);o[" size"]=d[" size"]=0}f.exports=function(f){function n(e){return new Function("obj","                                             \n        'use strict'                                                         \n        var len = this.length;                                               \n        switch(len) {                                                        \n            case 1: return obj.methodName(this[0]);                          \n            case 2: return obj.methodName(this[0], this[1]);                 \n            case 3: return obj.methodName(this[0], this[1], this[2]);        \n            case 0: return obj.methodName();                                 \n            default: return obj.methodName.apply(obj, this);                 \n        }                                                                    \n        ".replace(/methodName/g,e))}function i(e){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",e))}function t(e,f,n){var o=n[e];if("function"!=typeof o){if(!r(e))return null;if(o=f(e),n[e]=o,n[" size"]++,n[" size"]>512){for(var d=Object.keys(n),i=0;256>i;++i)delete n[d[i]];n[" size"]=d.length-256}}return o}function l(e){return t(e,n,o)}function u(e){return t(e,i,d)}function p(e){return e[this.pop()].apply(e,this)}function s(e){return e[this]}function y(e){return e[this]}var c=e("./util.js"),a=c.canEvaluate,r=c.isIdentifier;f.prototype.call=function(e){for(var f=arguments.length,n=new Array(f-1),o=1;f>o;++o)n[o-1]=arguments[o];if(a){var d=l(e);if(null!==d)return this._then(d,void 0,void 0,n,void 0)}return n.push(e),this._then(p,void 0,void 0,n,void 0)},f.prototype.get=function(e){var f,n="number"==typeof e;if(n)f=y;else if(a){var o=u(e);f=null!==o?o:s}else f=s;return this._then(f,void 0,void 0,e,void 0)}}},{"./util.js":146}],116:[function(e,f){"use strict";f.exports=function(f,n){var o=e("./errors.js"),d=o.canAttach,i=e("./async.js"),t=o.CancellationError;f.prototype._cancel=function(e){if(!this.isCancellable())return this;for(var f,n=this;void 0!==(f=n._cancellationParent)&&f.isCancellable();)n=f;this._unsetCancellable(),n._attachExtraTrace(e),n._rejectUnchecked(e)},f.prototype.cancel=function(e){return this.isCancellable()?(e=void 0!==e?d(e)?e:new Error(e+""):new t,i.invokeLater(this._cancel,this,e),this):this},f.prototype.cancellable=function(){return this._cancellable()?this:(this._setCancellable(),this._cancellationParent=void 0,this)},f.prototype.uncancellable=function(){var e=new f(n);return e._propagateFrom(this,6),e._follow(this),e._unsetCancellable(),e},f.prototype.fork=function(e,f,n){var o=this._then(e,f,n,void 0,void 0);return o._setCancellable(),o._cancellationParent=void 0,o}}},{"./async.js":113,"./errors.js":121}],117:[function(e,f){"use strict";f.exports=function(){function f(e){var f;if("function"==typeof e)f="[function "+(e.name||"anonymous")+"]";else{f=e.toString();var o=/\[object [a-zA-Z0-9$_]+\]/;if(o.test(f))try{var d=JSON.stringify(e);f=d}catch(i){}0===f.length&&(f="(empty array)")}return"(<"+n(f)+">, no stack trace)"}function n(e){var f=41;return e.length<f?e:e.substr(0,f-3)+"..."}function o(e,f){this.captureStackTrace(o,f)}var d=e("./util.js").inherits,i=e("./es5.js").defineProperty,t=new RegExp("\\b(?:[a-zA-Z0-9.]+\\$_\\w+|tryCatch(?:1|2|3|4|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b"),l=null,u=null;d(o,Error),o.prototype.captureStackTrace=function(e,f){p(this,e,f)},o.possiblyUnhandledRejection=function(e){if("object"==typeof console){var f;if("object"==typeof e||"function"==typeof e){var n=e.stack;f="Possibly unhandled "+u(n,e)}else f="Possibly unhandled "+String(e);"function"==typeof console.error||"object"==typeof console.error?console.error(f):("function"==typeof console.log||"object"==typeof console.log)&&console.log(f)}},o.combine=function(e,f){for(var n=e.length-1,o=e[n],d=-1,i=f.length-1;i>=0;--i)if(f[i]===o){d=i;break}for(var i=d;i>=0;--i){var u=f[i];if(e[n]!==u)break;e.pop(),n--}e.push("From previous event:");for(var p=e.concat(f),s=[],i=0,y=p.length;y>i;++i)t.test(p[i])&&l.test(p[i])||i>0&&!l.test(p[i])&&"From previous event:"!==p[i]||s.push(p[i]);return s},o.protectErrorMessageNewlines=function(e){for(var f=0;f<e.length&&!l.test(e[f]);++f);if(!(1>=f)){for(var n=[],o=0;f>o;++o)n.push(e.shift());e.unshift(n.join("\x00"))}},o.isSupported=function(){return"function"==typeof p};var p=function s(){if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){l=/^\s*at\s*/,u=function(e,n){return"string"==typeof e?e:void 0!==n.name&&void 0!==n.message?n.name+". "+n.message:f(n)};var e=Error.captureStackTrace;return function(f,n){e(f,n)}}var n=new Error;if("string"==typeof n.stack&&"function"==typeof"".startsWith&&n.stack.startsWith("stackDetection@")&&"stackDetection"===s.name){i(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),l=/@/;var o=/[@\n]/;return u=function(e,n){return"string"==typeof e?n.name+". "+n.message+"\n"+e:void 0!==n.name&&void 0!==n.message?n.name+". "+n.message:f(n)},function(e){for(var f=(new Error).stack,n=f.split(o),d=n.length,i="",t=0;d>t;t+=2)i+=n[t],i+="@",i+=n[t+1],i+="\n";e.stack=i}}return u=function(e,n){return"string"==typeof e?e:"object"!=typeof n&&"function"!=typeof n||void 0===n.name||void 0===n.message?f(n):n.name+". "+n.message},null}();return o}},{"./es5.js":123,"./util.js":146}],118:[function(e,f){"use strict";f.exports=function(f){function n(e,f,n){this._instances=e,this._callback=f,this._promise=n}function o(e,f){var n={},o=t(e,n,f);if(o===l)return o;var d=u(n);return d.length?(l.e=new p("Catch filter must inherit from Error or be a simple predicate function"),l):o}var d=e("./util.js"),i=e("./errors.js"),t=d.tryCatch1,l=d.errorObj,u=e("./es5.js").keys,p=i.TypeError;return n.prototype.doFilter=function(e){for(var n=this._callback,d=this._promise,u=d._boundTo,p=0,s=this._instances.length;s>p;++p){var y=this._instances[p],c=y===Error||null!=y&&y.prototype instanceof Error;if(c&&e instanceof y){var a=t(n,u,e);return a===l?(f.e=a.e,f):a}if("function"==typeof y&&!c){var r=o(y,e);if(r===l){var w=i.canAttach(l.e)?l.e:new Error(l.e+"");this._promise._attachExtraTrace(w),e=l.e;break}if(r){var a=t(n,u,e);return a===l?(f.e=a.e,f):a}}}return f.e=e,f},n}},{"./errors.js":121,"./es5.js":123,"./util.js":146}],119:[function(e,f){"use strict";var n=e("./util.js"),o=n.isPrimitive,d=n.wrapsPrimitiveReceiver;f.exports=function(e){var f=function(){return this},n=function(){throw this},i=function(e,f){return 1===f?function(){throw e}:2===f?function(){return e}:void 0};e.prototype["return"]=e.prototype.thenReturn=function(e){return d&&o(e)?this._then(i(e,2),void 0,void 0,void 0,void 0):this._then(f,void 0,void 0,e,void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return d&&o(e)?this._then(i(e,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,e,void 0)}}},{"./util.js":146}],120:[function(e,f){"use strict";f.exports=function(e,f){var n=e.reduce;e.prototype.each=function(e){return n(this,e,null,f)},e.each=function(e,o){return n(e,o,null,f)}}},{}],121:[function(e,f){"use strict";function n(e){try{a(e,"isOperational",!0)}catch(f){}}function o(e){return null==e?!1:e instanceof l||e.isOperational===!0}function d(e){return e instanceof Error}function i(e){return d(e)}function t(e,f){function n(o){return this instanceof n?(this.message="string"==typeof o?o:f,this.name=e,void(Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new n(o)}return c(n,Error),n}function l(e){this.name="OperationalError",this.message=e,this.cause=e,this.isOperational=!0,e instanceof Error?(this.message=e.message,this.stack=e.stack):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var u,p,s=e("./es5.js").freeze,y=e("./util.js"),c=y.inherits,a=y.notEnumerableProp,r=t("CancellationError","cancellation error"),w=t("TimeoutError","timeout error"),b=t("AggregateError","aggregate error");try{u=TypeError,p=RangeError}catch(m){u=t("TypeError","type error"),p=t("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),x=0;x<g.length;++x)"function"==typeof Array.prototype[g[x]]&&(b.prototype[g[x]]=Array.prototype[g[x]]);b.prototype.length=0,b.prototype.isOperational=!0;var P=0;b.prototype.toString=function(){var e=Array(4*P+1).join(" "),f="\n"+e+"AggregateError of:\n";P++,e=Array(4*P+1).join(" ");for(var n=0;n<this.length;++n){for(var o=this[n]===this?"[Circular AggregateError]":this[n]+"",d=o.split("\n"),i=0;i<d.length;++i)d[i]=e+d[i];o=d.join("\n"),f+=o+"\n"}return P--,f},c(l,Error);var j="__BluebirdErrorTypes__",v=Error[j];v||(v=s({CancellationError:r,TimeoutError:w,OperationalError:l,RejectionError:l,AggregateError:b}),a(Error,j,v)),f.exports={Error:Error,TypeError:u,RangeError:p,CancellationError:v.CancellationError,OperationalError:v.OperationalError,TimeoutError:v.TimeoutError,AggregateError:v.AggregateError,originatesFromRejection:o,markAsOriginatingFromRejection:n,canAttach:i}
},{"./es5.js":123,"./util.js":146}],122:[function(e,f){"use strict";f.exports=function(f){function n(e){var n=new o(e),d=f.rejected(n),i=d._peekContext();return null!=i&&i._attachExtraTrace(n),d}var o=e("./errors.js").TypeError;return n}},{"./errors.js":121}],123:[function(e,f){var n=function(){"use strict";return void 0===this}();if(n)f.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n};else{var o={}.hasOwnProperty,d={}.toString,i={}.constructor.prototype,t=function(e){var f=[];for(var n in e)o.call(e,n)&&f.push(n);return f},l=function(e,f,n){return e[f]=n.value,e},u=function(e){return e},p=function(e){try{return Object(e).constructor.prototype}catch(f){return i}},s=function(e){try{return"[object Array]"===d.call(e)}catch(f){return!1}};f.exports={isArray:s,keys:t,defineProperty:l,freeze:u,getPrototypeOf:p,isES5:n}}},{}],124:[function(e,f){"use strict";f.exports=function(e,f){var n=e.map;e.prototype.filter=function(e,o){return n(this,e,o,f)},e.filter=function(e,o,d){return n(e,o,d,f)}}},{}],125:[function(e,f){"use strict";f.exports=function(f,n,o){function d(){return this}function i(){throw this}function t(e){return function(){return e}}function l(e){return function(){throw e}}function u(e,f,n){var o;return o=c&&a(f)?n?t(f):l(f):n?d:i,e._then(o,r,void 0,f,void 0)}function p(e){var d=this.promise,i=this.handler,t=d._isBound()?i.call(d._boundTo):i();if(void 0!==t){var l=o(t,void 0);if(l instanceof f)return u(l,e,d.isFulfilled())}return d.isRejected()?(n.e=e,n):e}function s(e){var n=this.promise,d=this.handler,i=n._isBound()?d.call(n._boundTo,e):d(e);if(void 0!==i){var t=o(i,void 0);if(t instanceof f)return u(t,e,!0)}return e}var y=e("./util.js"),c=y.wrapsPrimitiveReceiver,a=y.isPrimitive,r=y.thrower;f.prototype._passThroughHandler=function(e,f){if("function"!=typeof e)return this.then();var n={promise:this,handler:e};return this._then(f?p:s,f?p:void 0,void 0,n,void 0)},f.prototype.lastly=f.prototype["finally"]=function(e){return this._passThroughHandler(e,!0)},f.prototype.tap=function(e){return this._passThroughHandler(e,!1)}}},{"./util.js":146}],126:[function(e,f){"use strict";f.exports=function(f,n,o,d){function i(e,n){for(var o=y,t=f,l=n.length,u=0;l>u;++u){var p=c(n[u],void 0,e);if(p===o)return t.reject(o.e);var s=d(p,i);if(s instanceof t)return s}return null}function t(e,n,d){var i=this._promise=new f(o);i._setTrace(void 0),this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof d?[d].concat(a):a}var l=e("./errors.js"),u=l.TypeError,p=e("./util.js").deprecated,s=e("./util.js"),y=s.errorObj,c=s.tryCatch1,a=[];t.prototype.promise=function(){return this._promise},t.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},t.prototype._continue=function(e){if(e===y){this._generator=void 0;var n=l.canAttach(e.e)?e.e:new Error(e.e+"");return this._promise._attachExtraTrace(n),void this._promise._reject(e.e,n)}var o=e.value;if(e.done===!0)this._generator=void 0,this._promise._tryFollow(o)||this._promise._fulfill(o);else{var t=d(o,void 0);if(!(t instanceof f)&&(t=i(t,this._yieldHandlers),null===t))return void this._throw(new u("A value was yielded that could not be treated as a promise"));t._then(this._next,this._throw,void 0,this,null)}},t.prototype._throw=function(e){l.canAttach(e)&&this._promise._attachExtraTrace(e),this._continue(c(this._generator["throw"],this._generator,e))},t.prototype._next=function(e){this._continue(c(this._generator.next,this._generator,e))},f.coroutine=function(e,f){if("function"!=typeof e)throw new u("generatorFunction must be a function");var n=Object(f).yieldHandler,o=t;return function(){var f=e.apply(this,arguments),d=new o(void 0,void 0,n);return d._generator=f,d._next(void 0),d.promise()}},f.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new u("fn must be a function");a.push(e)},f.spawn=function(e){if(p("Promise.spawn is deprecated. Use Promise.coroutine instead."),"function"!=typeof e)return n("generatorFunction must be a function");var o=new t(e,this),d=o.promise();return o._run(f.spawn),d}}},{"./errors.js":121,"./util.js":146}],127:[function(e,f){"use strict";f.exports=function(f,n,o,d){function i(e){this._reject(e)}var t=e("./util.js"),l=t.canEvaluate,u=t.tryCatch1,p=t.errorObj;if(l){for(var s=function(e){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,e))},y=function(e){for(var f=[],n=1;e>=n;++n)f.push("holder.p"+n);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,f.join(", ")))},c=[],a=[void 0],r=1;5>=r;++r)c.push(s(r)),a.push(y(r));var w=function(e,f){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=f,this.total=e,this.now=0};w.prototype.callers=a,w.prototype.checkFulfillment=function(e){var f=this.now;f++;var n=this.total;if(f>=n){var o=this.callers[n],d=u(o,void 0,this);d===p?e._rejectUnchecked(d.e):e._tryFollow(d)||e._fulfillUnchecked(d)}else this.now=f}}f.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]&&(e=arguments[t],6>t&&l)){var u=new f(d);u._setTrace(void 0);for(var p=new w(t,e),s=c,y=0;t>y;++y){var a=o(arguments[y],void 0);a instanceof f?a.isPending()?a._then(s[y],i,void 0,u,p):a.isFulfilled()?s[y].call(u,a._settledValue,p):(u._reject(a._settledValue),a._unsetRejectionIsUnhandled()):s[y].call(u,a,p)}return u}for(var r=arguments.length,b=new Array(r),m=0;r>m;++m)b[m]=arguments[m];var u=new n(b).promise();return void 0!==e?u.spread(e):u}}},{"./util.js":146}],128:[function(e,f){"use strict";f.exports=function(f,n,o,d,i){function t(e,f,n,o){this.constructor$(e),this._callback=f,this._preservedValues=o===i?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:c,this._init$(void 0,-2)}function l(e,f,n,o){var d="object"==typeof n&&null!==n?n.concurrency:0;return d="number"==typeof d&&isFinite(d)&&d>=1?d:0,new t(e,f,d,o)}var u=e("./util.js"),p=u.tryCatch3,s=u.errorObj,y={},c=[];u.inherits(t,n),t.prototype._init=function(){},t.prototype._promiseFulfilled=function(e,n){var o=this._values;if(null!==o){var i=this.length(),t=this._preservedValues,l=this._limit;if(o[n]===y){if(o[n]=e,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(l>=1&&this._inFlight>=l)return o[n]=e,void this._queue.push(n);null!==t&&(t[n]=e);var u=this._callback,c=this._promise._boundTo,a=p(u,c,e,n,i);if(a===s)return this._reject(a.e);var r=d(a,void 0);if(r instanceof f){if(r.isPending())return l>=1&&this._inFlight++,o[n]=y,r._proxyPromiseArray(this,n);if(!r.isFulfilled())return r._unsetRejectionIsUnhandled(),this._reject(r.reason());a=r.value()}o[n]=a}var w=++this._totalResolved;w>=i&&(null!==t?this._filter(o,t):this._resolve(o))}},t.prototype._drainQueue=function(){for(var e=this._queue,f=this._limit,n=this._values;e.length>0&&this._inFlight<f;){var o=e.pop();this._promiseFulfilled(n[o],o)}},t.prototype._filter=function(e,f){for(var n=f.length,o=new Array(n),d=0,i=0;n>i;++i)e[i]&&(o[d++]=f[i]);o.length=d,this._resolve(o)},t.prototype.preservedValues=function(){return this._preservedValues},f.prototype.map=function(e,f){return"function"!=typeof e?o("fn must be a function"):l(this,e,f,null).promise()},f.map=function(e,f,n,d){return"function"!=typeof f?o("fn must be a function"):l(e,f,n,d).promise()}}},{"./util.js":146}],129:[function(e,f){"use strict";f.exports=function(f){function n(e){throw e}function o(e,f){if(!t.isArray(e))return d(e,f);var o=t.tryCatchApply(this,[null].concat(e),f);o===s&&l.invokeLater(n,void 0,o.e)}function d(e,f){var o=this,d=void 0===e?p(o,f,null):u(o,f,null,e);d===s&&l.invokeLater(n,void 0,d.e)}function i(e,f){var o=this,d=p(o,f,e);d===s&&l.invokeLater(n,void 0,d.e)}var t=e("./util.js"),l=e("./async.js"),u=t.tryCatch2,p=t.tryCatch1,s=t.errorObj;f.prototype.nodeify=function(e,f){if("function"==typeof e){var n=d;void 0!==f&&Object(f).spread&&(n=o),this._then(n,i,void 0,e,this._boundTo)}return this}}},{"./async.js":113,"./util.js":146}],130:[function(e,f){"use strict";f.exports=function(f,n){var o=e("./util.js"),d=e("./async.js"),i=e("./errors.js"),t=o.tryCatch1,l=o.errorObj;f.prototype.progressed=function(e){return this._then(void 0,void 0,e,void 0,void 0)},f.prototype._progress=function(e){this._isFollowingOrFulfilledOrRejected()||this._progressUnchecked(e)},f.prototype._clearFirstHandlerData$Base=f.prototype._clearFirstHandlerData,f.prototype._clearFirstHandlerData=function(){this._clearFirstHandlerData$Base(),this._progressHandler0=void 0},f.prototype._progressHandlerAt=function(e){return 0===e?this._progressHandler0:this[(e<<2)+e-5+2]},f.prototype._doProgressWith=function(e){var n=e.value,o=e.handler,d=e.promise,u=e.receiver,p=t(o,u,n);if(p===l){if(null!=p.e&&"StopProgressPropagation"!==p.e.name){var s=i.canAttach(p.e)?p.e:new Error(p.e+"");d._attachExtraTrace(s),d._progress(p.e)}}else p instanceof f?p._then(d._progress,null,null,d,void 0):d._progress(p)},f.prototype._progressUnchecked=function(e){if(this.isPending())for(var o=this._length(),i=this._progress,t=0;o>t;t++){var l=this._progressHandlerAt(t),u=this._promiseAt(t);if(u instanceof f)"function"==typeof l?d.invoke(this._doProgressWith,this,{handler:l,promise:u,receiver:this._receiverAt(t),value:e}):d.invoke(i,u,e);else{var p=this._receiverAt(t);"function"==typeof l?l.call(p,e,u):p instanceof f&&p._isProxied()?p._progressUnchecked(e):p instanceof n&&p._promiseProgressed(e,u)}}}}},{"./async.js":113,"./errors.js":121,"./util.js":146}],131:[function(e,f){(function(n){"use strict";function o(e){try{Promise===e&&(Promise=d)}catch(f){}return e}var d;"undefined"!=typeof Promise&&(d=Promise),f.exports=function(){function f(e){if("function"!=typeof e)throw new M("the promise constructor requires a resolver function");if(this.constructor!==f)throw new M("the promise constructor cannot be invoked directly");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,e!==p&&this._resolveFromResolver(e)}function d(e){return e[0]}function i(){return new f.PromiseInspection(this)}var t=e("./util.js"),l=e("./async.js"),u=e("./errors.js"),p=function(){},s={},y={e:null},c=e("./thenables.js")(f,p),a=e("./promise_array.js")(f,p,c),r=e("./captured_trace.js")(),w=e("./catch_filter.js")(y),b=e("./promise_resolver.js"),m=t.isArray,g=t.errorObj,x=t.tryCatch1,P=t.tryCatch2,j=t.tryCatchApply,v=u.RangeError,M=u.TypeError,X=u.CancellationError,h=u.TimeoutError,k=u.OperationalError,q=u.originatesFromRejection,z=u.markAsOriginatingFromRejection,A=u.canAttach,B=t.thrower,C=e("./errors_api_rejection")(f),D=function(){return new M("circular promise resolution chain")};f.prototype.bind=function(e){var n=c(e,void 0),o=new f(p);if(n instanceof f){var i=n.then(function(e){o._setBoundTo(e)}),t=f.all([this,i]).then(d);o._follow(t)}else o._follow(this),o._setBoundTo(e);return o._propagateFrom(this,3),o},f.prototype.toString=function(){return"[object Promise]"},f.prototype.caught=f.prototype["catch"]=function(e){var n=arguments.length;if(n>1){var o,d=new Array(n-1),i=0;for(o=0;n-1>o;++o){var t=arguments[o];if("function"!=typeof t){var l=new M("A catch filter must be an error constructor or a filter function");return this._attachExtraTrace(l),f.reject(l)}d[i++]=t}d.length=i,e=arguments[o],this._resetTrace();var u=new w(d,e,this);return this._then(void 0,u.doFilter,void 0,u,void 0)}return this._then(void 0,e,void 0,void 0,void 0)},f.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},f.prototype.then=function(e,f,n){return this._then(e,f,n,void 0,void 0)},f.prototype.done=function(e,f,n){var o=this._then(e,f,n,void 0,void 0);o._setIsFinal()},f.prototype.spread=function(e,f){return this._then(e,f,void 0,s,void 0)},f.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},f.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this._settledValue,e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this._settledValue,e.isRejected=!0),e},f.prototype.all=function(){return new a(this).promise()},f.is=function(e){return e instanceof f},f.all=function(e){return new a(e).promise()},f.prototype.error=function(e){return this.caught(q,e)},f.prototype._resolveFromSyncValue=function(e){if(e===g){this._cleanValues(),this._setRejected();var n=e.e;this._settledValue=n,this._tryAttachExtraTrace(n),this._ensurePossibleRejectionHandled()}else{var o=c(e,void 0);o instanceof f?this._follow(o):(this._cleanValues(),this._setFulfilled(),this._settledValue=e)}},f.method=function(e){if("function"!=typeof e)throw new M("fn must be a function");return function(){var n;switch(arguments.length){case 0:n=x(e,this,void 0);break;case 1:n=x(e,this,arguments[0]);break;case 2:n=P(e,this,arguments[0],arguments[1]);break;default:for(var o=arguments.length,d=new Array(o),i=0;o>i;++i)d[i]=arguments[i];n=j(e,d,this)}var t=new f(p);return t._setTrace(void 0),t._resolveFromSyncValue(n),t}},f.attempt=f["try"]=function(e,n,o){if("function"!=typeof e)return C("fn must be a function");var d=m(n)?j(e,n,o):x(e,o,n),i=new f(p);return i._setTrace(void 0),i._resolveFromSyncValue(d),i},f.defer=f.pending=function(){var e=new f(p);return e._setTrace(void 0),new b(e)},f.bind=function(e){var n=c(e,void 0),o=new f(p);if(o._setTrace(void 0),n instanceof f){var d=n.then(function(e){o._setBoundTo(e)});o._follow(d)}else o._setBoundTo(e),o._setFulfilled();return o},f.cast=function(e){var n=c(e,void 0);if(!(n instanceof f)){var o=n;n=new f(p),n._setTrace(void 0),n._setFulfilled(),n._cleanValues(),n._settledValue=o}return n},f.resolve=f.fulfilled=f.cast,f.reject=f.rejected=function(e){var n=new f(p);if(n._setTrace(void 0),z(e),n._cleanValues(),n._setRejected(),n._settledValue=e,!A(e)){var o=new Error(e+"");n._setCarriedStackTrace(o)}return n._ensurePossibleRejectionHandled(),n},f.onPossiblyUnhandledRejection=function(e){r.possiblyUnhandledRejection="function"==typeof e?e:void 0};var E;f.onUnhandledRejectionHandled=function(e){E="function"==typeof e?e:void 0};var F=!1||!("undefined"==typeof n||"string"!=typeof n.execPath||"object"!=typeof n.env||!n.env.BLUEBIRD_DEBUG&&"development"!==n.env.NODE_ENV);f.longStackTraces=function(){if(l.haveItemsQueued()&&F===!1)throw new Error("cannot enable long stack traces after promises have been created");F=r.isSupported()},f.hasLongStackTraces=function(){return F&&r.isSupported()},f.prototype._then=function(e,n,o,d,i){var t=void 0!==i,u=t?i:new f(p);if(!t){if(F){var s=this._peekContext()===this._traceParent;u._traceParent=s?this._traceParent:this}u._propagateFrom(this,7)}var y=this._addCallbacks(e,n,o,u,d);return this.isResolved()&&l.invoke(this._queueSettleAt,this,y),u},f.prototype._length=function(){return 262143&this._bitField},f.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},f.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},f.prototype._setLength=function(e){this._bitField=-262144&this._bitField|262143&e},f.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},f.prototype._setRejected=function(){this._bitField=134217728|this._bitField},f.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},f.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},f.prototype._isFinal=function(){return(33554432&this._bitField)>0},f.prototype._cancellable=function(){return(67108864&this._bitField)>0},f.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},f.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},f.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},f.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},f.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},f.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},f.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},f.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},f.prototype._setCarriedStackTrace=function(e){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=e},f.prototype._unsetCarriedStackTrace=function(){this._bitField=-1048577&this._bitField,this._fulfillmentHandler0=void 0},f.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},f.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},f.prototype._receiverAt=function(e){var f=0===e?this._receiver0:this[(e<<2)+e-5+4];return this._isBound()&&void 0===f?this._boundTo:f},f.prototype._promiseAt=function(e){return 0===e?this._promise0:this[(e<<2)+e-5+3]},f.prototype._fulfillmentHandlerAt=function(e){return 0===e?this._fulfillmentHandler0:this[(e<<2)+e-5+0]},f.prototype._rejectionHandlerAt=function(e){return 0===e?this._rejectionHandler0:this[(e<<2)+e-5+1]},f.prototype._addCallbacks=function(e,f,n,o,d){var i=this._length();if(i>=262138&&(i=0,this._setLength(0)),0===i)this._promise0=o,void 0!==d&&(this._receiver0=d),"function"!=typeof e||this._isCarryingStackTrace()||(this._fulfillmentHandler0=e),"function"==typeof f&&(this._rejectionHandler0=f),"function"==typeof n&&(this._progressHandler0=n);else{var t=(i<<2)+i-5;this[t+3]=o,this[t+4]=d,this[t+0]="function"==typeof e?e:void 0,this[t+1]="function"==typeof f?f:void 0,this[t+2]="function"==typeof n?n:void 0}return this._setLength(i+1),i},f.prototype._setProxyHandlers=function(e,f){var n=this._length();if(n>=262138&&(n=0,this._setLength(0)),0===n)this._promise0=f,this._receiver0=e;else{var o=(n<<2)+n-5;this[o+3]=f,this[o+4]=e,this[o+0]=this[o+1]=this[o+2]=void 0}this._setLength(n+1)},f.prototype._proxyPromiseArray=function(e,f){this._setProxyHandlers(e,f)},f.prototype._proxyPromise=function(e){e._setProxied(),this._setProxyHandlers(e,-15)},f.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=8388608|this._bitField,this._boundTo=e):this._bitField=-8388609&this._bitField},f.prototype._isBound=function(){return 8388608===(8388608&this._bitField)},f.prototype._resolveFromResolver=function(e){function f(e){o._tryFollow(e)||o._fulfill(e)}function n(e){var f=A(e)?e:new Error(e+"");o._attachExtraTrace(f),z(e),o._reject(e,f===e?void 0:f)}var o=this;this._setTrace(void 0),this._pushContext();var d=P(e,void 0,f,n);if(this._popContext(),void 0!==d&&d===g){var i=d.e,t=A(i)?i:new Error(i+"");o._reject(i,t)}},f.prototype._spreadSlowCase=function(e,f,n,o){var d=new a(n).promise(),i=d._then(function(){return e.apply(o,arguments)},void 0,void 0,s,void 0);f._follow(i)},f.prototype._callSpread=function(e,n,o){var d=this._boundTo;if(m(o))for(var i=0,t=o.length;t>i;++i)if(c(o[i],void 0)instanceof f)return void this._spreadSlowCase(e,n,o,d);return n._pushContext(),j(e,o,d)},f.prototype._callHandler=function(e,f,n,o){var d;return f!==s||this.isRejected()?(n._pushContext(),d=x(e,f,o)):d=this._callSpread(e,n,o),n._popContext(),d},f.prototype._settlePromiseFromHandler=function(e,n,o,d){if(!(d instanceof f))return void e.call(n,o,d);if(!d.isResolved()){var i=this._callHandler(e,n,d,o);if(!d._isFollowing())if(i===g||i===d||i===y){var t=i===d?D():i.e,l=A(t)?t:new Error(t+"");i!==y&&d._attachExtraTrace(l),d._rejectUnchecked(t,l)}else{var u=c(i,d);if(u instanceof f){if(u.isRejected()&&!u._isCarryingStackTrace()&&!A(u._settledValue)){var l=new Error(u._settledValue+"");d._attachExtraTrace(l),u._setCarriedStackTrace(l)}d._follow(u),d._propagateFrom(u,1)}else d._fulfillUnchecked(i)}}},f.prototype._follow=function(e){this._setFollowing(),e.isPending()?(this._propagateFrom(e,1),e._proxyPromise(this)):e.isFulfilled()?this._fulfillUnchecked(e._settledValue):this._rejectUnchecked(e._settledValue,e._getCarriedStackTrace()),e._isRejectionUnhandled()&&e._unsetRejectionIsUnhandled(),F&&null==e._traceParent&&(e._traceParent=this)},f.prototype._tryFollow=function(e){if(this._isFollowingOrFulfilledOrRejected()||e===this)return!1;var n=c(e,void 0);return n instanceof f?(this._follow(n),!0):!1},f.prototype._resetTrace=function(){F&&(this._trace=new r(void 0===this._peekContext()))},f.prototype._setTrace=function(e){if(F){var f=this._peekContext();this._traceParent=f;var n=void 0===f;this._trace=void 0!==e&&e._traceParent===f?e._trace:new r(n)}return this},f.prototype._tryAttachExtraTrace=function(e){A(e)&&this._attachExtraTrace(e)},f.prototype._attachExtraTrace=function(e){if(F){var f=this,n=e.stack;n="string"==typeof n?n.split("\n"):[],r.protectErrorMessageNewlines(n);for(var o=1,d=1;null!=f&&null!=f._trace;)n=r.combine(n,f._trace.stack.split("\n")),f=f._traceParent,d++;var i=Error.stackTraceLimit||10,t=(i+o)*d,l=n.length;l>t&&(n.length=t),l>0&&(n[0]=n[0].split("\x00").join("\n")),e.stack=n.length<=o?"(No stack trace)":n.join("\n")}},f.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},f.prototype._propagateFrom=function(e,f){(1&f)>0&&e._cancellable()&&(this._setCancellable(),this._cancellationParent=e),(4&f)>0&&this._setBoundTo(e._boundTo),(2&f)>0&&this._setTrace(e)},f.prototype._fulfill=function(e){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(e)},f.prototype._reject=function(e,f){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(e,f)},f.prototype._settlePromiseAt=function(e){var n=this.isFulfilled()?this._fulfillmentHandlerAt(e):this._rejectionHandlerAt(e),o=this._settledValue,d=this._receiverAt(e),i=this._promiseAt(e);if("function"==typeof n)this._settlePromiseFromHandler(n,d,o,i);else{var t=!1,l=this.isFulfilled();void 0!==d&&(d instanceof f&&d._isProxied()?(d._unsetProxied(),l?d._fulfillUnchecked(o):d._rejectUnchecked(o,this._getCarriedStackTrace()),t=!0):d instanceof a&&(l?d._promiseFulfilled(o,i):d._promiseRejected(o,i),t=!0)),t||(l?i._fulfill(o):i._reject(o,this._getCarriedStackTrace()))}e>=4&&this._queueGC()},f.prototype._isProxied=function(){return 4194304===(4194304&this._bitField)},f.prototype._setProxied=function(){this._bitField=4194304|this._bitField},f.prototype._unsetProxied=function(){this._bitField=-4194305&this._bitField},f.prototype._isGcQueued=function(){return-1073741824===(-1073741824&this._bitField)},f.prototype._setGcQueued=function(){this._bitField=-1073741824|this._bitField},f.prototype._unsetGcQueued=function(){this._bitField=1073741823&this._bitField},f.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),l.invokeLater(this._gc,this,void 0))},f.prototype._gc=function(){for(var e=5*this._length()-5,f=0;e>f;f++)delete this[f];this._clearFirstHandlerData(),this._setLength(0),this._unsetGcQueued()},f.prototype._clearFirstHandlerData=function(){this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0},f.prototype._queueSettleAt=function(e){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),l.invoke(this._settlePromiseAt,this,e)},f.prototype._fulfillUnchecked=function(e){if(this.isPending()){if(e===this){var f=D();return this._attachExtraTrace(f),this._rejectUnchecked(f,void 0)}this._cleanValues(),this._setFulfilled(),this._settledValue=e;var n=this._length();n>0&&l.invoke(this._settlePromises,this,n)}},f.prototype._rejectUncheckedCheckError=function(e){var f=A(e)?e:new Error(e+"");this._rejectUnchecked(e,f===e?void 0:f)},f.prototype._rejectUnchecked=function(e,f){if(this.isPending()){if(e===this){var n=D();return this._attachExtraTrace(n),this._rejectUnchecked(n)}if(this._cleanValues(),this._setRejected(),this._settledValue=e,this._isFinal())return void l.invokeLater(B,void 0,void 0===f?e:f);var o=this._length();void 0!==f&&this._setCarriedStackTrace(f),o>0?l.invoke(this._rejectPromises,this,null):this._ensurePossibleRejectionHandled()}},f.prototype._rejectPromises=function(){this._settlePromises(),this._unsetCarriedStackTrace()},f.prototype._settlePromises=function(){for(var e=this._length(),f=0;e>f;f++)this._settlePromiseAt(f)},f.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),void 0!==r.possiblyUnhandledRejection&&l.invokeLater(this._notifyUnhandledRejection,this,void 0)},f.prototype._notifyUnhandledRejectionIsHandled=function(){"function"==typeof E&&l.invokeLater(E,void 0,this)},f.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue,f=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified(),void 0!==f&&(this._unsetCarriedStackTrace(),e=f),"function"==typeof r.possiblyUnhandledRejection&&r.possiblyUnhandledRejection(e,this)}};var G=[];return f.prototype._peekContext=function(){var e=G.length-1;return e>=0?G[e]:void 0},f.prototype._pushContext=function(){F&&G.push(this)},f.prototype._popContext=function(){F&&G.pop()},f.noConflict=function(){return o(f)},f.setScheduler=function(e){if("function"!=typeof e)throw new M("fn must be a function");l._schedule=e},r.isSupported()||(f.longStackTraces=function(){},F=!1),f._makeSelfResolutionError=D,e("./finally.js")(f,y,c),e("./direct_resolve.js")(f),e("./synchronous_inspection.js")(f),e("./join.js")(f,a,c,p),f.RangeError=v,f.CancellationError=X,f.TimeoutError=h,f.TypeError=M,f.OperationalError=k,f.RejectionError=k,f.AggregateError=u.AggregateError,t.toFastProperties(f),t.toFastProperties(f.prototype),f.Promise=f,e("./timers.js")(f,p,c),e("./race.js")(f,p,c),e("./call_get.js")(f),e("./generators.js")(f,C,p,c),e("./map.js")(f,a,C,c,p),e("./nodeify.js")(f),e("./promisify.js")(f,p),e("./props.js")(f,a,c),e("./reduce.js")(f,a,C,c,p),e("./settle.js")(f,a),e("./some.js")(f,a,C),e("./progress.js")(f,a),e("./cancel.js")(f,p),e("./filter.js")(f,p),e("./any.js")(f,a),e("./each.js")(f,p),e("./using.js")(f,C,c),f.prototype=f.prototype,f}}).call(this,e("FWaASH"))},{"./any.js":112,"./async.js":113,"./call_get.js":115,"./cancel.js":116,"./captured_trace.js":117,"./catch_filter.js":118,"./direct_resolve.js":119,"./each.js":120,"./errors.js":121,"./errors_api_rejection":122,"./filter.js":124,"./finally.js":125,"./generators.js":126,"./join.js":127,"./map.js":128,"./nodeify.js":129,"./progress.js":130,"./promise_array.js":132,"./promise_resolver.js":133,"./promisify.js":134,"./props.js":135,"./race.js":137,"./reduce.js":138,"./settle.js":140,"./some.js":141,"./synchronous_inspection.js":142,"./thenables.js":143,"./timers.js":144,"./using.js":145,"./util.js":146,FWaASH:169}],132:[function(e,f){"use strict";f.exports=function(f,n,o){function d(e){switch(e){case-1:return void 0;case-2:return[];case-3:return{}}}function i(e){var o=this._promise=new f(n),d=void 0;e instanceof f&&(d=e,o._propagateFrom(d,5)),o._setTrace(d),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var t=e("./errors.js").canAttach,l=e("./util.js"),u=l.isArray;return i.prototype.length=function(){return this._length},i.prototype.promise=function(){return this._promise},i.prototype._init=function p(e,n){var i=o(this._values,void 0);if(i instanceof f){if(this._values=i,i._setBoundTo(this._promise._boundTo),!i.isFulfilled())return i.isPending()?void i._then(p,this._reject,void 0,this,n):(i._unsetRejectionIsUnhandled(),void this._reject(i._settledValue));if(i=i._settledValue,!u(i)){var t=new f.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(t)}}else if(!u(i)){var t=new f.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(t)}if(0===i.length)return void(-5===n?this._resolveEmptyArray():this._resolve(d(n)));for(var l=this.getActualLength(i.length),s=l,y=this.shouldCopyValues()?new Array(l):this._values,c=!1,a=0;l>a;++a){var r=o(i[a],void 0);r instanceof f?r.isPending()?r._proxyPromiseArray(this,a):(r._unsetRejectionIsUnhandled(),c=!0):c=!0,y[a]=r}this._values=y,this._length=s,c&&this._scanDirectValues(l)},i.prototype._settlePromiseAt=function(e){var n=this._values[e];n instanceof f?n.isFulfilled()?this._promiseFulfilled(n._settledValue,e):n.isRejected()&&this._promiseRejected(n._settledValue,e):this._promiseFulfilled(n,e)},i.prototype._scanDirectValues=function(e){for(var f=0;e>f&&!this._isResolved();++f)this._settlePromiseAt(f)},i.prototype._isResolved=function(){return null===this._values},i.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},i.prototype.__hardReject__=i.prototype._reject=function(e){this._values=null;var f=t(e)?e:new Error(e+"");this._promise._attachExtraTrace(f),this._promise._reject(e,f)},i.prototype._promiseProgressed=function(e,f){this._isResolved()||this._promise._progress({index:f,value:e})},i.prototype._promiseFulfilled=function(e,f){if(!this._isResolved()){this._values[f]=e;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)}},i.prototype._promiseRejected=function(e){this._isResolved()||(this._totalResolved++,this._reject(e))},i.prototype.shouldCopyValues=function(){return!0},i.prototype.getActualLength=function(e){return e},i}},{"./errors.js":121,"./util.js":146}],133:[function(e,f){"use strict";function n(e){return e instanceof Error&&a.getPrototypeOf(e)===Error.prototype}function o(e){var f;return f=n(e)?new s(e):e,u.markAsOriginatingFromRejection(f),f}function d(e){function f(f,n){if(null!==e){if(f){var d=o(l(f));e._attachExtraTrace(d),e._reject(d)}else if(arguments.length>2){for(var i=arguments.length,t=new Array(i-1),u=1;i>u;++u)t[u-1]=arguments[u];e._fulfill(t)}else e._fulfill(n);e=null}}return f}var i,t=e("./util.js"),l=t.maybeWrapAsError,u=e("./errors.js"),p=u.TimeoutError,s=u.OperationalError,y=e("./async.js"),c=t.haveGetters,a=e("./es5.js");if(i=c?function(e){this.promise=e}:function(e){this.promise=e,this.asCallback=d(e),this.callback=this.asCallback},c){var r={get:function(){return d(this.promise)}};a.defineProperty(i.prototype,"asCallback",r),a.defineProperty(i.prototype,"callback",r)}i._nodebackForPromise=d,i.prototype.toString=function(){return"[object PromiseResolver]"},i.prototype.resolve=i.prototype.fulfill=function(e){if(!(this instanceof i))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var f=this.promise;f._tryFollow(e)||y.invoke(f._fulfill,f,e)},i.prototype.reject=function(e){if(!(this instanceof i))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var f=this.promise;u.markAsOriginatingFromRejection(e);var n=u.canAttach(e)?e:new Error(e+"");f._attachExtraTrace(n),y.invoke(f._reject,f,e),n!==e&&y.invoke(this._setCarriedStackTrace,this,n)},i.prototype.progress=function(e){if(!(this instanceof i))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");y.invoke(this.promise._progress,this.promise,e)},i.prototype.cancel=function(){y.invoke(this.promise.cancel,this.promise,void 0)},i.prototype.timeout=function(){this.reject(new p("timeout"))},i.prototype.isResolved=function(){return this.promise.isResolved()},i.prototype.toJSON=function(){return this.promise.toJSON()
},i.prototype._setCarriedStackTrace=function(e){this.promise.isRejected()&&this.promise._setCarriedStackTrace(e)},f.exports=i},{"./async.js":113,"./errors.js":121,"./es5.js":123,"./util.js":146}],134:[function(e,f){"use strict";f.exports=function(f,n){function o(e){return e.replace(/([$])/,"\\$")}function d(e){try{return e.__isPromisified__===!0}catch(f){return!1}}function i(e,f,n){var o=g.getDataPropertyOrDefault(e,f+n,k);return o?d(o):!1}function t(e,f,n){for(var o=0;o<e.length;o+=2){var d=e[o];if(n.test(d))for(var i=d.replace(n,""),t=0;t<e.length;t+=2)if(e[t]===i)throw new M("Cannot promisify an API that has normal methods with '"+f+"'-suffix")}}function l(e,f,n,o){for(var l=g.inheritedDataKeys(e),u=[],p=0;p<l.length;++p){var s=l[p],y=e[s];"function"!=typeof y||d(y)||i(e,s,f)||!o(s,y,e)||u.push(s,y)}return t(u,f,n),u}function u(e){for(var f=[e],n=Math.max(0,e-1-5),o=e-1;o>=n;--o)o!==e&&f.push(o);for(var o=e+1;5>=o;++o)f.push(o);return f}function p(e){return g.filledRange(e,"arguments[","]")}function s(e){return g.filledRange(e,"_arg","")}function y(e){return"number"==typeof e.length?Math.max(Math.min(e.length,1024),0):0}function c(e){return g.isIdentifier(e)?"."+e:"['"+e.replace(/(['\\])/g,"\\$1")+"']"}function a(e,o,d,i,t){function l(f){var n,d=p(f).join(", "),i=f>0?", ":"";return n="string"==typeof e?"                                                          \n                this.method({{args}}, fn);                                   \n                break;                                                       \n            ".replace(".method",c(e)):o===m?"                                                         \n                callback.call(this, {{args}}, fn);                           \n                break;                                                       \n            ":void 0!==o?"                                                         \n                callback.call(receiver, {{args}}, fn);                       \n                break;                                                       \n            ":"                                                         \n                callback({{args}}, fn);                                      \n                break;                                                       \n            ",n.replace("{{args}}",d).replace(", ",i)}function a(){for(var f="",n=0;n<w.length;++n)f+="case "+w[n]+":"+l(w[n]);var d;return d="string"==typeof e?"                                                  \n                this.property.apply(this, args);                             \n            ".replace(".property",c(e)):o===m?"                                                  \n                callback.apply(this, args);                                  \n            ":"                                                  \n                callback.apply(receiver, args);                              \n            ",f+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = fn;                                                    \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",d)}var r=Math.max(0,y(i)-1),w=u(r),b="string"==typeof d&&g.isIdentifier(d)?d+t:"promisified";return new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","                                         \n        var ret = function FunctionName(Parameters) {                        \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._setTrace(void 0);                                       \n            var fn = nodebackForPromise(promise);                            \n            try {                                                            \n                switch(len) {                                                \n                    [CodeForSwitchCase]                                      \n                }                                                            \n            } catch (e) {                                                    \n                var wrapped = maybeWrapAsError(e);                           \n                promise._attachExtraTrace(wrapped);                          \n                promise._reject(wrapped);                                    \n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        ret.__isPromisified__ = true;                                        \n        return ret;                                                          \n        ".replace("FunctionName",b).replace("Parameters",s(r)).replace("[CodeForSwitchCase]",a()))(f,e,o,P,j,x,n)}function r(e,o){function d(){var d=o;o===m&&(d=this),"string"==typeof e&&(e=d[e]);var i=new f(n);i._setTrace(void 0);var t=x(i);try{e.apply(d,P(arguments,t))}catch(l){var u=j(l);i._attachExtraTrace(u),i._reject(u)}return i}return d.__isPromisified__=!0,d}function w(e,f,n,d){for(var i=new RegExp(o(f)+"$"),t=l(e,f,i,n),u=0,p=t.length;p>u;u+=2){var s=t[u],y=t[u+1],c=s+f;e[c]=d===q?q(s,m,s,y,f):d(y)}return g.toFastProperties(e),e}function b(e,f){return q(e,f,void 0,e)}var m={},g=e("./util.js"),x=e("./promise_resolver.js")._nodebackForPromise,P=g.withAppended,j=g.maybeWrapAsError,v=g.canEvaluate,M=e("./errors").TypeError,X="Async",h=function(e,f){return g.isIdentifier(e)&&"_"!==e.charAt(0)&&!g.isClass(f)},k={__isPromisified__:!0},q=v?a:r;f.promisify=function(e,f){if("function"!=typeof e)throw new M("fn must be a function");return d(e)?e:b(e,arguments.length<2?m:f)},f.promisifyAll=function(e,f){if("function"!=typeof e&&"object"!=typeof e)throw new M("the target of promisifyAll must be an object or a function");f=Object(f);var n=f.suffix;"string"!=typeof n&&(n=X);var o=f.filter;"function"!=typeof o&&(o=h);var d=f.promisifier;if("function"!=typeof d&&(d=q),!g.isIdentifier(n))throw new RangeError("suffix must be a valid identifier");for(var i=g.inheritedDataKeys(e,{includeHidden:!0}),t=0;t<i.length;++t){var l=e[i[t]];"constructor"!==i[t]&&g.isClass(l)&&(w(l.prototype,n,o,d),w(l,n,o,d))}return w(e,n,o,d)}}},{"./errors":121,"./promise_resolver.js":133,"./util.js":146}],135:[function(e,f){"use strict";f.exports=function(f,n,o){function d(e){for(var f=p.keys(e),n=f.length,o=new Array(2*n),d=0;n>d;++d){var i=f[d];o[d]=e[i],o[d+n]=i}this.constructor$(o)}function i(e){var n,i=o(e,void 0);return u(i)?(n=i instanceof f?i._then(f.props,void 0,void 0,void 0,void 0):new d(i).promise(),i instanceof f&&n._propagateFrom(i,4),n):l("cannot await properties of a non-object")}var t=e("./util.js"),l=e("./errors_api_rejection")(f),u=t.isObject,p=e("./es5.js");t.inherits(d,n),d.prototype._init=function(){this._init$(void 0,-3)},d.prototype._promiseFulfilled=function(e,f){if(!this._isResolved()){this._values[f]=e;var n=++this._totalResolved;if(n>=this._length){for(var o={},d=this.length(),i=0,t=this.length();t>i;++i)o[this._values[i+d]]=this._values[i];this._resolve(o)}}},d.prototype._promiseProgressed=function(e,f){this._isResolved()||this._promise._progress({key:this._values[f+this.length()],value:e})},d.prototype.shouldCopyValues=function(){return!1},d.prototype.getActualLength=function(e){return e>>1},f.prototype.props=function(){return i(this)},f.props=function(e){return i(e)}}},{"./errors_api_rejection":122,"./es5.js":123,"./util.js":146}],136:[function(e,f){"use strict";function n(e,f,n,o,d){for(var i=0;d>i;++i)n[i+o]=e[i+f]}function o(e){this._capacity=e,this._length=0,this._front=0,this._makeCapacity()}o.prototype._willBeOverCapacity=function(e){return this._capacity<e},o.prototype._pushOne=function(e){var f=this.length();this._checkCapacity(f+1);var n=this._front+f&this._capacity-1;this[n]=e,this._length=f+1},o.prototype.push=function(e,f,n){var o=this.length()+3;if(this._willBeOverCapacity(o))return this._pushOne(e),this._pushOne(f),void this._pushOne(n);var d=this._front+o-3;this._checkCapacity(o);var i=this._capacity-1;this[d+0&i]=e,this[d+1&i]=f,this[d+2&i]=n,this._length=o},o.prototype.shift=function(){var e=this._front,f=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,f},o.prototype.length=function(){return this._length},o.prototype._makeCapacity=function(){for(var e=this._capacity,f=0;e>f;++f)this[f]=void 0},o.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<3)},o.prototype._resizeTo=function(e){var f=this._front,o=this._capacity,d=new Array(o),i=this.length();if(n(this,0,d,0,o),this._capacity=e,this._makeCapacity(),this._front=0,o>=f+i)n(d,f,this,0,i);else{var t=i-(f+i&o-1);n(d,f,this,0,t),n(d,0,this,t,i-t)}},f.exports=o},{}],137:[function(e,f){"use strict";f.exports=function(f,n,o){function d(e,d){var p=o(e,void 0);if(p instanceof f)return l(p);if(!t(e))return i("expecting an array, a promise or a thenable");var s=new f(n);void 0!==d?s._propagateFrom(d,7):s._setTrace(void 0);for(var y=s._fulfill,c=s._reject,a=0,r=e.length;r>a;++a){var w=e[a];(void 0!==w||u.call(e,a))&&f.cast(w)._then(y,c,void 0,s,null)}return s}var i=e("./errors_api_rejection.js")(f),t=e("./util.js").isArray,l=function(e){return e.then(function(f){return d(f,e)})},u={}.hasOwnProperty;f.race=function(e){return d(e,void 0)},f.prototype.race=function(){return d(this,void 0)}}},{"./errors_api_rejection.js":122,"./util.js":146}],138:[function(e,f){"use strict";f.exports=function(f,n,o,d,i){function t(e,n,o,t){this.constructor$(e),this._preservedValues=t===i?[]:null,this._zerothIsAccum=void 0===o,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var l=d(o,void 0),u=!1,p=l instanceof f;p&&(l.isPending()?l._proxyPromiseArray(this,-1):l.isFulfilled()?(o=l.value(),this._gotAccum=!0):(l._unsetRejectionIsUnhandled(),this._reject(l.reason()),u=!0)),p||this._zerothIsAccum||(this._gotAccum=!0),this._callback=n,this._accum=o,u||this._init$(void 0,-5)}function l(e,f,n,d){if("function"!=typeof f)return o("fn must be a function");var i=new t(e,f,n,d);return i.promise()}var u=e("./util.js"),p=u.tryCatch4,s=u.tryCatch3,y=u.errorObj;u.inherits(t,n),t.prototype._init=function(){},t.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},t.prototype._promiseFulfilled=function(e,n){var o=this._values;if(null!==o){var i,t=this.length(),l=this._preservedValues,u=null!==l,c=this._gotAccum,a=this._valuesPhase;if(!a)for(a=this._valuesPhase=Array(t),i=0;t>i;++i)a[i]=0;if(i=a[n],0===n&&this._zerothIsAccum?(c||(this._accum=e,this._gotAccum=c=!0),a[n]=0===i?1:2):-1===n?c||(this._accum=e,this._gotAccum=c=!0):0===i?a[n]=1:(a[n]=2,c&&(this._accum=e)),c){for(var r,w=this._callback,b=this._promise._boundTo,m=this._reducingIndex;t>m;++m)if(i=a[m],2!==i){if(1!==i)return;if(e=o[m],e instanceof f){if(!e.isFulfilled())return e.isPending()?void 0:(e._unsetRejectionIsUnhandled(),this._reject(e.reason()));e=e._settledValue}if(u?(l.push(e),r=s(w,b,e,m,t)):r=p(w,b,this._accum,e,m,t),r===y)return this._reject(r.e);var g=d(r,void 0);if(g instanceof f){if(g.isPending())return a[m]=4,g._proxyPromiseArray(this,m);if(!g.isFulfilled())return g._unsetRejectionIsUnhandled(),this._reject(g.reason());r=g.value()}this._reducingIndex=m+1,this._accum=r}else this._reducingIndex=m+1;this._reducingIndex<t||this._resolve(u?l:this._accum)}}},f.prototype.reduce=function(e,f){return l(this,e,f,null)},f.reduce=function(e,f,n,o){return l(e,f,n,o)}}},{"./util.js":146}],139:[function(e,f){(function(e){"use strict";var n,o;if("object"==typeof e&&"string"==typeof e.version)n=function(f){e.nextTick(f)};else if("undefined"!=typeof MutationObserver&&(o=MutationObserver)||"undefined"!=typeof WebKitMutationObserver&&(o=WebKitMutationObserver))n=function(){var e=document.createElement("div"),f=void 0,n=new o(function(){var e=f;f=void 0,e()});return n.observe(e,{attributes:!0}),function(n){f=n,e.classList.toggle("foo")}}();else{if("undefined"==typeof setTimeout)throw new Error("no async scheduler available");n=function(e){setTimeout(e,0)}}f.exports=n}).call(this,e("FWaASH"))},{FWaASH:169}],140:[function(e,f){"use strict";f.exports=function(f,n){function o(e){this.constructor$(e)}var d=f.PromiseInspection,i=e("./util.js");i.inherits(o,n),o.prototype._promiseResolved=function(e,f){this._values[e]=f;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)},o.prototype._promiseFulfilled=function(e,f){if(!this._isResolved()){var n=new d;n._bitField=268435456,n._settledValue=e,this._promiseResolved(f,n)}},o.prototype._promiseRejected=function(e,f){if(!this._isResolved()){var n=new d;n._bitField=134217728,n._settledValue=e,this._promiseResolved(f,n)}},f.settle=function(e){return new o(e).promise()},f.prototype.settle=function(){return new o(this).promise()}}},{"./util.js":146}],141:[function(e,f){"use strict";f.exports=function(f,n,o){function d(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function i(e,f){if((0|f)!==f||0>f)return o("expecting a positive integer");var n=new d(e),i=n.promise();return i.isRejected()?i:(n.setHowMany(f),n.init(),i)}var t=e("./util.js"),l=e("./errors.js").RangeError,u=e("./errors.js").AggregateError,p=t.isArray;t.inherits(d,n),d.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=p(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},d.prototype.init=function(){this._initialized=!0,this._init()},d.prototype.setUnwrap=function(){this._unwrap=!0},d.prototype.howMany=function(){return this._howMany},d.prototype.setHowMany=function(e){this._isResolved()||(this._howMany=e)},d.prototype._promiseFulfilled=function(e){this._isResolved()||(this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),this._resolve(1===this.howMany()&&this._unwrap?this._values[0]:this._values)))},d.prototype._promiseRejected=function(e){if(!this._isResolved()&&(this._addRejected(e),this.howMany()>this._canPossiblyFulfill())){for(var f=new u,n=this.length();n<this._values.length;++n)f.push(this._values[n]);this._reject(f)}},d.prototype._fulfilled=function(){return this._totalResolved},d.prototype._rejected=function(){return this._values.length-this.length()},d.prototype._addRejected=function(e){this._values.push(e)},d.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},d.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},d.prototype._getRangeError=function(e){var f="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new l(f)},d.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},f.some=function(e,f){return i(e,f)},f.prototype.some=function(e){return i(this,e)},f._SomePromiseArray=d}},{"./errors.js":121,"./util.js":146}],142:[function(e,f){"use strict";f.exports=function(e){function f(e){void 0!==e?(this._bitField=e._bitField,this._settledValue=e.isResolved()?e._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}f.prototype.isFulfilled=e.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},f.prototype.isRejected=e.prototype.isRejected=function(){return(134217728&this._bitField)>0},f.prototype.isPending=e.prototype.isPending=function(){return 0===(402653184&this._bitField)},f.prototype.value=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise");return this._settledValue},f.prototype.error=f.prototype.reason=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise");return this._settledValue},f.prototype.isResolved=e.prototype.isResolved=function(){return(402653184&this._bitField)>0},e.PromiseInspection=f}},{}],143:[function(e,f){"use strict";f.exports=function(f,n){function o(e){try{return e.then}catch(f){return p.e=f,p}}function d(e,d){if(s(e)){if(e instanceof f)return e;if(i(e)){var l=new f(n);return l._setTrace(void 0),e._then(l._fulfillUnchecked,l._rejectUncheckedCheckError,l._progressUnchecked,l,null),l._setFollowing(),l}var y=o(e);if(y===p)return void 0!==d&&u(y.e)&&d._attachExtraTrace(y.e),f.reject(y.e);if("function"==typeof y)return t(e,y,d)}return e}function i(e){return y.call(e,"_promise0")}function t(e,n,o){function d(n){if(!p){if(p=!0,e===n){var d=f._makeSelfResolutionError();return void 0!==o&&o._attachExtraTrace(d),void l.promise._reject(d,void 0)}l.resolve(n)}}function i(e){if(!p){p=!0;var f=u(e)?e:new Error(e+"");void 0!==o&&o._attachExtraTrace(f),l.promise._reject(e,f)}}function t(e){if(!p){var f=l.promise;"function"==typeof f._progress&&f._progress(e)}}var l=f.defer(),p=!1;try{n.call(e,d,i,t)}catch(s){if(!p){p=!0;var y=u(s)?s:new Error(s+"");void 0!==o&&o._attachExtraTrace(y),l.promise._reject(s,y)}}return l.promise}var l=e("./util.js"),u=e("./errors.js").canAttach,p=l.errorObj,s=l.isObject,y={}.hasOwnProperty;return d}},{"./errors.js":121,"./util.js":146}],144:[function(e,f){"use strict";var n=function(e,f){var n=arguments.length,o=arguments[2],d=arguments[3],i=n>=5?arguments[4]:void 0;return setTimeout(function(){e(o,d,i)},0|f)};f.exports=function(f,o,d){function i(e){var f=this;return f instanceof Number&&(f=+f),clearTimeout(f),e}function t(e){var f=this;throw f instanceof Number&&(f=+f),clearTimeout(f),e}var l=(e("./util.js"),e("./errors.js")),u=(e("./errors_api_rejection")(f),f.TimeoutError),p=function(e,f,n){if(e.isPending()){"string"!=typeof f&&(f="operation timed out after "+n+" ms");var o=new u(f);l.markAsOriginatingFromRejection(o),e._attachExtraTrace(o),e._cancel(o)}},s=function(e,f){f._fulfill(e)},y=f.delay=function(e,i){void 0===i&&(i=e,e=void 0),i=+i;var t=d(e,void 0),l=new f(o);return t instanceof f?(l._propagateFrom(t,7),l._follow(t),l.then(function(e){return f.delay(e,i)})):(l._setTrace(void 0),n(s,i,e,l),l)};f.prototype.delay=function(e){return y(this,e)},f.prototype.timeout=function(e,d){e=+e;var l=new f(o);l._propagateFrom(this,7),l._follow(this);var u=n(p,e,l,d,e);return l.cancellable()._then(i,t,void 0,u,void 0)}}},{"./errors.js":121,"./errors_api_rejection":122,"./util.js":146}],145:[function(e,f){"use strict";f.exports=function(f,n,o){function d(e){for(var n=e.length,o=0;n>o;++o){var d=e[o];if(d.isRejected())return f.reject(d.error());e[o]=d.value()}return e}function i(e){setTimeout(function(){throw e},0)}function t(e){var f=o(e,void 0);return f!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&f._setDisposable(e._getDisposer()),f}function l(e,n){function d(){if(l>=u)return p.resolve();var s=t(e[l++]);if(s instanceof f&&s._isDisposable()){try{s=o(s._getDisposer().tryDispose(n),void 0)}catch(y){return i(y)}if(s instanceof f)return s._then(d,i,null,null,null)}d()}var l=0,u=e.length,p=f.defer();return d(),p.promise}function u(e){var f=new r;return f._settledValue=e,f._bitField=268435456,l(this,f).thenReturn(e)}function p(e){var f=new r;return f._settledValue=e,f._bitField=134217728,l(this,f).thenThrow(e)}function s(e,f){this._data=e,this._promise=f}function y(e,f){this.constructor$(e,f)}var c=e("./errors.js").TypeError,a=e("./util.js").inherits,r=f.PromiseInspection;s.prototype.data=function(){return this._data},s.prototype.promise=function(){return this._promise},s.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},s.prototype.tryDispose=function(e){var f=this.resource(),n=null!==f?this.doDispose(f,e):null;return this._promise._unsetDisposable(),this._data=this._promise=null,n},s.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},a(y,s),y.prototype.doDispose=function(e,f){var n=this.data();return n.call(e,e,f)},f.using=function(){var e=arguments.length;if(2>e)return n("you must pass at least 2 arguments to Promise.using");var o=arguments[e-1];if("function"!=typeof o)return n("fn must be a function");e--;for(var i=new Array(e),t=0;e>t;++t){var l=arguments[t];if(s.isDisposer(l)){var y=l;l=l.promise(),l._setDisposable(y)}i[t]=l}return f.settle(i).then(d).spread(o)._then(u,p,void 0,i,void 0)},f.prototype._setDisposable=function(e){this._bitField=262144|this._bitField,this._disposer=e},f.prototype._isDisposable=function(){return(262144&this._bitField)>0},f.prototype._getDisposer=function(){return this._disposer},f.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},f.prototype.disposer=function(e){if("function"==typeof e)return new y(e,this);throw new c}}},{"./errors.js":121,"./util.js":146}],146:[function(e,f,n){"use strict";function o(e,f,n){try{return e.call(f,n)}catch(o){return M.e=o,M}}function d(e,f,n,o){try{return e.call(f,n,o)}catch(d){return M.e=d,M}}function i(e,f,n,o,d){try{return e.call(f,n,o,d)}catch(i){return M.e=i,M}}function t(e,f,n,o,d,i){try{return e.call(f,n,o,d,i)}catch(t){return M.e=t,M}}function l(e,f,n){try{return e.apply(n,f)}catch(o){return M.e=o,M}}function u(e){return"string"==typeof e?e:""+e}function p(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function s(e){return!p(e)}function y(e){return p(e)?new Error(u(e)):e}function c(e,f){var n,o=e.length,d=new Array(o+1);for(n=0;o>n;++n)d[n]=e[n];return d[n]=f,d}function a(e,f,n){if(!P.isES5)return{}.hasOwnProperty.call(e,f)?e[f]:void 0;var o=Object.getOwnPropertyDescriptor(e,f);return null!=o?null==o.get&&null==o.set?o.value:n:void 0}function r(e,f,n){if(p(e))return e;var o={value:n,configurable:!0,enumerable:!1,writable:!0};return P.defineProperty(e,f,o),e}function w(e){throw e}function b(e){try{if("function"==typeof e){var f=P.keys(e.prototype);return f.length>0&&!(1===f.length&&"constructor"===f[0])}return!1}catch(n){return!1}}function m(e){function f(){}return f.prototype=e,f}function g(e){return q.test(e)}function x(e,f,n){for(var o=new Array(e),d=0;e>d;++d)o[d]=f+d+n;return o}var P=e("./es5.js"),j=function(){try{var e={};return P.defineProperty(e,"f",{get:function(){return 3}}),3===e.f}catch(f){return!1}}(),v="undefined"==typeof navigator,M={e:{}},X=function(e,f){function n(){this.constructor=e,this.constructor$=f;for(var n in f.prototype)o.call(f.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=f.prototype[n])}var o={}.hasOwnProperty;return n.prototype=f.prototype,e.prototype=new n,e.prototype},h=function(){return"string"!==this}.call("string"),k=function(){return P.isES5?function(e,f){for(var n=[],o=Object.create(null),d=Object(f).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=e;){var i;try{i=d(e)}catch(t){return n}for(var l=0;l<i.length;++l){var u=i[l];if(!o[u]){o[u]=!0;var p=Object.getOwnPropertyDescriptor(e,u);null!=p&&null==p.get&&null==p.set&&n.push(u)}}e=P.getPrototypeOf(e)}return n}:function(e){var f=[];for(var n in e)f.push(n);return f}}(),q=/^[a-z$_][a-z$_0-9]*$/i,z={isClass:b,isIdentifier:g,inheritedDataKeys:k,getDataPropertyOrDefault:a,thrower:w,isArray:P.isArray,haveGetters:j,notEnumerableProp:r,isPrimitive:p,isObject:s,canEvaluate:v,errorObj:M,tryCatch1:o,tryCatch2:d,tryCatch3:i,tryCatch4:t,tryCatchApply:l,inherits:X,withAppended:c,asString:u,maybeWrapAsError:y,wrapsPrimitiveReceiver:h,toFastProperties:m,filledRange:x};f.exports=z},{"./es5.js":123}],147:[function(e,f,n){!function(e,o){"function"==typeof define&&define.amd?define([],o):"object"==typeof n?f.exports=o():e.returnExports=o()}(this,function(){function e(d,i){if("function"!=typeof i)throw new Error("Bad callback given: "+i);if(!d)throw new Error("No options given");var l=d.onResponse;if(d="string"==typeof d?{uri:d}:JSON.parse(JSON.stringify(d)),d.onResponse=l,d.verbose&&(e.log=o()),d.url&&(d.uri=d.url,delete d.url),!d.uri&&""!==d.uri)throw new Error("options.uri is a required argument");if("string"!=typeof d.uri)throw new Error("options.uri must be a string");for(var u=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],p=0;p<u.length;p++)if(d[u[p]])throw new Error("options."+u[p]+" is not supported");if(d.callback=i,d.method=d.method||"GET",d.headers=d.headers||{},d.body=d.body||null,d.timeout=d.timeout||e.DEFAULT_TIMEOUT,d.headers.host)throw new Error("Options.headers.host is not supported");d.json&&(d.headers.accept=d.headers.accept||"application/json","GET"!==d.method&&(d.headers["content-type"]="application/json"),"boolean"!=typeof d.json?d.body=JSON.stringify(d.json):"string"!=typeof d.body&&(d.body=JSON.stringify(d.body)));var s=function(e){var f=[];for(var n in e)e.hasOwnProperty(n)&&f.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return f.join("&")};if(d.qs){var y="string"==typeof d.qs?d.qs:s(d.qs);d.uri=-1!==d.uri.indexOf("?")?d.uri+"&"+y:d.uri+"?"+y}var c=function(e){var f={};f.boundry="-------------------------------"+Math.floor(1e9*Math.random());var n=[];for(var o in e)e.hasOwnProperty(o)&&n.push("--"+f.boundry+'\nContent-Disposition: form-data; name="'+o+'"\n\n'+e[o]+"\n");return n.push("--"+f.boundry+"--"),f.body=n.join(""),f.length=f.body.length,f.type="multipart/form-data; boundary="+f.boundry,f};if(d.form){if("string"==typeof d.form)throw"form name unsupported";if("POST"===d.method){var a=(d.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(d.headers["content-type"]=a,a){case"application/x-www-form-urlencoded":d.body=s(d.form).replace(/%20/g,"+");break;case"multipart/form-data":var r=c(d.form);d.body=r.body,d.headers["content-type"]=r.type;break;default:throw new Error("unsupported encoding:"+a)}}}return d.onResponse=d.onResponse||n,d.onResponse===!0&&(d.onResponse=i,d.callback=n),!d.headers.authorization&&d.auth&&(d.headers.authorization="Basic "+t(d.auth.username+":"+d.auth.password)),f(d)}function f(f){function n(){y=!0;var n=new Error("ETIMEDOUT");return n.code="ETIMEDOUT",n.duration=f.timeout,e.log.error("Timeout",{id:s._id,milliseconds:f.timeout}),f.callback(n,s)}function o(){if(y)return e.log.debug("Ignoring timed out state change",{state:s.readyState,id:s.id});if(e.log.debug("State change",{state:s.readyState,id:s.id,timed_out:y}),s.readyState===l.OPENED){e.log.debug("Request started",{id:s.id});for(var n in f.headers)s.setRequestHeader(n,f.headers[n])}else s.readyState===l.HEADERS_RECEIVED?d():s.readyState===l.LOADING?(d(),t()):s.readyState===l.DONE&&(d(),t(),u())}function d(){if(!w.response){if(w.response=!0,e.log.debug("Got response",{id:s.id,status:s.status}),clearTimeout(s.timeoutTimer),s.statusCode=s.status,c&&0==s.statusCode){var n=new Error("CORS request rejected: "+f.uri);return n.cors="rejected",w.loading=!0,w.end=!0,f.callback(n,s)}f.onResponse(null,s)}}function t(){w.loading||(w.loading=!0,e.log.debug("Response body loading",{id:s.id}))}function u(){if(!w.end){if(w.end=!0,e.log.debug("Request done",{id:s.id}),s.body=s.responseText,f.json)try{s.body=JSON.parse(s.responseText)}catch(n){return f.callback(n,s)}f.callback(null,s,s.body)}}var s=new l,y=!1,c=i(f.uri),a="withCredentials"in s;if(p+=1,s.seq_id=p,s.id=p+": "+f.method+" "+f.uri,s._id=s.id,c&&!a){var r=new Error("Browser does not support cross-origin request: "+f.uri);return r.cors="unsupported",f.callback(r,s)}s.timeoutTimer=setTimeout(n,f.timeout);var w={response:!1,loading:!1,end:!1};return s.onreadystatechange=o,s.open(f.method,f.uri,!0),c&&(s.withCredentials=!!f.withCredentials),s.send(f.body),s}function n(){}function o(){var e,f,o={},i=["trace","debug","info","warn","error"];for(f=0;f<i.length;f++)e=i[f],o[e]=n,"undefined"!=typeof console&&console&&console[e]&&(o[e]=d(console,e));return o}function d(e,f){function n(n,o){return"object"==typeof o&&(n+=" "+JSON.stringify(o)),e[f].call(e,n)}return n}function i(e){var f,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{f=location.href}catch(o){f=document.createElement("a"),f.href="",f=f.href}var d=n.exec(f.toLowerCase())||[],i=n.exec(e.toLowerCase()),t=!(!i||i[1]==d[1]&&i[2]==d[2]&&(i[3]||("http:"===i[1]?80:443))==(d[3]||("http:"===d[1]?80:443)));return t}function t(e){var f,n,o,d,i,t,l,u,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,y=0,c="",a=[];if(!e)return e;do f=e.charCodeAt(s++),n=e.charCodeAt(s++),o=e.charCodeAt(s++),u=f<<16|n<<8|o,d=u>>18&63,i=u>>12&63,t=u>>6&63,l=63&u,a[y++]=p.charAt(d)+p.charAt(i)+p.charAt(t)+p.charAt(l);while(s<e.length);switch(c=a.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}var l=XMLHttpRequest;if(!l)throw new Error("missing XMLHttpRequest");e.log={trace:n,debug:n,info:n,warn:n,error:n};var u=18e4,p=0;e.withCredentials=!1,e.DEFAULT_TIMEOUT=u,e.defaults=function(f){var n=function(e){var n=function(n,o){n="string"==typeof n?{uri:n}:JSON.parse(JSON.stringify(n));for(var d in f)void 0===n[d]&&(n[d]=f[d]);return e(n,o)};return n},o=n(e);return o.get=n(e.get),o.post=n(e.post),o.put=n(e.put),o.head=n(e.head),o};var s=["get","put","post","head"];return s.forEach(function(f){var n=f.toUpperCase(),o=f.toLowerCase();e[o]=function(f){"string"==typeof f?f={method:n,uri:f}:(f=JSON.parse(JSON.stringify(f)),f.method=n);var o=[f].concat(Array.prototype.slice.apply(arguments,[1]));return e.apply(this,o)}}),e.couch=function(f,o){function d(e,f,n){if(e)return o(e,f,n);if((f.statusCode<200||f.statusCode>299)&&n.error){e=new Error("CouchDB error: "+(n.error.reason||n.error.error));for(var d in n)e[d]=n[d];return o(e,f,n)}return o(e,f,n)}"string"==typeof f&&(f={uri:f}),f.json=!0,f.body&&(f.json=f.body),delete f.body,o=o||n;var i=e(f,d);return i},e})},{}],148:[function(e,f){function n(e,f){return c.isUndefined(f)?""+f:!c.isNumber(f)||!isNaN(f)&&isFinite(f)?c.isFunction(f)||c.isRegExp(f)?f.toString():f:f.toString()}function o(e,f){return c.isString(e)?e.length<f?e:e.slice(0,f):e}function d(e){return o(JSON.stringify(e.actual,n),128)+" "+e.operator+" "+o(JSON.stringify(e.expected,n),128)}function i(e,f,n,o,d){throw new w.AssertionError({message:n,actual:e,expected:f,operator:o,stackStartFunction:d})}function t(e,f){e||i(e,!0,f,"==",w.ok)}function l(e,f){if(e===f)return!0;if(c.isBuffer(e)&&c.isBuffer(f)){if(e.length!=f.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==f[n])return!1;return!0}return c.isDate(e)&&c.isDate(f)?e.getTime()===f.getTime():c.isRegExp(e)&&c.isRegExp(f)?e.source===f.source&&e.global===f.global&&e.multiline===f.multiline&&e.lastIndex===f.lastIndex&&e.ignoreCase===f.ignoreCase:c.isObject(e)||c.isObject(f)?p(e,f):e==f}function u(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function p(e,f){if(c.isNullOrUndefined(e)||c.isNullOrUndefined(f))return!1;if(e.prototype!==f.prototype)return!1;if(u(e))return u(f)?(e=a.call(e),f=a.call(f),l(e,f)):!1;try{var n,o,d=b(e),i=b(f)}catch(t){return!1}if(d.length!=i.length)return!1;for(d.sort(),i.sort(),o=d.length-1;o>=0;o--)if(d[o]!=i[o])return!1;for(o=d.length-1;o>=0;o--)if(n=d[o],!l(e[n],f[n]))return!1;return!0}function s(e,f){return e&&f?"[object RegExp]"==Object.prototype.toString.call(f)?f.test(e):e instanceof f?!0:f.call({},e)===!0?!0:!1:!1}function y(e,f,n,o){var d;c.isString(n)&&(o=n,n=null);try{f()}catch(t){d=t}if(o=(n&&n.name?" ("+n.name+").":".")+(o?" "+o:"."),e&&!d&&i(d,n,"Missing expected exception"+o),!e&&s(d,n)&&i(d,n,"Got unwanted exception"+o),e&&d&&n&&!s(d,n)||!e&&d)throw d
}var c=e("util/"),a=Array.prototype.slice,r=Object.prototype.hasOwnProperty,w=f.exports=t;w.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=d(this),this.generatedMessage=!0);var f=e.stackStartFunction||i;if(Error.captureStackTrace)Error.captureStackTrace(this,f);else{var n=new Error;if(n.stack){var o=n.stack,t=f.name,l=o.indexOf("\n"+t);if(l>=0){var u=o.indexOf("\n",l+1);o=o.substring(u+1)}this.stack=o}}},c.inherits(w.AssertionError,Error),w.fail=i,w.ok=t,w.equal=function(e,f,n){e!=f&&i(e,f,n,"==",w.equal)},w.notEqual=function(e,f,n){e==f&&i(e,f,n,"!=",w.notEqual)},w.deepEqual=function(e,f,n){l(e,f)||i(e,f,n,"deepEqual",w.deepEqual)},w.notDeepEqual=function(e,f,n){l(e,f)&&i(e,f,n,"notDeepEqual",w.notDeepEqual)},w.strictEqual=function(e,f,n){e!==f&&i(e,f,n,"===",w.strictEqual)},w.notStrictEqual=function(e,f,n){e===f&&i(e,f,n,"!==",w.notStrictEqual)},w["throws"]=function(){y.apply(this,[!0].concat(a.call(arguments)))},w.doesNotThrow=function(){y.apply(this,[!1].concat(a.call(arguments)))},w.ifError=function(e){if(e)throw e};var b=Object.keys||function(e){var f=[];for(var n in e)r.call(e,n)&&f.push(n);return f}},{"util/":186}],149:[function(){},{}],150:[function(e,f,n){function o(e,f,n){if(!(this instanceof o))return new o(e,f,n);var d,i=typeof e;if("number"===i)d=e>0?e>>>0:0;else if("string"===i)"base64"===f&&(e=M(e)),d=o.byteLength(e,f);else{if("object"!==i||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&G(e.data)&&(e=e.data),d=+e.length>0?Math.floor(+e.length):0}if(this.length>H)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+H.toString(16)+" bytes");var t;o.TYPED_ARRAY_SUPPORT?t=o._augment(new Uint8Array(d)):(t=this,t.length=d,t._isBuffer=!0);var l;if(o.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)t._set(e);else if(h(e))if(o.isBuffer(e))for(l=0;d>l;l++)t[l]=e.readUInt8(l);else for(l=0;d>l;l++)t[l]=(e[l]%256+256)%256;else if("string"===i)t.write(e,0,f);else if("number"===i&&!o.TYPED_ARRAY_SUPPORT&&!n)for(l=0;d>l;l++)t[l]=0;return t}function d(e,f,n,o){n=Number(n)||0;var d=e.length-n;o?(o=Number(o),o>d&&(o=d)):o=d;var i=f.length;if(i%2!==0)throw new Error("Invalid hex string");o>i/2&&(o=i/2);for(var t=0;o>t;t++){var l=parseInt(f.substr(2*t,2),16);if(isNaN(l))throw new Error("Invalid hex string");e[n+t]=l}return t}function i(e,f,n,o){var d=C(q(f),e,n,o);return d}function t(e,f,n,o){var d=C(z(f),e,n,o);return d}function l(e,f,n,o){return t(e,f,n,o)}function u(e,f,n,o){var d=C(B(f),e,n,o);return d}function p(e,f,n,o){var d=C(A(f),e,n,o,2);return d}function s(e,f,n){return E.fromByteArray(0===f&&n===e.length?e:e.slice(f,n))}function y(e,f,n){var o="",d="";n=Math.min(e.length,n);for(var i=f;n>i;i++)e[i]<=127?(o+=D(d)+String.fromCharCode(e[i]),d=""):d+="%"+e[i].toString(16);return o+D(d)}function c(e,f,n){var o="";n=Math.min(e.length,n);for(var d=f;n>d;d++)o+=String.fromCharCode(e[d]);return o}function a(e,f,n){return c(e,f,n)}function r(e,f,n){var o=e.length;(!f||0>f)&&(f=0),(!n||0>n||n>o)&&(n=o);for(var d="",i=f;n>i;i++)d+=k(e[i]);return d}function w(e,f,n){for(var o=e.slice(f,n),d="",i=0;i<o.length;i+=2)d+=String.fromCharCode(o[i]+256*o[i+1]);return d}function b(e,f,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+f>n)throw new RangeError("Trying to access beyond buffer length")}function m(e,f,n,d,i,t){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(f>i||t>f)throw new TypeError("value is out of bounds");if(n+d>e.length)throw new TypeError("index out of range")}function g(e,f,n,o){0>f&&(f=65535+f+1);for(var d=0,i=Math.min(e.length-n,2);i>d;d++)e[n+d]=(f&255<<8*(o?d:1-d))>>>8*(o?d:1-d)}function x(e,f,n,o){0>f&&(f=4294967295+f+1);for(var d=0,i=Math.min(e.length-n,4);i>d;d++)e[n+d]=f>>>8*(o?d:3-d)&255}function P(e,f,n,o,d,i){if(f>d||i>f)throw new TypeError("value is out of bounds");if(n+o>e.length)throw new TypeError("index out of range")}function j(e,f,n,o,d){return d||P(e,f,n,4,3.4028234663852886e38,-3.4028234663852886e38),F.write(e,f,n,o,23,4),n+4}function v(e,f,n,o,d){return d||P(e,f,n,8,1.7976931348623157e308,-1.7976931348623157e308),F.write(e,f,n,o,52,8),n+8}function M(e){for(e=X(e).replace(J,"");e.length%4!==0;)e+="=";return e}function X(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return G(e)||o.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function k(e){return 16>e?"0"+e.toString(16):e.toString(16)}function q(e){for(var f=[],n=0;n<e.length;n++){var o=e.charCodeAt(n);if(127>=o)f.push(o);else{var d=n;o>=55296&&57343>=o&&n++;for(var i=encodeURIComponent(e.slice(d,n+1)).substr(1).split("%"),t=0;t<i.length;t++)f.push(parseInt(i[t],16))}}return f}function z(e){for(var f=[],n=0;n<e.length;n++)f.push(255&e.charCodeAt(n));return f}function A(e){for(var f,n,o,d=[],i=0;i<e.length;i++)f=e.charCodeAt(i),n=f>>8,o=f%256,d.push(o),d.push(n);return d}function B(e){return E.toByteArray(e)}function C(e,f,n,o,d){d&&(o-=o%d);for(var i=0;o>i&&!(i+n>=f.length||i>=e.length);i++)f[i+n]=e[i];return i}function D(e){try{return decodeURIComponent(e)}catch(f){return String.fromCharCode(65533)}}var E=e("base64-js"),F=e("ieee754"),G=e("is-array");n.Buffer=o,n.SlowBuffer=o,n.INSPECT_MAX_BYTES=50,o.poolSize=8192;var H=1073741823;o.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),f=new Uint8Array(e);return f.foo=function(){return 42},42===f.foo()&&"function"==typeof f.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,f){if(!o.isBuffer(e)||!o.isBuffer(f))throw new TypeError("Arguments must be Buffers");for(var n=e.length,d=f.length,i=0,t=Math.min(n,d);t>i&&e[i]===f[i];i++);return i!==t&&(n=e[i],d=f[i]),d>n?-1:n>d?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,f){if(!G(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new o(0);if(1===e.length)return e[0];var n;if(void 0===f)for(f=0,n=0;n<e.length;n++)f+=e[n].length;var d=new o(f),i=0;for(n=0;n<e.length;n++){var t=e[n];t.copy(d,i),i+=t.length}return d},o.byteLength=function(e,f){var n;switch(e+="",f||"utf8"){case"ascii":case"binary":case"raw":n=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;case"hex":n=e.length>>>1;break;case"utf8":case"utf-8":n=q(e).length;break;case"base64":n=B(e).length;break;default:n=e.length}return n},o.prototype.length=void 0,o.prototype.parent=void 0,o.prototype.toString=function(e,f,n){var o=!1;if(f>>>=0,n=void 0===n||1/0===n?this.length:n>>>0,e||(e="utf8"),0>f&&(f=0),n>this.length&&(n=this.length),f>=n)return"";for(;;)switch(e){case"hex":return r(this,f,n);case"utf8":case"utf-8":return y(this,f,n);case"ascii":return c(this,f,n);case"binary":return a(this,f,n);case"base64":return s(this,f,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,f,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return 0===o.compare(this,e)},o.prototype.inspect=function(){var e="",f=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,f).match(/.{2}/g).join(" "),this.length>f&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return o.compare(this,e)},o.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},o.prototype.set=function(e,f){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,f)},o.prototype.write=function(e,f,n,o){if(isFinite(f))isFinite(n)||(o=n,n=void 0);else{var s=o;o=f,f=n,n=s}f=Number(f)||0;var y=this.length-f;n?(n=Number(n),n>y&&(n=y)):n=y,o=String(o||"utf8").toLowerCase();var c;switch(o){case"hex":c=d(this,e,f,n);break;case"utf8":case"utf-8":c=i(this,e,f,n);break;case"ascii":c=t(this,e,f,n);break;case"binary":c=l(this,e,f,n);break;case"base64":c=u(this,e,f,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=p(this,e,f,n);break;default:throw new TypeError("Unknown encoding: "+o)}return c},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,f){var n=this.length;if(e=~~e,f=void 0===f?n:~~f,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>f?(f+=n,0>f&&(f=0)):f>n&&(f=n),e>f&&(f=e),o.TYPED_ARRAY_SUPPORT)return o._augment(this.subarray(e,f));for(var d=f-e,i=new o(d,void 0,!0),t=0;d>t;t++)i[t]=this[t+e];return i},o.prototype.readUInt8=function(e,f){return f||b(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,f){return f||b(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,f){return f||b(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,f){return f||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,f){return f||b(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readInt8=function(e,f){return f||b(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,f){f||b(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,f){f||b(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,f){return f||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,f){return f||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,f){return f||b(e,4,this.length),F.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,f){return f||b(e,4,this.length),F.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,f){return f||b(e,8,this.length),F.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,f){return f||b(e,8,this.length),F.read(this,e,!1,52,8)},o.prototype.writeUInt8=function(e,f,n){return e=+e,f>>>=0,n||m(this,e,f,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[f]=e,f+1},o.prototype.writeUInt16LE=function(e,f,n){return e=+e,f>>>=0,n||m(this,e,f,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[f]=e,this[f+1]=e>>>8):g(this,e,f,!0),f+2},o.prototype.writeUInt16BE=function(e,f,n){return e=+e,f>>>=0,n||m(this,e,f,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[f]=e>>>8,this[f+1]=e):g(this,e,f,!1),f+2},o.prototype.writeUInt32LE=function(e,f,n){return e=+e,f>>>=0,n||m(this,e,f,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[f+3]=e>>>24,this[f+2]=e>>>16,this[f+1]=e>>>8,this[f]=e):x(this,e,f,!0),f+4},o.prototype.writeUInt32BE=function(e,f,n){return e=+e,f>>>=0,n||m(this,e,f,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[f]=e>>>24,this[f+1]=e>>>16,this[f+2]=e>>>8,this[f+3]=e):x(this,e,f,!1),f+4},o.prototype.writeInt8=function(e,f,n){return e=+e,f>>>=0,n||m(this,e,f,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[f]=e,f+1},o.prototype.writeInt16LE=function(e,f,n){return e=+e,f>>>=0,n||m(this,e,f,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[f]=e,this[f+1]=e>>>8):g(this,e,f,!0),f+2},o.prototype.writeInt16BE=function(e,f,n){return e=+e,f>>>=0,n||m(this,e,f,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[f]=e>>>8,this[f+1]=e):g(this,e,f,!1),f+2},o.prototype.writeInt32LE=function(e,f,n){return e=+e,f>>>=0,n||m(this,e,f,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[f]=e,this[f+1]=e>>>8,this[f+2]=e>>>16,this[f+3]=e>>>24):x(this,e,f,!0),f+4},o.prototype.writeInt32BE=function(e,f,n){return e=+e,f>>>=0,n||m(this,e,f,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[f]=e>>>24,this[f+1]=e>>>16,this[f+2]=e>>>8,this[f+3]=e):x(this,e,f,!1),f+4},o.prototype.writeFloatLE=function(e,f,n){return j(this,e,f,!0,n)},o.prototype.writeFloatBE=function(e,f,n){return j(this,e,f,!1,n)},o.prototype.writeDoubleLE=function(e,f,n){return v(this,e,f,!0,n)},o.prototype.writeDoubleBE=function(e,f,n){return v(this,e,f,!1,n)},o.prototype.copy=function(e,f,n,d){var i=this;if(n||(n=0),d||0===d||(d=this.length),f||(f=0),d!==n&&0!==e.length&&0!==i.length){if(n>d)throw new TypeError("sourceEnd < sourceStart");if(0>f||f>=e.length)throw new TypeError("targetStart out of bounds");if(0>n||n>=i.length)throw new TypeError("sourceStart out of bounds");if(0>d||d>i.length)throw new TypeError("sourceEnd out of bounds");d>this.length&&(d=this.length),e.length-f<d-n&&(d=e.length-f+n);var t=d-n;if(1e3>t||!o.TYPED_ARRAY_SUPPORT)for(var l=0;t>l;l++)e[l+f]=this[l+n];else e._set(this.subarray(n,n+t),f)}},o.prototype.fill=function(e,f,n){if(e||(e=0),f||(f=0),n||(n=this.length),f>n)throw new TypeError("end < start");if(n!==f&&0!==this.length){if(0>f||f>=this.length)throw new TypeError("start out of bounds");if(0>n||n>this.length)throw new TypeError("end out of bounds");var o;if("number"==typeof e)for(o=f;n>o;o++)this[o]=e;else{var d=q(e.toString()),i=d.length;for(o=f;n>o;o++)this[o]=d[o%i]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var e=new Uint8Array(this.length),f=0,n=e.length;n>f;f+=1)e[f]=this[f];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var I=o.prototype;o._augment=function(e){return e.constructor=o,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=I.get,e.set=I.set,e.write=I.write,e.toString=I.toString,e.toLocaleString=I.toString,e.toJSON=I.toJSON,e.equals=I.equals,e.compare=I.compare,e.copy=I.copy,e.slice=I.slice,e.readUInt8=I.readUInt8,e.readUInt16LE=I.readUInt16LE,e.readUInt16BE=I.readUInt16BE,e.readUInt32LE=I.readUInt32LE,e.readUInt32BE=I.readUInt32BE,e.readInt8=I.readInt8,e.readInt16LE=I.readInt16LE,e.readInt16BE=I.readInt16BE,e.readInt32LE=I.readInt32LE,e.readInt32BE=I.readInt32BE,e.readFloatLE=I.readFloatLE,e.readFloatBE=I.readFloatBE,e.readDoubleLE=I.readDoubleLE,e.readDoubleBE=I.readDoubleBE,e.writeUInt8=I.writeUInt8,e.writeUInt16LE=I.writeUInt16LE,e.writeUInt16BE=I.writeUInt16BE,e.writeUInt32LE=I.writeUInt32LE,e.writeUInt32BE=I.writeUInt32BE,e.writeInt8=I.writeInt8,e.writeInt16LE=I.writeInt16LE,e.writeInt16BE=I.writeInt16BE,e.writeInt32LE=I.writeInt32LE,e.writeInt32BE=I.writeInt32BE,e.writeFloatLE=I.writeFloatLE,e.writeFloatBE=I.writeFloatBE,e.writeDoubleLE=I.writeDoubleLE,e.writeDoubleBE=I.writeDoubleBE,e.fill=I.fill,e.inspect=I.inspect,e.toArrayBuffer=I.toArrayBuffer,e};var J=/[^+\/0-9A-z]/g},{"base64-js":151,ieee754:152,"is-array":153}],151:[function(e,f,n){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function f(e){var f=e.charCodeAt(0);return f===t?62:f===l?63:u>f?-1:u+10>f?f-u+26+26:s+26>f?f-s:p+26>f?f-p+26:void 0}function n(e){function n(e){p[y++]=e}var o,d,t,l,u,p;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.length;u="="===e.charAt(s-2)?2:"="===e.charAt(s-1)?1:0,p=new i(3*e.length/4-u),t=u>0?e.length-4:e.length;var y=0;for(o=0,d=0;t>o;o+=4,d+=3)l=f(e.charAt(o))<<18|f(e.charAt(o+1))<<12|f(e.charAt(o+2))<<6|f(e.charAt(o+3)),n((16711680&l)>>16),n((65280&l)>>8),n(255&l);return 2===u?(l=f(e.charAt(o))<<2|f(e.charAt(o+1))>>4,n(255&l)):1===u&&(l=f(e.charAt(o))<<10|f(e.charAt(o+1))<<4|f(e.charAt(o+2))>>2,n(l>>8&255),n(255&l)),p}function d(e){function f(e){return o.charAt(e)}function n(e){return f(e>>18&63)+f(e>>12&63)+f(e>>6&63)+f(63&e)}var d,i,t,l=e.length%3,u="";for(d=0,t=e.length-l;t>d;d+=3)i=(e[d]<<16)+(e[d+1]<<8)+e[d+2],u+=n(i);switch(l){case 1:i=e[e.length-1],u+=f(i>>2),u+=f(i<<4&63),u+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],u+=f(i>>10),u+=f(i>>4&63),u+=f(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,t="+".charCodeAt(0),l="/".charCodeAt(0),u="0".charCodeAt(0),p="a".charCodeAt(0),s="A".charCodeAt(0);e.toByteArray=n,e.fromByteArray=d}("undefined"==typeof n?this.base64js={}:n)},{}],152:[function(e,f,n){n.read=function(e,f,n,o,d){var i,t,l=8*d-o-1,u=(1<<l)-1,p=u>>1,s=-7,y=n?d-1:0,c=n?-1:1,a=e[f+y];for(y+=c,i=a&(1<<-s)-1,a>>=-s,s+=l;s>0;i=256*i+e[f+y],y+=c,s-=8);for(t=i&(1<<-s)-1,i>>=-s,s+=o;s>0;t=256*t+e[f+y],y+=c,s-=8);if(0===i)i=1-p;else{if(i===u)return t?0/0:1/0*(a?-1:1);t+=Math.pow(2,o),i-=p}return(a?-1:1)*t*Math.pow(2,i-o)},n.write=function(e,f,n,o,d,i){var t,l,u,p=8*i-d-1,s=(1<<p)-1,y=s>>1,c=23===d?Math.pow(2,-24)-Math.pow(2,-77):0,a=o?0:i-1,r=o?1:-1,w=0>f||0===f&&0>1/f?1:0;for(f=Math.abs(f),isNaN(f)||1/0===f?(l=isNaN(f)?1:0,t=s):(t=Math.floor(Math.log(f)/Math.LN2),f*(u=Math.pow(2,-t))<1&&(t--,u*=2),f+=t+y>=1?c/u:c*Math.pow(2,1-y),f*u>=2&&(t++,u/=2),t+y>=s?(l=0,t=s):t+y>=1?(l=(f*u-1)*Math.pow(2,d),t+=y):(l=f*Math.pow(2,y-1)*Math.pow(2,d),t=0));d>=8;e[n+a]=255&l,a+=r,l/=256,d-=8);for(t=t<<d|l,p+=d;p>0;e[n+a]=255&t,a+=r,t/=256,p-=8);e[n+a-r]|=128*w}},{}],153:[function(e,f){var n=Array.isArray,o=Object.prototype.toString;f.exports=n||function(e){return!!e&&"[object Array]"==o.call(e)}},{}],154:[function(e,f){(function(n){function o(e){return function(){var f=[],o={update:function(e,o){return n.isBuffer(e)||(e=new n(e,o)),f.push(e),this},digest:function(o){var d=n.concat(f),i=e(d);return f=null,o?i.toString(o):i}};return o}}var d=e("sha.js"),i=o(e("./md5")),t=o(e("ripemd160"));f.exports=function(e){return"md5"===e?new i:"rmd160"===e?new t:d(e)}}).call(this,e("buffer").Buffer)},{"./md5":158,buffer:150,ripemd160:159,"sha.js":161}],155:[function(e,f){(function(n){function o(e,f){if(!(this instanceof o))return new o(e,f);this._opad=u,this._alg=e,f=this._key=n.isBuffer(f)?f:new n(f),f.length>i?f=d(e).update(f).digest():f.length<i&&(f=n.concat([f,t],i));for(var l=this._ipad=new n(i),u=this._opad=new n(i),p=0;i>p;p++)l[p]=54^f[p],u[p]=92^f[p];this._hash=d(e).update(l)}var d=e("./create-hash"),i=64,t=new n(i);t.fill(0),f.exports=o,o.prototype.update=function(e,f){return this._hash.update(e,f),this},o.prototype.digest=function(e){var f=this._hash.digest();return d(this._alg).update(this._opad).update(f).digest(e)}}).call(this,e("buffer").Buffer)},{"./create-hash":154,buffer:150}],156:[function(e,f){(function(e){function n(f,n){if(f.length%i!==0){var o=f.length+(i-f.length%i);f=e.concat([f,t],o)}for(var d=[],l=n?f.readInt32BE:f.readInt32LE,u=0;u<f.length;u+=i)d.push(l.call(f,u));return d}function o(f,n,o){for(var d=new e(n),i=o?d.writeInt32BE:d.writeInt32LE,t=0;t<f.length;t++)i.call(d,f[t],4*t,!0);return d}function d(f,d,i,t){e.isBuffer(f)||(f=new e(f));var u=d(n(f,t),f.length*l);return o(u,i,t)}var i=4,t=new e(i);t.fill(0);var l=8;f.exports={hash:d}}).call(this,e("buffer").Buffer)},{buffer:150}],157:[function(e,f,n){(function(f){function o(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function d(e,f){for(var n in e)f(e[n],n)}var i=e("./rng");n.createHash=e("./create-hash"),n.createHmac=e("./create-hmac"),n.randomBytes=function(e,n){if(!n||!n.call)return new f(i(e));try{n.call(this,void 0,new f(i(e)))}catch(o){n(o)}},n.getHashes=function(){return["sha1","sha256","md5","rmd160"]};var t=e("./pbkdf2")(n.createHmac);n.pbkdf2=t.pbkdf2,n.pbkdf2Sync=t.pbkdf2Sync,d(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(e){n[e]=function(){o("sorry,",e,"is not implemented yet")}})}).call(this,e("buffer").Buffer)},{"./create-hash":154,"./create-hmac":155,"./pbkdf2":165,"./rng":166,buffer:150}],158:[function(e,f){function n(e,f){e[f>>5]|=128<<f%32,e[(f+64>>>9<<4)+14]=f;for(var n=1732584193,o=-271733879,p=-1732584194,s=271733878,y=0;y<e.length;y+=16){var c=n,a=o,r=p,w=s;n=d(n,o,p,s,e[y+0],7,-680876936),s=d(s,n,o,p,e[y+1],12,-389564586),p=d(p,s,n,o,e[y+2],17,606105819),o=d(o,p,s,n,e[y+3],22,-1044525330),n=d(n,o,p,s,e[y+4],7,-176418897),s=d(s,n,o,p,e[y+5],12,1200080426),p=d(p,s,n,o,e[y+6],17,-1473231341),o=d(o,p,s,n,e[y+7],22,-45705983),n=d(n,o,p,s,e[y+8],7,1770035416),s=d(s,n,o,p,e[y+9],12,-1958414417),p=d(p,s,n,o,e[y+10],17,-42063),o=d(o,p,s,n,e[y+11],22,-1990404162),n=d(n,o,p,s,e[y+12],7,1804603682),s=d(s,n,o,p,e[y+13],12,-40341101),p=d(p,s,n,o,e[y+14],17,-1502002290),o=d(o,p,s,n,e[y+15],22,1236535329),n=i(n,o,p,s,e[y+1],5,-165796510),s=i(s,n,o,p,e[y+6],9,-1069501632),p=i(p,s,n,o,e[y+11],14,643717713),o=i(o,p,s,n,e[y+0],20,-373897302),n=i(n,o,p,s,e[y+5],5,-701558691),s=i(s,n,o,p,e[y+10],9,38016083),p=i(p,s,n,o,e[y+15],14,-660478335),o=i(o,p,s,n,e[y+4],20,-405537848),n=i(n,o,p,s,e[y+9],5,568446438),s=i(s,n,o,p,e[y+14],9,-1019803690),p=i(p,s,n,o,e[y+3],14,-187363961),o=i(o,p,s,n,e[y+8],20,1163531501),n=i(n,o,p,s,e[y+13],5,-1444681467),s=i(s,n,o,p,e[y+2],9,-51403784),p=i(p,s,n,o,e[y+7],14,1735328473),o=i(o,p,s,n,e[y+12],20,-1926607734),n=t(n,o,p,s,e[y+5],4,-378558),s=t(s,n,o,p,e[y+8],11,-2022574463),p=t(p,s,n,o,e[y+11],16,1839030562),o=t(o,p,s,n,e[y+14],23,-35309556),n=t(n,o,p,s,e[y+1],4,-1530992060),s=t(s,n,o,p,e[y+4],11,1272893353),p=t(p,s,n,o,e[y+7],16,-155497632),o=t(o,p,s,n,e[y+10],23,-1094730640),n=t(n,o,p,s,e[y+13],4,681279174),s=t(s,n,o,p,e[y+0],11,-358537222),p=t(p,s,n,o,e[y+3],16,-722521979),o=t(o,p,s,n,e[y+6],23,76029189),n=t(n,o,p,s,e[y+9],4,-640364487),s=t(s,n,o,p,e[y+12],11,-421815835),p=t(p,s,n,o,e[y+15],16,530742520),o=t(o,p,s,n,e[y+2],23,-995338651),n=l(n,o,p,s,e[y+0],6,-198630844),s=l(s,n,o,p,e[y+7],10,1126891415),p=l(p,s,n,o,e[y+14],15,-1416354905),o=l(o,p,s,n,e[y+5],21,-57434055),n=l(n,o,p,s,e[y+12],6,1700485571),s=l(s,n,o,p,e[y+3],10,-1894986606),p=l(p,s,n,o,e[y+10],15,-1051523),o=l(o,p,s,n,e[y+1],21,-2054922799),n=l(n,o,p,s,e[y+8],6,1873313359),s=l(s,n,o,p,e[y+15],10,-30611744),p=l(p,s,n,o,e[y+6],15,-1560198380),o=l(o,p,s,n,e[y+13],21,1309151649),n=l(n,o,p,s,e[y+4],6,-145523070),s=l(s,n,o,p,e[y+11],10,-1120210379),p=l(p,s,n,o,e[y+2],15,718787259),o=l(o,p,s,n,e[y+9],21,-343485551),n=u(n,c),o=u(o,a),p=u(p,r),s=u(s,w)}return Array(n,o,p,s)}function o(e,f,n,o,d,i){return u(p(u(u(f,e),u(o,i)),d),n)}function d(e,f,n,d,i,t,l){return o(f&n|~f&d,e,f,i,t,l)}function i(e,f,n,d,i,t,l){return o(f&d|n&~d,e,f,i,t,l)}function t(e,f,n,d,i,t,l){return o(f^n^d,e,f,i,t,l)}function l(e,f,n,d,i,t,l){return o(n^(f|~d),e,f,i,t,l)}function u(e,f){var n=(65535&e)+(65535&f),o=(e>>16)+(f>>16)+(n>>16);return o<<16|65535&n}function p(e,f){return e<<f|e>>>32-f}var s=e("./helpers");f.exports=function(e){return s.hash(e,n,16)}},{"./helpers":156}],159:[function(e,f){(function(e){function n(e,f,n){return e^f^n}function o(e,f,n){return e&f|~e&n}function d(e,f,n){return(e|~f)^n}function i(e,f,n){return e&n|f&~n}function t(e,f,n){return e^(f|~n)}function l(e,f){return e<<f|e>>>32-f}function u(f){var n=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof f&&(f=new e(f,"utf8"));var o=w(f),d=8*f.length,i=8*f.length;o[d>>>5]|=128<<24-d%32,o[(d+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);for(var t=0;t<o.length;t+=16)m(n,o,t);for(var t=0;5>t;t++){var l=n[t];n[t]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var u=b(n);return new e(u)}f.exports=u;var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],a=[0,1518500249,1859775393,2400959708,2840853838],r=[1352829926,1548603684,1836072691,2053994217,0],w=function(e){for(var f=[],n=0,o=0;n<e.length;n++,o+=8)f[o>>>5]|=e[n]<<24-o%32;return f},b=function(e){for(var f=[],n=0;n<32*e.length;n+=8)f.push(e[n>>>5]>>>24-n%32&255);return f},m=function(e,f,u){for(var w=0;16>w;w++){var b=u+w,m=f[b];f[b]=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8)}var g,x,P,j,v,M,X,h,k,q;M=g=e[0],X=x=e[1],h=P=e[2],k=j=e[3],q=v=e[4];for(var z,w=0;80>w;w+=1)z=g+f[u+p[w]]|0,z+=16>w?n(x,P,j)+a[0]:32>w?o(x,P,j)+a[1]:48>w?d(x,P,j)+a[2]:64>w?i(x,P,j)+a[3]:t(x,P,j)+a[4],z=0|z,z=l(z,y[w]),z=z+v|0,g=v,v=j,j=l(P,10),P=x,x=z,z=M+f[u+s[w]]|0,z+=16>w?t(X,h,k)+r[0]:32>w?i(X,h,k)+r[1]:48>w?d(X,h,k)+r[2]:64>w?o(X,h,k)+r[3]:n(X,h,k)+r[4],z=0|z,z=l(z,c[w]),z=z+q|0,M=q,q=k,k=l(h,10),h=X,X=z;z=e[1]+P+k|0,e[1]=e[2]+j+q|0,e[2]=e[3]+v+M|0,e[3]=e[4]+g+X|0,e[4]=e[0]+x+h|0,e[0]=z}}).call(this,e("buffer").Buffer)},{buffer:150}],160:[function(e,f){var n=e("./util"),o=n.write,d=n.zeroFill;f.exports=function(e){function f(f,n){this._block=new e(f),this._finalSize=n,this._blockSize=f,this._len=0,this._s=0}function i(e,f){return null==f?e.byteLength||e.length:"ascii"==f||"binary"==f?e.length:"hex"==f?e.length/2:"base64"==f?e.length/3:void 0}return f.prototype.init=function(){this._s=0,this._len=0},f.prototype.update=function(f,n){var d,t=this._blockSize;n||"string"!=typeof f||(n="utf8"),n?("utf-8"===n&&(n="utf8"),("base64"===n||"utf8"===n)&&(f=new e(f,n),n=null),d=i(f,n)):d=f.byteLength||f.length;for(var l=this._len+=d,u=this._s=this._s||0,p=0,s=this._block;l>u;){var y=Math.min(d,p+t);o(s,f,n,u%t,p,y);var c=y-p;u+=c,p+=c,u%t||this._update(s)}return this._s=u,this},f.prototype.digest=function(e){var f=this._blockSize,o=this._finalSize,i=8*this._len,t=this._block,l=i%(8*f);t[this._len%f]=128,d(this._block,this._len%f+1),l>=8*o&&(this._update(this._block),n.zeroFill(this._block,0)),t.writeInt32BE(i,o+4);var u=this._update(this._block)||this._hash();return null==e?u:u.toString(e)},f.prototype._update=function(){throw new Error("_update must be implemented by subclass")},f}},{"./util":164}],161:[function(e,f,n){var n=f.exports=function(e){var f=n[e];if(!f)throw new Error(e+" is not supported (we accept pull requests)");return new f},o=e("buffer").Buffer,d=e("./hash")(o);n.sha=n.sha1=e("./sha1")(o,d),n.sha256=e("./sha256")(o,d)},{"./hash":160,"./sha1":162,"./sha256":163,buffer:150}],162:[function(e,f){f.exports=function(f,n){function o(){return w.length?w.pop().init():this instanceof o?(this._w=r,n.call(this,64,56),this._h=null,void this.init()):new o}function d(e,f,n,o){return 20>e?f&n|~f&o:40>e?f^n^o:60>e?f&n|f&o|n&o:f^n^o}function i(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function t(e,f){return e+f|0}function l(e,f){return e<<f|e>>>32-f}var u=e("util").inherits;u(o,n);var p=0,s=4,y=8,c=12,a=16,r=new Int32Array(80),w=[];o.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,n.prototype.init.call(this),this},o.prototype._POOL=w;new f(1)instanceof DataView;return o.prototype._update=function(){{var e,f,n,o,u,p,s,y,c,a,r=this._block;this._h}e=p=this._a,f=s=this._b,n=y=this._c,o=c=this._d,u=a=this._e;for(var w=this._w,b=0;80>b;b++){var m=w[b]=16>b?r.readInt32BE(4*b):l(w[b-3]^w[b-8]^w[b-14]^w[b-16],1),g=t(t(l(e,5),d(b,f,n,o)),t(t(u,m),i(b)));u=o,o=n,n=l(f,30),f=e,e=g}this._a=t(e,p),this._b=t(f,s),this._c=t(n,y),this._d=t(o,c),this._e=t(u,a)},o.prototype._hash=function(){w.length<100&&w.push(this);var e=new f(20);return e.writeInt32BE(0|this._a,p),e.writeInt32BE(0|this._b,s),e.writeInt32BE(0|this._c,y),e.writeInt32BE(0|this._d,c),e.writeInt32BE(0|this._e,a),e},o}},{util:186}],163:[function(e,f){{var n=e("util").inherits;e("./util")}f.exports=function(e,f){function o(){r.length,this.init(),this._w=a,f.call(this,64,56)}function d(e,f){return e>>>f|e<<32-f}function i(e,f){return e>>>f}function t(e,f,n){return e&f^~e&n}function l(e,f,n){return e&f^e&n^f&n}function u(e){return d(e,2)^d(e,13)^d(e,22)}function p(e){return d(e,6)^d(e,11)^d(e,25)}function s(e){return d(e,7)^d(e,18)^i(e,3)}function y(e){return d(e,17)^d(e,19)^i(e,10)}var c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];n(o,f);var a=new Array(64),r=[];o.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this};return o.prototype._update=function(){var e,f,n,o,d,i,a,r,w,b,m=this._block,g=this._w;e=0|this._a,f=0|this._b,n=0|this._c,o=0|this._d,d=0|this._e,i=0|this._f,a=0|this._g,r=0|this._h;for(var x=0;64>x;x++){var P=g[x]=16>x?m.readInt32BE(4*x):y(g[x-2])+g[x-7]+s(g[x-15])+g[x-16];w=r+p(d)+t(d,i,a)+c[x]+P,b=u(e)+l(e,f,n),r=a,a=i,i=d,d=o+w,o=n,n=f,f=e,e=w+b}this._a=e+this._a|0,this._b=f+this._b|0,this._c=n+this._c|0,this._d=o+this._d|0,this._e=d+this._e|0,this._f=i+this._f|0,this._g=a+this._g|0,this._h=r+this._h|0},o.prototype._hash=function(){r.length<10&&r.push(this);var f=new e(32);return f.writeInt32BE(this._a,0),f.writeInt32BE(this._b,4),f.writeInt32BE(this._c,8),f.writeInt32BE(this._d,12),f.writeInt32BE(this._e,16),f.writeInt32BE(this._f,20),f.writeInt32BE(this._g,24),f.writeInt32BE(this._h,28),f},o}},{"./util":164,util:186}],164:[function(e,f,n){function o(e,f,n,o,d,i){var t=i-d;if("ascii"===n||"binary"===n)for(var l=0;t>l;l++)e[o+l]=f.charCodeAt(l+d);else if(null==n)for(var l=0;t>l;l++)e[o+l]=f[l+d];else{if("hex"!==n)throw new Error("base64"===n?"base64 encoding not yet supported":n+" encoding not yet supported");for(var l=0;t>l;l++){var u=d+l;e[o+l]=parseInt(f[2*u]+f[2*u+1],16)}}}function d(e,f){for(var n=f;n<e.length;n++)e[n]=0}n.write=o,n.zeroFill=d,n.toString=toString},{}],165:[function(e,f){(function(e){var n=64,o=new e(n);o.fill(0),f.exports=function(f,d){return d=d||{},d.pbkdf2=function(e,f,n,o,i){if("function"!=typeof i)throw new Error("No callback provided to pbkdf2");setTimeout(function(){i(null,d.pbkdf2Sync(e,f,n,o))})},d.pbkdf2Sync=function(d,i,t,l){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(0>t)throw new TypeError("Bad iterations");if("number"!=typeof l)throw new TypeError("Key length not a number");if(0>l)throw new TypeError("Bad key length");var d=e.isBuffer(d)?d:new e(d);d.length>n?d=createHash(alg).update(d).digest():d.length<n&&(d=e.concat([d,o],n));var u,p,s,y=0,c=1,a=new e(4),r=new e(l);for(r.fill(0);l;){p=l>20?20:l,a[0]=c>>24&255,a[1]=c>>16&255,a[2]=c>>8&255,a[3]=255&c,u=f("sha1",d),u.update(i),u.update(a),s=u.digest(),s.copy(r,y,0,p);for(var w=1;t>w;w++){u=f("sha1",d),u.update(s),s=u.digest();for(var b=0;p>b;b++)r[b]^=s[b]}l-=p,c++,y+=p}return r},d}}).call(this,e("buffer").Buffer)},{buffer:150}],166:[function(e,f){(function(e){!function(){var n,o,d=this;n=function(f){for(var n,n,o=new e(f),d=0;f>d;d++)0==(3&d)&&(n=4294967296*Math.random()),o[d]=n>>>((3&d)<<3)&255;return o},d.crypto&&crypto.getRandomValues&&(o=function(f){var n=new e(f);return crypto.getRandomValues(n),n}),f.exports=o||n}()}).call(this,e("buffer").Buffer)},{buffer:150}],167:[function(e,f){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0
}function o(e){return"function"==typeof e}function d(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function t(e){return void 0===e}f.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!d(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var f,n,d,l,u,p;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(f=arguments[1],f instanceof Error)throw f;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],t(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,l=new Array(d-1),u=1;d>u;u++)l[u-1]=arguments[u];n.apply(this,l)}else if(i(n)){for(d=arguments.length,l=new Array(d-1),u=1;d>u;u++)l[u-1]=arguments[u];for(p=n.slice(),d=p.length,u=0;d>u;u++)p[u].apply(this,l)}return!0},n.prototype.addListener=function(e,f){var d;if(!o(f))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(f.listener)?f.listener:f),this._events[e]?i(this._events[e])?this._events[e].push(f):this._events[e]=[this._events[e],f]:this._events[e]=f,i(this._events[e])&&!this._events[e].warned){var d;d=t(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,d&&d>0&&this._events[e].length>d&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,f){function n(){this.removeListener(e,n),d||(d=!0,f.apply(this,arguments))}if(!o(f))throw TypeError("listener must be a function");var d=!1;return n.listener=f,this.on(e,n),this},n.prototype.removeListener=function(e,f){var n,d,t,l;if(!o(f))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],t=n.length,d=-1,n===f||o(n.listener)&&n.listener===f)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,f);else if(i(n)){for(l=t;l-->0;)if(n[l]===f||n[l].listener&&n[l].listener===f){d=l;break}if(0>d)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(d,1),this._events.removeListener&&this.emit("removeListener",e,f)}return this},n.prototype.removeAllListeners=function(e){var f,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(f in this._events)"removeListener"!==f&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],o(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var f;return f=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,f){var n;return n=e._events&&e._events[f]?o(e._events[f])?1:e._events[f].length:0}},{}],168:[function(e,f){f.exports="function"==typeof Object.create?function(e,f){e.super_=f,e.prototype=Object.create(f.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,f){e.super_=f;var n=function(){};n.prototype=f.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],169:[function(e,f){function n(){}var o=f.exports={};o.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,f="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(f){var n=[];return window.addEventListener("message",function(e){var f=e.source;if((f===window||null===f)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var o=n.shift();o()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=n,o.addListener=n,o.once=n,o.off=n,o.removeListener=n,o.removeAllListeners=n,o.emit=n,o.binding=function(){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(){throw new Error("process.chdir is not supported")}},{}],170:[function(e,f,n){(function(e){!function(o){function d(e){throw RangeError(E[e])}function i(e,f){for(var n=e.length;n--;)e[n]=f(e[n]);return e}function t(e,f){return i(e.split(D),f).join(".")}function l(e){for(var f,n,o=[],d=0,i=e.length;i>d;)f=e.charCodeAt(d++),f>=55296&&56319>=f&&i>d?(n=e.charCodeAt(d++),56320==(64512&n)?o.push(((1023&f)<<10)+(1023&n)+65536):(o.push(f),d--)):o.push(f);return o}function u(e){return i(e,function(e){var f="";return e>65535&&(e-=65536,f+=H(e>>>10&1023|55296),e=56320|1023&e),f+=H(e)}).join("")}function p(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:v}function s(e,f){return e+22+75*(26>e)-((0!=f)<<5)}function y(e,f,n){var o=0;for(e=n?G(e/k):e>>1,e+=G(e/f);e>F*X>>1;o+=v)e=G(e/F);return G(o+(F+1)*e/(e+h))}function c(e){var f,n,o,i,t,l,s,c,a,r,w=[],b=e.length,m=0,g=z,x=q;for(n=e.lastIndexOf(A),0>n&&(n=0),o=0;n>o;++o)e.charCodeAt(o)>=128&&d("not-basic"),w.push(e.charCodeAt(o));for(i=n>0?n+1:0;b>i;){for(t=m,l=1,s=v;i>=b&&d("invalid-input"),c=p(e.charCodeAt(i++)),(c>=v||c>G((j-m)/l))&&d("overflow"),m+=c*l,a=x>=s?M:s>=x+X?X:s-x,!(a>c);s+=v)r=v-a,l>G(j/r)&&d("overflow"),l*=r;f=w.length+1,x=y(m-t,f,0==t),G(m/f)>j-g&&d("overflow"),g+=G(m/f),m%=f,w.splice(m++,0,g)}return u(w)}function a(e){var f,n,o,i,t,u,p,c,a,r,w,b,m,g,x,P=[];for(e=l(e),b=e.length,f=z,n=0,t=q,u=0;b>u;++u)w=e[u],128>w&&P.push(H(w));for(o=i=P.length,i&&P.push(A);b>o;){for(p=j,u=0;b>u;++u)w=e[u],w>=f&&p>w&&(p=w);for(m=o+1,p-f>G((j-n)/m)&&d("overflow"),n+=(p-f)*m,f=p,u=0;b>u;++u)if(w=e[u],f>w&&++n>j&&d("overflow"),w==f){for(c=n,a=v;r=t>=a?M:a>=t+X?X:a-t,!(r>c);a+=v)x=c-r,g=v-r,P.push(H(s(r+x%g,0))),c=G(x/g);P.push(H(s(c,0))),t=y(n,m,o==i),n=0,++o}++n,++f}return P.join("")}function r(e){return t(e,function(e){return B.test(e)?c(e.slice(4).toLowerCase()):e})}function w(e){return t(e,function(e){return C.test(e)?"xn--"+a(e):e})}var b="object"==typeof n&&n,m="object"==typeof f&&f&&f.exports==b&&f,g="object"==typeof e&&e;(g.global===g||g.window===g)&&(o=g);var x,P,j=2147483647,v=36,M=1,X=26,h=38,k=700,q=72,z=128,A="-",B=/^xn--/,C=/[^ -~]/,D=/\x2E|\u3002|\uFF0E|\uFF61/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=v-M,G=Math.floor,H=String.fromCharCode;if(x={version:"1.2.4",ucs2:{decode:l,encode:u},decode:c,encode:a,toASCII:w,toUnicode:r},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return x});else if(b&&!b.nodeType)if(m)m.exports=x;else for(P in x)x.hasOwnProperty(P)&&(b[P]=x[P]);else o.punycode=x}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],171:[function(e,f){f.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":172}],172:[function(e,f){(function(n){function o(e){return this instanceof o?(u.call(this,e),p.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",d)):new o(e)}function d(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function i(e,f){for(var n=0,o=e.length;o>n;n++)f(e[n],n)}f.exports=o;var t=Object.keys||function(e){var f=[];for(var n in e)f.push(n);return f},l=e("core-util-is");l.inherits=e("inherits");var u=e("./_stream_readable"),p=e("./_stream_writable");l.inherits(o,u),i(t(p.prototype),function(e){o.prototype[e]||(o.prototype[e]=p.prototype[e])})}).call(this,e("FWaASH"))},{"./_stream_readable":174,"./_stream_writable":176,FWaASH:169,"core-util-is":177,inherits:168}],173:[function(e,f){function n(e){return this instanceof n?void o.call(this,e):new n(e)}f.exports=n;var o=e("./_stream_transform"),d=e("core-util-is");d.inherits=e("inherits"),d.inherits(n,o),n.prototype._transform=function(e,f,n){n(null,e)}},{"./_stream_transform":175,"core-util-is":177,inherits:168}],174:[function(e,f){(function(n){function o(f){f=f||{};var n=f.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!f.objectMode,this.defaultEncoding=f.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,f.encoding&&(z||(z=e("string_decoder/").StringDecoder),this.decoder=new z(f.encoding),this.encoding=f.encoding)}function d(e){return this instanceof d?(this._readableState=new o(e,this),this.readable=!0,void k.call(this)):new d(e)}function i(e,f,n,o,d){var i=p(f,n);if(i)e.emit("error",i);else if(null===n||void 0===n)f.reading=!1,f.ended||s(e,f);else if(f.objectMode||n&&n.length>0)if(f.ended&&!d){var l=new Error("stream.push() after EOF");e.emit("error",l)}else if(f.endEmitted&&d){var l=new Error("stream.unshift() after end event");e.emit("error",l)}else!f.decoder||d||o||(n=f.decoder.write(n)),f.length+=f.objectMode?1:n.length,d?f.buffer.unshift(n):(f.reading=!1,f.buffer.push(n)),f.needReadable&&y(e),a(e,f);else d||(f.reading=!1);return t(f)}function t(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function l(e){if(e>=A)e=A;else{e--;for(var f=1;32>f;f<<=1)e|=e>>f;e++}return e}function u(e,f){return 0===f.length&&f.ended?0:f.objectMode?0===e?0:1:null===e||isNaN(e)?f.flowing&&f.buffer.length?f.buffer[0].length:f.length:0>=e?0:(e>f.highWaterMark&&(f.highWaterMark=l(e)),e>f.length?f.ended?f.length:(f.needReadable=!0,0):e)}function p(e,f){var n=null;return X.isBuffer(f)||"string"==typeof f||null===f||void 0===f||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function s(e,f){if(f.decoder&&!f.ended){var n=f.decoder.end();n&&n.length&&(f.buffer.push(n),f.length+=f.objectMode?1:n.length)}f.ended=!0,f.length>0?y(e):P(e)}function y(e){var f=e._readableState;f.needReadable=!1,f.emittedReadable||(f.emittedReadable=!0,f.sync?n.nextTick(function(){c(e)}):c(e))}function c(e){e.emit("readable")}function a(e,f){f.readingMore||(f.readingMore=!0,n.nextTick(function(){r(e,f)}))}function r(e,f){for(var n=f.length;!f.reading&&!f.flowing&&!f.ended&&f.length<f.highWaterMark&&(e.read(0),n!==f.length);)n=f.length;f.readingMore=!1}function w(e){return function(){var f=e._readableState;f.awaitDrain--,0===f.awaitDrain&&b(e)}}function b(e){function f(e){var f=e.write(n);!1===f&&o.awaitDrain++}var n,o=e._readableState;for(o.awaitDrain=0;o.pipesCount&&null!==(n=e.read());)if(1===o.pipesCount?f(o.pipes,0,null):j(o.pipes,f),e.emit("data",n),o.awaitDrain>0)return;return 0===o.pipesCount?(o.flowing=!1,void(h.listenerCount(e,"data")>0&&g(e))):void(o.ranOut=!0)}function m(){this._readableState.ranOut&&(this._readableState.ranOut=!1,b(this))}function g(e,f){var o=e._readableState;if(o.flowing)throw new Error("Cannot switch to old mode now.");var d=f||!1,i=!1;e.readable=!0,e.pipe=k.prototype.pipe,e.on=e.addListener=k.prototype.on,e.on("readable",function(){i=!0;for(var f;!d&&null!==(f=e.read());)e.emit("data",f);null===f&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){d=!0,this.emit("pause")},e.resume=function(){d=!1,i?n.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function x(e,f){var n,o=f.buffer,d=f.length,i=!!f.decoder,t=!!f.objectMode;if(0===o.length)return null;if(0===d)n=null;else if(t)n=o.shift();else if(!e||e>=d)n=i?o.join(""):X.concat(o,d),o.length=0;else if(e<o[0].length){var l=o[0];n=l.slice(0,e),o[0]=l.slice(e)}else if(e===o[0].length)n=o.shift();else{n=i?"":new X(e);for(var u=0,p=0,s=o.length;s>p&&e>u;p++){var l=o[0],y=Math.min(e-u,l.length);i?n+=l.slice(0,y):l.copy(n,u,0,y),y<l.length?o[0]=l.slice(y):o.shift(),u+=y}}return n}function P(e){var f=e._readableState;if(f.length>0)throw new Error("endReadable called on non-empty stream");!f.endEmitted&&f.calledRead&&(f.ended=!0,n.nextTick(function(){f.endEmitted||0!==f.length||(f.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function j(e,f){for(var n=0,o=e.length;o>n;n++)f(e[n],n)}function v(e,f){for(var n=0,o=e.length;o>n;n++)if(e[n]===f)return n;return-1}f.exports=d;var M=e("isarray"),X=e("buffer").Buffer;d.ReadableState=o;var h=e("events").EventEmitter;h.listenerCount||(h.listenerCount=function(e,f){return e.listeners(f).length});var k=e("stream"),q=e("core-util-is");q.inherits=e("inherits");var z;q.inherits(d,k),d.prototype.push=function(e,f){var n=this._readableState;return"string"!=typeof e||n.objectMode||(f=f||n.defaultEncoding,f!==n.encoding&&(e=new X(e,f),f="")),i(this,n,e,f,!1)},d.prototype.unshift=function(e){var f=this._readableState;return i(this,f,e,"",!0)},d.prototype.setEncoding=function(f){z||(z=e("string_decoder/").StringDecoder),this._readableState.decoder=new z(f),this._readableState.encoding=f};var A=8388608;d.prototype.read=function(e){var f=this._readableState;f.calledRead=!0;var n,o=e;if(("number"!=typeof e||e>0)&&(f.emittedReadable=!1),0===e&&f.needReadable&&(f.length>=f.highWaterMark||f.ended))return y(this),null;if(e=u(e,f),0===e&&f.ended)return n=null,f.length>0&&f.decoder&&(n=x(e,f),f.length-=n.length),0===f.length&&P(this),n;var d=f.needReadable;return f.length-e<=f.highWaterMark&&(d=!0),(f.ended||f.reading)&&(d=!1),d&&(f.reading=!0,f.sync=!0,0===f.length&&(f.needReadable=!0),this._read(f.highWaterMark),f.sync=!1),d&&!f.reading&&(e=u(o,f)),n=e>0?x(e,f):null,null===n&&(f.needReadable=!0,e=0),f.length-=e,0!==f.length||f.ended||(f.needReadable=!0),f.ended&&!f.endEmitted&&0===f.length&&P(this),n},d.prototype._read=function(){this.emit("error",new Error("not implemented"))},d.prototype.pipe=function(e,f){function o(e){e===s&&i()}function d(){e.end()}function i(){e.removeListener("close",l),e.removeListener("finish",u),e.removeListener("drain",r),e.removeListener("error",t),e.removeListener("unpipe",o),s.removeListener("end",d),s.removeListener("end",i),(!e._writableState||e._writableState.needDrain)&&r()}function t(f){p(),e.removeListener("error",t),0===h.listenerCount(e,"error")&&e.emit("error",f)}function l(){e.removeListener("finish",u),p()}function u(){e.removeListener("close",l),p()}function p(){s.unpipe(e)}var s=this,y=this._readableState;switch(y.pipesCount){case 0:y.pipes=e;break;case 1:y.pipes=[y.pipes,e];break;default:y.pipes.push(e)}y.pipesCount+=1;var c=(!f||f.end!==!1)&&e!==n.stdout&&e!==n.stderr,a=c?d:i;y.endEmitted?n.nextTick(a):s.once("end",a),e.on("unpipe",o);var r=w(s);return e.on("drain",r),e._events&&e._events.error?M(e._events.error)?e._events.error.unshift(t):e._events.error=[t,e._events.error]:e.on("error",t),e.once("close",l),e.once("finish",u),e.emit("pipe",s),y.flowing||(this.on("readable",m),y.flowing=!0,n.nextTick(function(){b(s)})),e},d.prototype.unpipe=function(e){var f=this._readableState;if(0===f.pipesCount)return this;if(1===f.pipesCount)return e&&e!==f.pipes?this:(e||(e=f.pipes),f.pipes=null,f.pipesCount=0,this.removeListener("readable",m),f.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=f.pipes,o=f.pipesCount;f.pipes=null,f.pipesCount=0,this.removeListener("readable",m),f.flowing=!1;for(var d=0;o>d;d++)n[d].emit("unpipe",this);return this}var d=v(f.pipes,e);return-1===d?this:(f.pipes.splice(d,1),f.pipesCount-=1,1===f.pipesCount&&(f.pipes=f.pipes[0]),e.emit("unpipe",this),this)},d.prototype.on=function(e,f){var n=k.prototype.on.call(this,e,f);if("data"!==e||this._readableState.flowing||g(this),"readable"===e&&this.readable){var o=this._readableState;o.readableListening||(o.readableListening=!0,o.emittedReadable=!1,o.needReadable=!0,o.reading?o.length&&y(this,o):this.read(0))}return n},d.prototype.addListener=d.prototype.on,d.prototype.resume=function(){g(this),this.read(0),this.emit("resume")},d.prototype.pause=function(){g(this,!0),this.emit("pause")},d.prototype.wrap=function(e){var f=this._readableState,n=!1,o=this;e.on("end",function(){if(f.decoder&&!f.ended){var e=f.decoder.end();e&&e.length&&o.push(e)}o.push(null)}),e.on("data",function(d){if(f.decoder&&(d=f.decoder.write(d)),(!f.objectMode||null!==d&&void 0!==d)&&(f.objectMode||d&&d.length)){var i=o.push(d);i||(n=!0,e.pause())}});for(var d in e)"function"==typeof e[d]&&"undefined"==typeof this[d]&&(this[d]=function(f){return function(){return e[f].apply(e,arguments)}}(d));var i=["error","close","destroy","pause","resume"];return j(i,function(f){e.on(f,o.emit.bind(o,f))}),o._read=function(){n&&(n=!1,e.resume())},o},d._fromList=x}).call(this,e("FWaASH"))},{FWaASH:169,buffer:150,"core-util-is":177,events:167,inherits:168,isarray:178,stream:184,"string_decoder/":179}],175:[function(e,f){function n(e,f){this.afterTransform=function(e,n){return o(f,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function o(e,f,n){var o=e._transformState;o.transforming=!1;var d=o.writecb;if(!d)return e.emit("error",new Error("no writecb in Transform class"));o.writechunk=null,o.writecb=null,null!==n&&void 0!==n&&e.push(n),d&&d(f);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function d(e){if(!(this instanceof d))return new d(e);t.call(this,e);var f=(this._transformState=new n(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){i(f,e)}):i(f)})}function i(e,f){if(f)return e.emit("error",f);var n=e._writableState,o=(e._readableState,e._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(o.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}f.exports=d;var t=e("./_stream_duplex"),l=e("core-util-is");l.inherits=e("inherits"),l.inherits(d,t),d.prototype.push=function(e,f){return this._transformState.needTransform=!1,t.prototype.push.call(this,e,f)},d.prototype._transform=function(){throw new Error("not implemented")},d.prototype._write=function(e,f,n){var o=this._transformState;if(o.writecb=n,o.writechunk=e,o.writeencoding=f,!o.transforming){var d=this._readableState;(o.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},d.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":172,"core-util-is":177,inherits:168}],176:[function(e,f){(function(n){function o(e,f,n){this.chunk=e,this.encoding=f,this.callback=n}function d(e,f){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){a(f,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function i(f){var n=e("./_stream_duplex");return this instanceof i||this instanceof n?(this._writableState=new d(f,this),this.writable=!0,void v.call(this)):new i(f)}function t(e,f,o){var d=new Error("write after end");e.emit("error",d),n.nextTick(function(){o(d)})}function l(e,f,o,d){var i=!0;if(!P.isBuffer(o)&&"string"!=typeof o&&null!==o&&void 0!==o&&!f.objectMode){var t=new TypeError("Invalid non-string/buffer chunk");e.emit("error",t),n.nextTick(function(){d(t)}),i=!1}return i}function u(e,f,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof f||(f=new P(f,n)),f}function p(e,f,n,d,i){n=u(f,n,d),P.isBuffer(n)&&(d="buffer");var t=f.objectMode?1:n.length;f.length+=t;var l=f.length<f.highWaterMark;return l||(f.needDrain=!0),f.writing?f.buffer.push(new o(n,d,i)):s(e,f,t,n,d,i),l}function s(e,f,n,o,d,i){f.writelen=n,f.writecb=i,f.writing=!0,f.sync=!0,e._write(o,d,f.onwrite),f.sync=!1}function y(e,f,o,d,i){o?n.nextTick(function(){i(d)}):i(d),e._writableState.errorEmitted=!0,e.emit("error",d)}function c(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function a(e,f){var o=e._writableState,d=o.sync,i=o.writecb;if(c(o),f)y(e,o,d,f,i);else{var t=m(e,o);t||o.bufferProcessing||!o.buffer.length||b(e,o),d?n.nextTick(function(){r(e,o,t,i)}):r(e,o,t,i)}}function r(e,f,n,o){n||w(e,f),o(),n&&g(e,f)}function w(e,f){0===f.length&&f.needDrain&&(f.needDrain=!1,e.emit("drain"))}function b(e,f){f.bufferProcessing=!0;for(var n=0;n<f.buffer.length;n++){var o=f.buffer[n],d=o.chunk,i=o.encoding,t=o.callback,l=f.objectMode?1:d.length;if(s(e,f,l,d,i,t),f.writing){n++;break}}f.bufferProcessing=!1,n<f.buffer.length?f.buffer=f.buffer.slice(n):f.buffer.length=0}function m(e,f){return f.ending&&0===f.length&&!f.finished&&!f.writing}function g(e,f){var n=m(e,f);return n&&(f.finished=!0,e.emit("finish")),n}function x(e,f,o){f.ending=!0,g(e,f),o&&(f.finished?n.nextTick(o):e.once("finish",o)),f.ended=!0}f.exports=i;var P=e("buffer").Buffer;i.WritableState=d;var j=e("core-util-is");j.inherits=e("inherits");var v=e("stream");j.inherits(i,v),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(e,f,n){var o=this._writableState,d=!1;return"function"==typeof f&&(n=f,f=null),P.isBuffer(e)?f="buffer":f||(f=o.defaultEncoding),"function"!=typeof n&&(n=function(){}),o.ended?t(this,o,n):l(this,o,e,n)&&(d=p(this,o,e,f,n)),d},i.prototype._write=function(e,f,n){n(new Error("not implemented"))},i.prototype.end=function(e,f,n){var o=this._writableState;"function"==typeof e?(n=e,e=null,f=null):"function"==typeof f&&(n=f,f=null),"undefined"!=typeof e&&null!==e&&this.write(e,f),o.ending||o.finished||x(this,o,n)}}).call(this,e("FWaASH"))},{"./_stream_duplex":172,FWaASH:169,buffer:150,"core-util-is":177,inherits:168,stream:184}],177:[function(e,f,n){(function(e){function f(e){return Array.isArray(e)}function o(e){return"boolean"==typeof e}function d(e){return null===e}function i(e){return null==e}function t(e){return"number"==typeof e}function l(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function p(e){return void 0===e}function s(e){return y(e)&&"[object RegExp]"===m(e)}function y(e){return"object"==typeof e&&null!==e}function c(e){return y(e)&&"[object Date]"===m(e)}function a(e){return y(e)&&("[object Error]"===m(e)||e instanceof Error)}function r(e){return"function"==typeof e}function w(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function b(f){return e.isBuffer(f)}function m(e){return Object.prototype.toString.call(e)}n.isArray=f,n.isBoolean=o,n.isNull=d,n.isNullOrUndefined=i,n.isNumber=t,n.isString=l,n.isSymbol=u,n.isUndefined=p,n.isRegExp=s,n.isObject=y,n.isDate=c,n.isError=a,n.isFunction=r,n.isPrimitive=w,n.isBuffer=b}).call(this,e("buffer").Buffer)},{buffer:150}],178:[function(e,f){f.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],179:[function(e,f,n){function o(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function d(e){return e.toString(this.encoding)}function i(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function t(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var l=e("buffer").Buffer,u=l.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},p=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),o(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=t;break;default:return void(this.write=d)}this.charBuffer=new l(6),this.charReceived=0,this.charLength=0};p.prototype.write=function(e){for(var f="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),f=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var o=f.charCodeAt(f.length-1);if(!(o>=55296&&56319>=o)){if(this.charReceived=this.charLength=0,0===e.length)return f;break}this.charLength+=this.surrogateSize,f=""}this.detectIncompleteChar(e);var d=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,d),d-=this.charReceived),f+=e.toString(this.encoding,0,d);var d=f.length-1,o=f.charCodeAt(d);if(o>=55296&&56319>=o){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),f.substring(0,d)}return f},p.prototype.detectIncompleteChar=function(e){for(var f=e.length>=3?3:e.length;f>0;f--){var n=e[e.length-f];if(1==f&&n>>5==6){this.charLength=2;break}if(2>=f&&n>>4==14){this.charLength=3;break}if(3>=f&&n>>3==30){this.charLength=4;break}}this.charReceived=f},p.prototype.end=function(e){var f="";if(e&&e.length&&(f=this.write(e)),this.charReceived){var n=this.charReceived,o=this.charBuffer,d=this.encoding;f+=o.slice(0,n).toString(d)}return f}},{buffer:150}],180:[function(e,f){f.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":173}],181:[function(e,f,n){var o=e("stream");n=f.exports=e("./lib/_stream_readable.js"),n.Stream=o,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":172,"./lib/_stream_passthrough.js":173,"./lib/_stream_readable.js":174,"./lib/_stream_transform.js":175,"./lib/_stream_writable.js":176,stream:184}],182:[function(e,f){f.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":175}],183:[function(e,f){f.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":176}],184:[function(e,f){function n(){o.call(this)}f.exports=n;var o=e("events").EventEmitter,d=e("inherits");d(n,o),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,f){function n(f){e.writable&&!1===e.write(f)&&p.pause&&p.pause()}function d(){p.readable&&p.resume&&p.resume()}function i(){s||(s=!0,e.end())}function t(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(u(),0===o.listenerCount(this,"error"))throw e}function u(){p.removeListener("data",n),e.removeListener("drain",d),p.removeListener("end",i),p.removeListener("close",t),p.removeListener("error",l),e.removeListener("error",l),p.removeListener("end",u),p.removeListener("close",u),e.removeListener("close",u)}var p=this;p.on("data",n),e.on("drain",d),e._isStdio||f&&f.end===!1||(p.on("end",i),p.on("close",t));var s=!1;return p.on("error",l),e.on("error",l),p.on("end",u),p.on("close",u),e.on("close",u),e.emit("pipe",p),e}},{events:167,inherits:168,"readable-stream/duplex.js":171,"readable-stream/passthrough.js":180,"readable-stream/readable.js":181,"readable-stream/transform.js":182,"readable-stream/writable.js":183}],185:[function(e,f){f.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],186:[function(e,f,n){(function(f,o){function d(e,f){var o={seen:[],stylize:t};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),w(f)?o.showHidden=f:f&&n._extend(o,f),j(o.showHidden)&&(o.showHidden=!1),j(o.depth)&&(o.depth=2),j(o.colors)&&(o.colors=!1),j(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=i),u(o,e,o.depth)}function i(e,f){var n=d.styles[f];return n?"["+d.colors[n][0]+"m"+e+"["+d.colors[n][1]+"m":e}function t(e){return e}function l(e){var f={};return e.forEach(function(e){f[e]=!0}),f}function u(e,f,o){if(e.customInspect&&f&&k(f.inspect)&&f.inspect!==n.inspect&&(!f.constructor||f.constructor.prototype!==f)){var d=f.inspect(o,e);return x(d)||(d=u(e,d,o)),d}var i=p(e,f);if(i)return i;var t=Object.keys(f),w=l(t);if(e.showHidden&&(t=Object.getOwnPropertyNames(f)),h(f)&&(t.indexOf("message")>=0||t.indexOf("description")>=0))return s(f);if(0===t.length){if(k(f)){var b=f.name?": "+f.name:"";return e.stylize("[Function"+b+"]","special")}if(v(f))return e.stylize(RegExp.prototype.toString.call(f),"regexp");if(X(f))return e.stylize(Date.prototype.toString.call(f),"date");if(h(f))return s(f)}var m="",g=!1,P=["{","}"];if(r(f)&&(g=!0,P=["[","]"]),k(f)){var j=f.name?": "+f.name:"";m=" [Function"+j+"]"}if(v(f)&&(m=" "+RegExp.prototype.toString.call(f)),X(f)&&(m=" "+Date.prototype.toUTCString.call(f)),h(f)&&(m=" "+s(f)),0===t.length&&(!g||0==f.length))return P[0]+m+P[1];if(0>o)return v(f)?e.stylize(RegExp.prototype.toString.call(f),"regexp"):e.stylize("[Object]","special");e.seen.push(f);var M;return M=g?y(e,f,o,w,t):t.map(function(n){return c(e,f,o,w,n,g)}),e.seen.pop(),a(M,m,P)}function p(e,f){if(j(f))return e.stylize("undefined","undefined");if(x(f)){var n="'"+JSON.stringify(f).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(f)?e.stylize(""+f,"number"):w(f)?e.stylize(""+f,"boolean"):b(f)?e.stylize("null","null"):void 0}function s(e){return"["+Error.prototype.toString.call(e)+"]"}function y(e,f,n,o,d){for(var i=[],t=0,l=f.length;l>t;++t)i.push(C(f,String(t))?c(e,f,n,o,String(t),!0):"");return d.forEach(function(d){d.match(/^\d+$/)||i.push(c(e,f,n,o,d,!0))}),i}function c(e,f,n,o,d,i){var t,l,p;if(p=Object.getOwnPropertyDescriptor(f,d)||{value:f[d]},p.get?l=p.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):p.set&&(l=e.stylize("[Setter]","special")),C(o,d)||(t="["+d+"]"),l||(e.seen.indexOf(p.value)<0?(l=b(n)?u(e,p.value,null):u(e,p.value,n-1),l.indexOf("\n")>-1&&(l=i?l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+l.split("\n").map(function(e){return"   "+e}).join("\n"))):l=e.stylize("[Circular]","special")),j(t)){if(i&&d.match(/^\d+$/))return l;t=JSON.stringify(""+d),t.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(t=t.substr(1,t.length-2),t=e.stylize(t,"name")):(t=t.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t=e.stylize(t,"string"))}return t+": "+l}function a(e,f,n){var o=0,d=e.reduce(function(e,f){return o++,f.indexOf("\n")>=0&&o++,e+f.replace(/\u001b\[\d\d?m/g,"").length+1},0);return d>60?n[0]+(""===f?"":f+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+f+" "+e.join(", ")+" "+n[1]}function r(e){return Array.isArray(e)}function w(e){return"boolean"==typeof e}function b(e){return null===e}function m(e){return null==e}function g(e){return"number"==typeof e}function x(e){return"string"==typeof e}function P(e){return"symbol"==typeof e}function j(e){return void 0===e}function v(e){return M(e)&&"[object RegExp]"===z(e)}function M(e){return"object"==typeof e&&null!==e}function X(e){return M(e)&&"[object Date]"===z(e)}function h(e){return M(e)&&("[object Error]"===z(e)||e instanceof Error)}function k(e){return"function"==typeof e}function q(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e
}function z(e){return Object.prototype.toString.call(e)}function A(e){return 10>e?"0"+e.toString(10):e.toString(10)}function B(){var e=new Date,f=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),G[e.getMonth()],f].join(" ")}function C(e,f){return Object.prototype.hasOwnProperty.call(e,f)}var D=/%[sdj%]/g;n.format=function(e){if(!x(e)){for(var f=[],n=0;n<arguments.length;n++)f.push(d(arguments[n]));return f.join(" ")}for(var n=1,o=arguments,i=o.length,t=String(e).replace(D,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(f){return"[Circular]"}default:return e}}),l=o[n];i>n;l=o[++n])t+=b(l)||!M(l)?" "+l:" "+d(l);return t},n.deprecate=function(e,d){function i(){if(!t){if(f.throwDeprecation)throw new Error(d);f.traceDeprecation?console.trace(d):console.error(d),t=!0}return e.apply(this,arguments)}if(j(o.process))return function(){return n.deprecate(e,d).apply(this,arguments)};if(f.noDeprecation===!0)return e;var t=!1;return i};var E,F={};n.debuglog=function(e){if(j(E)&&(E=f.env.NODE_DEBUG||""),e=e.toUpperCase(),!F[e])if(new RegExp("\\b"+e+"\\b","i").test(E)){var o=f.pid;F[e]=function(){var f=n.format.apply(n,arguments);console.error("%s %d: %s",e,o,f)}}else F[e]=function(){};return F[e]},n.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=r,n.isBoolean=w,n.isNull=b,n.isNullOrUndefined=m,n.isNumber=g,n.isString=x,n.isSymbol=P,n.isUndefined=j,n.isRegExp=v,n.isObject=M,n.isDate=X,n.isError=h,n.isFunction=k,n.isPrimitive=q,n.isBuffer=e("./support/isBuffer");var G=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",B(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,f){if(!f||!M(f))return e;for(var n=Object.keys(f),o=n.length;o--;)e[n[o]]=f[n[o]];return e}}).call(this,e("FWaASH"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":185,FWaASH:169,inherits:168}],187:[function(_dereq_,module,exports){function Context(){}var indexOf=_dereq_("indexof"),Object_keys=function(e){if(Object.keys)return Object.keys(e);var f=[];for(var n in e)f.push(n);return f},forEach=function(e,f){if(e.forEach)return e.forEach(f);for(var n=0;n<e.length;n++)f(e[n],n,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,f,n){Object.defineProperty(e,f,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,f,n){e[f]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(e){return this instanceof Script?void(this.code=e):new Script(e)};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var f=document.createElement("iframe");f.style||(f.style={}),f.style.display="none",document.body.appendChild(f);var n=f.contentWindow,o=n.eval,d=n.execScript;!o&&d&&(d.call(n,"null"),o=n.eval),forEach(Object_keys(e),function(f){n[f]=e[f]}),forEach(globals,function(f){e[f]&&(n[f]=e[f])});var i=Object_keys(n),t=o.call(n,this.code);return forEach(Object_keys(n),function(f){(f in e||-1===indexOf(i,f))&&(e[f]=n[f])}),forEach(globals,function(f){f in e||defineProp(e,f,n[f])}),document.body.removeChild(f),t},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var f=Script.createContext(e),n=this.runInContext(f);return forEach(Object_keys(f),function(n){e[n]=f[n]}),n},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(f){var n=Script(f);return n[e].apply(n,[].slice.call(arguments,1))}}),exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var f=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(n){f[n]=e[n]}),f}},{indexof:188}],188:[function(e,f){var n=[].indexOf;f.exports=function(e,f){if(n)return e.indexOf(f);for(var o=0;o<e.length;++o)if(e[o]===f)return o;return-1}},{}],189:[function(e,f){(function(e){!function(){"use strict";function n(f){var n;return n=f instanceof e?f:new e(f.toString(),"binary"),n.toString("base64")}f.exports=n}()}).call(this,e("buffer").Buffer)},{buffer:150}],190:[function(e,f){"use strict";var n=e("bluebird"),o=n.promisify(e("request")),d=e("jxt").createRegistry();d.use(e("./lib/xrd")),f.exports=function(e,f){"string"==typeof e&&(e={host:e});var i={ssl:!0,json:!0,xrd:!0};for(var t in e)i[t]=e[t];var l=i.ssl?"https://":"http://",u=new n(function(e,f){o(l+i.host+"/.well-known/host-meta.json").spread(function(f,n){e(JSON.parse(n))})["catch"](f)}),p=new n(function(e,f){o(l+i.host+"/.well-known/host-meta").spread(function(f,n){var o=d.parse(n);e(o.toJSON())})["catch"](f)});return new n(function(e,f){n.some([u,p],1).spread(e)["catch"](function(){f("no-host-meta")})}).nodeify(f)}},{"./lib/xrd":191,bluebird:114,jxt:329,request:192}],191:[function(e,f){"use strict";var n=e("jxt"),o="http://docs.oasis-open.org/ns/xri/xrd-1.0";f.exports=function(e){var f={get:function(){for(var e={},f=n.find(this.xml,o,"Property"),d=0,i=f.length;i>d;d++){var t=f[d],l=n.getAttribute(t,"type");e[l]=t.textContent}return e}},d=e.define({name:"xrd",namespace:o,element:"XRD",fields:{subject:n.subText(o,"Subject"),expires:n.dateSub(o,"Expires"),aliases:n.multiSubText(o,"Alias"),properties:f}}),i=e.define({name:"_xrdlink",namespace:o,element:"Link",fields:{rel:n.attribute("rel"),href:n.attribute("href"),type:n.attribute("type"),template:n.attribute("template"),titles:n.subLangText(o,"Title","default"),properties:f}});return e.extend(d,i,"links"),d}},{jxt:329}],192:[function(e,f){function n(e,f){if("function"!=typeof f)throw new Error("Bad callback given: "+f);if(!e)throw new Error("No options given");var t=e.onResponse;if(e="string"==typeof e?{uri:e}:JSON.parse(JSON.stringify(e)),e.onResponse=t,e.verbose&&(n.log=i()),e.url&&(e.uri=e.url,delete e.url),!e.uri&&""!==e.uri)throw new Error("options.uri is a required argument");if("string"!=typeof e.uri)throw new Error("options.uri must be a string");for(var l=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],p=0;p<l.length;p++)if(e[l[p]])throw new Error("options."+l[p]+" is not supported");if(e.callback=f,e.method=e.method||"GET",e.headers=e.headers||{},e.body=e.body||null,e.timeout=e.timeout||n.DEFAULT_TIMEOUT,e.headers.host)throw new Error("Options.headers.host is not supported");return e.json&&(e.headers.accept=e.headers.accept||"application/json","GET"!==e.method&&(e.headers["content-type"]="application/json"),"boolean"!=typeof e.json?e.body=JSON.stringify(e.json):"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.onResponse=e.onResponse||d,e.onResponse===!0&&(e.onResponse=f,e.callback=d),!e.headers.authorization&&e.auth&&(e.headers.authorization="Basic "+u(e.auth.username+":"+e.auth.password)),o(e)}function o(e){function f(){s=!0;var f=new Error("ETIMEDOUT");return f.code="ETIMEDOUT",f.duration=e.timeout,n.log.error("Timeout",{id:u._id,milliseconds:e.timeout}),e.callback(f,u)}function o(){if(s)return n.log.debug("Ignoring timed out state change",{state:u.readyState,id:u.id});if(n.log.debug("State change",{state:u.readyState,id:u.id,timed_out:s}),u.readyState===p.OPENED){n.log.debug("Request started",{id:u.id});for(var f in e.headers)u.setRequestHeader(f,e.headers[f])}else u.readyState===p.HEADERS_RECEIVED?d():u.readyState===p.LOADING?(d(),i()):u.readyState===p.DONE&&(d(),i(),t())}function d(){if(!w.response){if(w.response=!0,n.log.debug("Got response",{id:u.id,status:u.status}),clearTimeout(u.timeoutTimer),u.statusCode=u.status,c&&0==u.statusCode){var f=new Error("CORS request rejected: "+e.uri);return f.cors="rejected",w.loading=!0,w.end=!0,e.callback(f,u)}e.onResponse(null,u)}}function i(){w.loading||(w.loading=!0,n.log.debug("Response body loading",{id:u.id}))}function t(){if(!w.end){if(w.end=!0,n.log.debug("Request done",{id:u.id}),u.body=u.responseText,e.json)try{u.body=JSON.parse(u.responseText)}catch(f){return e.callback(f,u)}e.callback(null,u,u.body)}}var u=new p,s=!1,c=l(e.uri),a="withCredentials"in u;if(y+=1,u.seq_id=y,u.id=y+": "+e.method+" "+e.uri,u._id=u.id,c&&!a){var r=new Error("Browser does not support cross-origin request: "+e.uri);return r.cors="unsupported",e.callback(r,u)}u.timeoutTimer=setTimeout(f,e.timeout);var w={response:!1,loading:!1,end:!1};return u.onreadystatechange=o,u.open(e.method,e.uri,!0),c&&(u.withCredentials=!!e.withCredentials),u.send(e.body),u}function d(){}function i(){var e,f,n={},o=["trace","debug","info","warn","error"];for(f=0;f<o.length;f++)e=o[f],n[e]=d,"undefined"!=typeof console&&console&&console[e]&&(n[e]=t(console,e));return n}function t(e,f){function n(n,o){return"object"==typeof o&&(n+=" "+JSON.stringify(o)),e[f].call(e,n)}return n}function l(e){var f,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{f=location.href}catch(o){f=document.createElement("a"),f.href="",f=f.href}var d=n.exec(f.toLowerCase())||[],i=n.exec(e.toLowerCase()),t=!(!i||i[1]==d[1]&&i[2]==d[2]&&(i[3]||("http:"===i[1]?80:443))==(d[3]||("http:"===d[1]?80:443)));return t}function u(e){var f,n,o,d,i,t,l,u,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,y=0,c="",a=[];if(!e)return e;do f=e.charCodeAt(s++),n=e.charCodeAt(s++),o=e.charCodeAt(s++),u=f<<16|n<<8|o,d=u>>18&63,i=u>>12&63,t=u>>6&63,l=63&u,a[y++]=p.charAt(d)+p.charAt(i)+p.charAt(t)+p.charAt(l);while(s<e.length);switch(c=a.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}var p=XMLHttpRequest;if(!p)throw new Error("missing XMLHttpRequest");f.exports=n,n.log={trace:d,debug:d,info:d,warn:d,error:d};var s=18e4,y=0;n.withCredentials=!1,n.DEFAULT_TIMEOUT=s,n.defaults=function(e){var f=function(f){var n=function(n,o){n="string"==typeof n?{uri:n}:JSON.parse(JSON.stringify(n));for(var d in e)void 0===n[d]&&(n[d]=e[d]);return f(n,o)};return n},o=f(n);return o.get=f(n.get),o.post=f(n.post),o.put=f(n.put),o.head=f(n.head),o};var c=["get","put","post","head"];c.forEach(function(e){var f=e.toUpperCase(),o=e.toLowerCase();n[o]=function(e){"string"==typeof e?e={method:f,uri:e}:(e=JSON.parse(JSON.stringify(e)),e.method=f);var o=[e].concat(Array.prototype.slice.apply(arguments,[1]));return n.apply(this,o)}}),n.couch=function(e,f){function o(e,n,o){if(e)return f(e,n,o);if((n.statusCode<200||n.statusCode>299)&&o.error){e=new Error("CouchDB error: "+(o.error.reason||o.error.error));for(var d in o)e[d]=o[d];return f(e,n,o)}return f(e,n,o)}"string"==typeof e&&(e={uri:e}),e.json=!0,e.body&&(e.json=e.body),delete e.body,f=f||d;var i=n(e,o);return i}},{}],193:[function(e,f,n){var o=e("crypto"),d={md2:"md2",md5:"md5","sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512"},i=Object.keys(d);n.getHashes=function(){for(var e=[],f=o.getHashes(),n=0,t=i.length;t>n;n++)f.indexOf(d[i[n]])>=0&&e.push(i[n]);return e},n.createHash=function(e){return e=e.toLowerCase(),d[e]&&(e=d[e]),o.createHash(e)},n.createHmac=function(e,f){return e=e.toLowerCase(),d[e]&&(e=d[e]),o.createHmac(e,f)}},{crypto:197}],194:[function(e,f){(function(n){"use strict";function o(e){u.call(this),this._hash=e,this.buffers=[]}function d(e){u.call(this),this._hash=e}var i=e("sha.js"),t=e("./md5"),l=e("ripemd160"),u=e("stream").Transform,p=e("util").inherits;f.exports=function(e){return"md5"===e?new o(t):"rmd160"===e?new o(l):new d(i(e))},p(o,u),o.prototype._transform=function(e,f,n){this.buffers.push(e),n()},o.prototype._flush=function(e){var f=n.concat(this.buffers),o=this._hash(f);this.buffers=null,this.push(o),e()},o.prototype.update=function(e,f){return this.write(e,f),this},o.prototype.digest=function(e){this.end();for(var f,o=new n("");f=this.read();)o=n.concat([o,f]);return e&&(o=o.toString(e)),o},p(d,u),d.prototype._transform=function(e,f,n){this._hash.update(e),n()},d.prototype._flush=function(e){this.push(this._hash.digest()),this._hash=null,e()},d.prototype.update=function(e,f){return this.write(e,f),this},d.prototype.digest=function(e){this.end();for(var f,o=new n("");f=this.read();)o=n.concat([o,f]);return e&&(o=o.toString(e)),o}}).call(this,e("buffer").Buffer)},{"./md5":198,buffer:150,ripemd160:303,"sha.js":305,stream:184,util:186}],195:[function(e,f){(function(n){"use strict";function o(e,f){if(!(this instanceof o))return new o(e,f);i.call(this),this._opad=p,this._alg=e;var t="sha512"===e||"sha384"===e?128:64;f=this._key=n.isBuffer(f)?f:new n(f),f.length>t?f=d(e).update(f).digest():f.length<t&&(f=n.concat([f,l],t));for(var u=this._ipad=new n(t),p=this._opad=new n(t),s=0;t>s;s++)u[s]=54^f[s],p[s]=92^f[s];this._hash=d(e).update(u)}var d=e("./create-hash"),i=e("stream").Transform,t=e("util").inherits,l=new n(128);l.fill(0),f.exports=o,t(o,i),o.prototype.update=function(e,f){return this.write(e,f),this},o.prototype._transform=function(e,f,n){this._hash.update(e),n()},o.prototype._flush=function(e){var f=this._hash.digest();this.push(d(this._alg).update(this._opad).update(f).digest()),e()},o.prototype.digest=function(e){this.end();for(var f,o=new n("");f=this.read();)o=n.concat([o,f]);return e&&(o=o.toString(e)),o}}).call(this,e("buffer").Buffer)},{"./create-hash":194,buffer:150,stream:184,util:186}],196:[function(e,f){(function(e){"use strict";function n(f,n){if(f.length%i!==0){var o=f.length+(i-f.length%i);f=e.concat([f,t],o)}for(var d=[],l=n?f.readInt32BE:f.readInt32LE,u=0;u<f.length;u+=i)d.push(l.call(f,u));return d}function o(f,n,o){for(var d=new e(n),i=o?d.writeInt32BE:d.writeInt32LE,t=0;t<f.length;t++)i.call(d,f[t],4*t,!0);return d}function d(f,d,i,t){e.isBuffer(f)||(f=new e(f));var u=d(n(f,t),f.length*l);return o(u,i,t)}var i=4,t=new e(i);t.fill(0);var l=8;f.exports={hash:d}}).call(this,e("buffer").Buffer)},{buffer:150}],197:[function(e,f,n){(function(o){"use strict";function d(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function i(e,f){for(var n in e)f(e[n],n)}var t=e("./rng");n.createHash=e("./create-hash"),n.createHmac=e("./create-hmac"),n.randomBytes=function(e,f){if(!f||!f.call)return new o(t(e));try{f.call(this,void 0,new o(t(e)))}catch(n){f(n)}};var l=["sha1","sha256","sha512","md5","rmd160"].concat(Object.keys(e("browserify-sign/algos")));n.getHashes=function(){return l};var u=e("./pbkdf2")(n);n.pbkdf2=u.pbkdf2,n.pbkdf2Sync=u.pbkdf2Sync,e("browserify-aes/inject")(n,f.exports),e("browserify-sign/inject")(f.exports,n),e("diffie-hellman/inject")(n,f.exports),e("create-ecdh/inject")(f.exports,n),i(["createCredentials","publicEncrypt","privateDecrypt"],function(e){n[e]=function(){d("sorry,",e,"is not implemented yet")}})}).call(this,e("buffer").Buffer)},{"./create-hash":194,"./create-hmac":195,"./pbkdf2":311,"./rng":312,"browserify-aes/inject":206,"browserify-sign/algos":219,"browserify-sign/inject":222,buffer:150,"create-ecdh/inject":272,"diffie-hellman/inject":297}],198:[function(e,f){"use strict";function n(e,f){e[f>>5]|=128<<f%32,e[(f+64>>>9<<4)+14]=f;for(var n=1732584193,o=-271733879,p=-1732584194,s=271733878,y=0;y<e.length;y+=16){var c=n,a=o,r=p,w=s;n=d(n,o,p,s,e[y+0],7,-680876936),s=d(s,n,o,p,e[y+1],12,-389564586),p=d(p,s,n,o,e[y+2],17,606105819),o=d(o,p,s,n,e[y+3],22,-1044525330),n=d(n,o,p,s,e[y+4],7,-176418897),s=d(s,n,o,p,e[y+5],12,1200080426),p=d(p,s,n,o,e[y+6],17,-1473231341),o=d(o,p,s,n,e[y+7],22,-45705983),n=d(n,o,p,s,e[y+8],7,1770035416),s=d(s,n,o,p,e[y+9],12,-1958414417),p=d(p,s,n,o,e[y+10],17,-42063),o=d(o,p,s,n,e[y+11],22,-1990404162),n=d(n,o,p,s,e[y+12],7,1804603682),s=d(s,n,o,p,e[y+13],12,-40341101),p=d(p,s,n,o,e[y+14],17,-1502002290),o=d(o,p,s,n,e[y+15],22,1236535329),n=i(n,o,p,s,e[y+1],5,-165796510),s=i(s,n,o,p,e[y+6],9,-1069501632),p=i(p,s,n,o,e[y+11],14,643717713),o=i(o,p,s,n,e[y+0],20,-373897302),n=i(n,o,p,s,e[y+5],5,-701558691),s=i(s,n,o,p,e[y+10],9,38016083),p=i(p,s,n,o,e[y+15],14,-660478335),o=i(o,p,s,n,e[y+4],20,-405537848),n=i(n,o,p,s,e[y+9],5,568446438),s=i(s,n,o,p,e[y+14],9,-1019803690),p=i(p,s,n,o,e[y+3],14,-187363961),o=i(o,p,s,n,e[y+8],20,1163531501),n=i(n,o,p,s,e[y+13],5,-1444681467),s=i(s,n,o,p,e[y+2],9,-51403784),p=i(p,s,n,o,e[y+7],14,1735328473),o=i(o,p,s,n,e[y+12],20,-1926607734),n=t(n,o,p,s,e[y+5],4,-378558),s=t(s,n,o,p,e[y+8],11,-2022574463),p=t(p,s,n,o,e[y+11],16,1839030562),o=t(o,p,s,n,e[y+14],23,-35309556),n=t(n,o,p,s,e[y+1],4,-1530992060),s=t(s,n,o,p,e[y+4],11,1272893353),p=t(p,s,n,o,e[y+7],16,-155497632),o=t(o,p,s,n,e[y+10],23,-1094730640),n=t(n,o,p,s,e[y+13],4,681279174),s=t(s,n,o,p,e[y+0],11,-358537222),p=t(p,s,n,o,e[y+3],16,-722521979),o=t(o,p,s,n,e[y+6],23,76029189),n=t(n,o,p,s,e[y+9],4,-640364487),s=t(s,n,o,p,e[y+12],11,-421815835),p=t(p,s,n,o,e[y+15],16,530742520),o=t(o,p,s,n,e[y+2],23,-995338651),n=l(n,o,p,s,e[y+0],6,-198630844),s=l(s,n,o,p,e[y+7],10,1126891415),p=l(p,s,n,o,e[y+14],15,-1416354905),o=l(o,p,s,n,e[y+5],21,-57434055),n=l(n,o,p,s,e[y+12],6,1700485571),s=l(s,n,o,p,e[y+3],10,-1894986606),p=l(p,s,n,o,e[y+10],15,-1051523),o=l(o,p,s,n,e[y+1],21,-2054922799),n=l(n,o,p,s,e[y+8],6,1873313359),s=l(s,n,o,p,e[y+15],10,-30611744),p=l(p,s,n,o,e[y+6],15,-1560198380),o=l(o,p,s,n,e[y+13],21,1309151649),n=l(n,o,p,s,e[y+4],6,-145523070),s=l(s,n,o,p,e[y+11],10,-1120210379),p=l(p,s,n,o,e[y+2],15,718787259),o=l(o,p,s,n,e[y+9],21,-343485551),n=u(n,c),o=u(o,a),p=u(p,r),s=u(s,w)}return Array(n,o,p,s)}function o(e,f,n,o,d,i){return u(p(u(u(f,e),u(o,i)),d),n)}function d(e,f,n,d,i,t,l){return o(f&n|~f&d,e,f,i,t,l)}function i(e,f,n,d,i,t,l){return o(f&d|n&~d,e,f,i,t,l)}function t(e,f,n,d,i,t,l){return o(f^n^d,e,f,i,t,l)}function l(e,f,n,d,i,t,l){return o(n^(f|~d),e,f,i,t,l)}function u(e,f){var n=(65535&e)+(65535&f),o=(e>>16)+(f>>16)+(n>>16);return o<<16|65535&n}function p(e,f){return e<<f|e>>>32-f}var s=e("./helpers");f.exports=function(e){return s.hash(e,n,16)}},{"./helpers":196}],199:[function(e,f){(function(e){f.exports=function(f,n,o,d){o/=8,d=d||0;for(var i,t,l,u=0,p=0,s=new e(o),y=new e(d),c=0;;){if(i=f.createHash("md5"),c++>0&&i.update(t),i.update(n),t=i.digest(),l=0,o>0)for(;;){if(0===o)break;if(l===t.length)break;s[u++]=t[l],o--,l++}if(d>0&&l!==t.length)for(;;){if(0===d)break;if(l===t.length)break;y[p++]=t[l],d--,l++}if(0===o&&0===d)break}for(l=0;l<t.length;l++)t[l]=0;return{key:s,iv:y}}}).call(this,e("buffer").Buffer)},{buffer:150}],200:[function(e,f,n){(function(e){function f(e){var f,n;return f=e>l||0>e?(n=Math.abs(e)%l,0>e?l-n:n):e}function o(e){var f,n,o;for(f=n=0,o=e.length;o>=0?o>n:n>o;f=o>=0?++n:--n)e[f]=0;return!1}function d(){var e;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var f,n;for(n=[],e=f=0;4>f;e=++f)n.push([]);return n}(),this.INV_SUB_MIX=function(){var f,n;for(n=[],e=f=0;4>f;e=++f)n.push([]);return n}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function i(e){for(var f=e.length/4,n=new Array(f),o=-1;++o<f;)n[o]=e.readUInt32BE(4*o);return n}function t(e){this._key=i(e),this._doReset()}var l=Math.pow(2,32);d.prototype.init=function(){var e,f,n,o,d,i,t,l,u,p;for(e=function(){var e,n;for(n=[],f=e=0;256>e;f=++e)n.push(128>f?f<<1:f<<1^283);return n}(),d=0,u=0,f=p=0;256>p;f=++p)n=u^u<<1^u<<2^u<<3^u<<4,n=n>>>8^255&n^99,this.SBOX[d]=n,this.INV_SBOX[n]=d,i=e[d],t=e[i],l=e[t],o=257*e[n]^16843008*n,this.SUB_MIX[0][d]=o<<24|o>>>8,this.SUB_MIX[1][d]=o<<16|o>>>16,this.SUB_MIX[2][d]=o<<8|o>>>24,this.SUB_MIX[3][d]=o,o=16843009*l^65537*t^257*i^16843008*d,this.INV_SUB_MIX[0][n]=o<<24|o>>>8,this.INV_SUB_MIX[1][n]=o<<16|o>>>16,this.INV_SUB_MIX[2][n]=o<<8|o>>>24,this.INV_SUB_MIX[3][n]=o,0===d?d=u=1:(d=i^e[e[e[l^i]]],u^=e[e[u]]);return!0};var u=new d;t.blockSize=16,t.prototype.blockSize=t.blockSize,t.keySize=32,t.prototype.keySize=t.keySize,t.ivSize=t.blockSize,t.prototype.ivSize=t.ivSize,t.prototype._doReset=function(){var e,f,n,o,d,i,t,l;for(n=this._key,f=n.length,this._nRounds=f+6,d=4*(this._nRounds+1),this._keySchedule=[],o=t=0;d>=0?d>t:t>d;o=d>=0?++t:--t)this._keySchedule[o]=f>o?n[o]:(i=this._keySchedule[o-1],o%f===0?(i=i<<8|i>>>24,i=u.SBOX[i>>>24]<<24|u.SBOX[i>>>16&255]<<16|u.SBOX[i>>>8&255]<<8|u.SBOX[255&i],i^=u.RCON[o/f|0]<<24):f>6&&o%f===4?i=u.SBOX[i>>>24]<<24|u.SBOX[i>>>16&255]<<16|u.SBOX[i>>>8&255]<<8|u.SBOX[255&i]:void 0,this._keySchedule[o-f]^i);for(this._invKeySchedule=[],e=l=0;d>=0?d>l:l>d;e=d>=0?++l:--l)o=d-e,i=this._keySchedule[o-(e%4?0:4)],this._invKeySchedule[e]=4>e||4>=o?i:u.INV_SUB_MIX[0][u.SBOX[i>>>24]]^u.INV_SUB_MIX[1][u.SBOX[i>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[i>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&i]];return!0},t.prototype.encryptBlock=function(f){f=i(new e(f));var n=this._doCryptBlock(f,this._keySchedule,u.SUB_MIX,u.SBOX),o=new e(16);return o.writeUInt32BE(n[0],0),o.writeUInt32BE(n[1],4),o.writeUInt32BE(n[2],8),o.writeUInt32BE(n[3],12),o},t.prototype.decryptBlock=function(f){f=i(new e(f));var n=[f[3],f[1]];f[1]=n[0],f[3]=n[1];var o=this._doCryptBlock(f,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX),d=new e(16);return d.writeUInt32BE(o[0],0),d.writeUInt32BE(o[3],4),d.writeUInt32BE(o[2],8),d.writeUInt32BE(o[1],12),d},t.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.prototype._doCryptBlock=function(e,n,o,d){var i,t,l,u,p,s,y,c,a,r,w,b;for(l=e[0]^n[0],u=e[1]^n[1],p=e[2]^n[2],s=e[3]^n[3],i=4,t=w=1,b=this._nRounds;b>=1?b>w:w>b;t=b>=1?++w:--w)y=o[0][l>>>24]^o[1][u>>>16&255]^o[2][p>>>8&255]^o[3][255&s]^n[i++],c=o[0][u>>>24]^o[1][p>>>16&255]^o[2][s>>>8&255]^o[3][255&l]^n[i++],a=o[0][p>>>24]^o[1][s>>>16&255]^o[2][l>>>8&255]^o[3][255&u]^n[i++],r=o[0][s>>>24]^o[1][l>>>16&255]^o[2][u>>>8&255]^o[3][255&p]^n[i++],l=y,u=c,p=a,s=r;return y=(d[l>>>24]<<24|d[u>>>16&255]<<16|d[p>>>8&255]<<8|d[255&s])^n[i++],c=(d[u>>>24]<<24|d[p>>>16&255]<<16|d[s>>>8&255]<<8|d[255&l])^n[i++],a=(d[p>>>24]<<24|d[s>>>16&255]<<16|d[l>>>8&255]<<8|d[255&u])^n[i++],r=(d[s>>>24]<<24|d[l>>>16&255]<<16|d[u>>>8&255]<<8|d[255&p])^n[i++],[f(y),f(c),f(a),f(r)]},n.AES=t}).call(this,e("buffer").Buffer)},{buffer:150}],201:[function(e,f){(function(n){function o(e,f,d,l){if(!(this instanceof o))return new o(e,f,d);t.call(this),this._finID=n.concat([d,new n([0,0,0,1])]),d=n.concat([d,new n([0,0,0,2])]),this._cipher=new i.AES(f),this._prev=new n(d.length),this._cache=new n(""),this._secCache=new n(""),this._decrypt=l,this._alen=0,this._len=0,d.copy(this._prev),this._mode=e;var p=new n(4);p.fill(0),this._ghash=new u(this._cipher.encryptBlock(p)),this._authTag=null,this._called=!1}function d(e,f){var n=0;e.length!==f.length&&n++;for(var o=Math.min(e.length,f.length),d=-1;++d<o;)n+=e[d]^f[d];return n}var i=e("./aes"),t=e("./cipherBase"),l=e("inherits"),u=e("./ghash"),p=e("./xor");l(o,t),f.exports=o,o.prototype._transform=function(e,f,o){if(!this._called&&this._alen){var d=16-this._alen%16;16>d&&(d=new n(d),d.fill(0),this._ghash.update(d))}this._called=!0;var i=this._mode.encrypt(this,e);this._ghash.update(this._decrypt?e:i),this._len+=e.length,o(null,i)},o.prototype._flush=function(e){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var f=p(this._ghash["final"](8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(d(f,this._authTag))throw new Error("Unsupported state or unable to authenticate data")}else this._authTag=f;this._cipher.scrub(),e()},o.prototype.getAuthTag=function(){if(!this._decrypt&&n.isBuffer(this._authTag))return this._authTag;throw new Error("Attempting to get auth tag in unsupported state")},o.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},o.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length}}).call(this,e("buffer").Buffer)},{"./aes":200,"./cipherBase":202,"./ghash":205,"./xor":217,buffer:150,inherits:215}],202:[function(e,f){(function(n){function o(){d.call(this)}var d=e("stream").Transform,i=e("inherits");f.exports=o,i(o,d),o.prototype.update=function(e,f,o){this.write(e,f);for(var d,i=new n("");d=this.read();)i=n.concat([i,d]);return o&&(i=i.toString(o)),i},o.prototype["final"]=function(e){this.end();for(var f,o=new n("");f=this.read();)o=n.concat([o,f]);return e&&(o=o.toString(e)),o}}).call(this,e("buffer").Buffer)},{buffer:150,inherits:215,stream:184}],203:[function(e,f){(function(n){function o(e,f,i){return this instanceof o?(l.call(this),this._cache=new d,this._last=void 0,this._cipher=new t.AES(f),this._prev=new n(i.length),i.copy(this._prev),void(this._mode=e)):new o(e,f,i)}function d(){return this instanceof d?void(this.cache=new n("")):new d}function i(e){var f=e[15];if(16!==f)return e.slice(0,16-f)}var t=e("./aes"),l=e("./cipherBase"),u=e("inherits"),p=e("./modes"),s=e("./streamCipher"),y=e("./authCipher"),c=e("./EVP_BytesToKey");u(o,l),o.prototype._transform=function(e,f,n){this._cache.add(e);for(var o,d;o=this._cache.get();)d=this._mode.decrypt(this,o),this.push(d);n()},o.prototype._flush=function(e){var f=this._cache.flush();return f?(this.push(i(this._mode.decrypt(this,f))),void e()):e},d.prototype.add=function(e){this.cache=n.concat([this.cache,e])},d.prototype.get=function(){if(this.cache.length>16){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},d.prototype.flush=function(){return this.cache.length?this.cache:void 0};var a={ECB:e("./modes/ecb"),CBC:e("./modes/cbc"),CFB:e("./modes/cfb"),CFB8:e("./modes/cfb8"),CFB1:e("./modes/cfb1"),OFB:e("./modes/ofb"),CTR:e("./modes/ctr"),GCM:e("./modes/ctr")};f.exports=function(e){function f(e,f,d){var i=p[e];if(!i)throw new TypeError("invalid suite type");if("string"==typeof d&&(d=new n(d)),"string"==typeof f&&(f=new n(f)),f.length!==i.key/8)throw new TypeError("invalid key length "+f.length);if(d.length!==i.iv)throw new TypeError("invalid iv length "+d.length);return"stream"===i.type?new s(a[i.mode],f,d,!0):"auth"===i.type?new y(a[i.mode],f,d,!0):new o(a[i.mode],f,d)}function d(n,o){var d=p[n];if(!d)throw new TypeError("invalid suite type");var i=c(e,o,d.key,d.iv);return f(n,i.key,i.iv)}return{createDecipher:d,createDecipheriv:f}}}).call(this,e("buffer").Buffer)},{"./EVP_BytesToKey":199,"./aes":200,"./authCipher":201,"./cipherBase":202,"./modes":207,"./modes/cbc":208,"./modes/cfb":209,"./modes/cfb1":210,"./modes/cfb8":211,"./modes/ctr":212,"./modes/ecb":213,"./modes/ofb":214,"./streamCipher":216,buffer:150,inherits:215}],204:[function(e,f){(function(n){function o(e,f,l){return this instanceof o?(t.call(this),this._cache=new d,this._cipher=new i.AES(f),this._prev=new n(l.length),l.copy(this._prev),void(this._mode=e)):new o(e,f,l)}function d(){return this instanceof d?void(this.cache=new n("")):new d}var i=e("./aes"),t=e("./cipherBase"),l=e("inherits"),u=e("./modes"),p=e("./EVP_BytesToKey"),s=e("./streamCipher"),y=e("./authCipher");l(o,t),o.prototype._transform=function(e,f,n){this._cache.add(e);for(var o,d;o=this._cache.get();)d=this._mode.encrypt(this,o),this.push(d);n()},o.prototype._flush=function(e){var f=this._cache.flush();this.push(this._mode.encrypt(this,f)),this._cipher.scrub(),e()},d.prototype.add=function(e){this.cache=n.concat([this.cache,e])},d.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},d.prototype.flush=function(){for(var e=16-this.cache.length,f=new n(e),o=-1;++o<e;)f.writeUInt8(e,o);var d=n.concat([this.cache,f]);return d};var c={ECB:e("./modes/ecb"),CBC:e("./modes/cbc"),CFB:e("./modes/cfb"),CFB8:e("./modes/cfb8"),CFB1:e("./modes/cfb1"),OFB:e("./modes/ofb"),CTR:e("./modes/ctr"),GCM:e("./modes/ctr")};f.exports=function(e){function f(e,f,d){var i=u[e];if(!i)throw new TypeError("invalid suite type");if("string"==typeof d&&(d=new n(d)),"string"==typeof f&&(f=new n(f)),f.length!==i.key/8)throw new TypeError("invalid key length "+f.length);if(d.length!==i.iv)throw new TypeError("invalid iv length "+d.length);return"stream"===i.type?new s(c[i.mode],f,d):"auth"===i.type?new y(c[i.mode],f,d):new o(c[i.mode],f,d)}function d(n,o){var d=u[n];if(!d)throw new TypeError("invalid suite type");var i=p(e,o,d.key,d.iv);return f(n,i.key,i.iv)}return{createCipher:d,createCipheriv:f}}}).call(this,e("buffer").Buffer)},{"./EVP_BytesToKey":199,"./aes":200,"./authCipher":201,"./cipherBase":202,"./modes":207,"./modes/cbc":208,"./modes/cfb":209,"./modes/cfb1":210,"./modes/cfb8":211,"./modes/ctr":212,"./modes/ecb":213,"./modes/ofb":214,"./streamCipher":216,buffer:150,inherits:215}],205:[function(e,f){(function(e){function n(f){this.h=f,this.state=new e(16),this.state.fill(0),this.cache=new e("")}function o(e){return[e.readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)]}function d(f){f=f.map(i);var n=new e(16);return n.writeUInt32BE(f[0],0),n.writeUInt32BE(f[1],4),n.writeUInt32BE(f[2],8),n.writeUInt32BE(f[3],12),n}function i(e){var f,n;return f=e>u||0>e?(n=Math.abs(e)%u,0>e?u-n:n):e}function t(e,f){return[e[0]^f[0],e[1]^f[1],e[2]^f[2],e[3]^f[3]]}var l=new e(16);l.fill(0),f.exports=n,n.prototype.ghash=function(e){for(var f=-1;++f<e.length;)this.state[f]^=255&e[f];this._multiply()},n.prototype._multiply=function(){for(var e,f,n,i=o(this.h),l=[0,0,0,0],u=-1;++u<128;){for(f=0!==(this.state[~~(u/8)]&1<<7-u%8),f&&(l=t(l,i)),n=0!==(1&i[3]),e=3;e>0;e--)i[e]=i[e]>>>1|(1&i[e-1])<<31;i[0]=i[0]>>>1,n&&(i[0]=i[0]^225<<24)}this.state=d(l)},n.prototype.update=function(f){this.cache=e.concat([this.cache,f]);for(var n;this.cache.length>=16;)n=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(n)},n.prototype["final"]=function(f,n){return this.cache.length&&this.ghash(e.concat([this.cache,l],16)),this.ghash(d([0,f,0,n])),this.state};var u=Math.pow(2,32)}).call(this,e("buffer").Buffer)},{buffer:150}],206:[function(e,f){f.exports=function(f,n){function o(){return Object.keys(t)}n=n||{};var d=e("./encrypter")(f);n.createCipher=d.createCipher,n.createCipheriv=d.createCipheriv;var i=e("./decrypter")(f);n.createDecipher=i.createDecipher,n.createDecipheriv=i.createDecipheriv;var t=e("./modes");n.listCiphers=o}},{"./decrypter":203,"./encrypter":204,"./modes":207}],207:[function(e,f,n){n["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},n["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},n["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},n["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},n["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},n["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},n.aes128=n["aes-128-cbc"],n.aes192=n["aes-192-cbc"],n.aes256=n["aes-256-cbc"],n["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},n["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},n["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},n["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},n["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},n["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},n["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},n["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},n["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},n["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},n["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},n["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},n["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},n["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},n["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},n["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},n["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},n["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}
},{}],208:[function(e,f,n){var o=e("../xor");n.encrypt=function(e,f){var n=o(f,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},n.decrypt=function(e,f){var n=e._prev;e._prev=f;var d=e._cipher.decryptBlock(f);return o(d,n)}},{"../xor":217}],209:[function(e,f,n){(function(f){function o(e,n,o){var i=n.length,t=d(n,e._cache);return e._cache=e._cache.slice(i),e._prev=f.concat([e._prev,o?n:t]),t}var d=e("../xor");n.encrypt=function(e,n,d){for(var i,t=new f("");n.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=new f("")),!(e._cache.length<=n.length)){t=f.concat([t,o(e,n,d)]);break}i=e._cache.length,t=f.concat([t,o(e,n.slice(0,i),d)]),n=n.slice(i)}return t}}).call(this,e("buffer").Buffer)},{"../xor":217,buffer:150}],210:[function(e,f,n){(function(e){function f(e,f,n){for(var d,i,t,l=-1,u=8,p=0;++l<u;)d=e._cipher.encryptBlock(e._prev),i=f&1<<7-l?128:0,t=d[0]^i,p+=(128&t)>>l%8,e._prev=o(e._prev,n?i:t);return p}function o(f,n){var o=f.length,d=-1,i=new e(f.length);for(f=e.concat([f,new e([n])]);++d<o;)i[d]=f[d]<<1|f[d+1]>>7;return i}n.encrypt=function(n,o,d){for(var i=o.length,t=new e(i),l=-1;++l<i;)t[l]=f(n,o[l],d);return t}}).call(this,e("buffer").Buffer)},{buffer:150}],211:[function(e,f,n){(function(e){function f(f,n,o){var d=f._cipher.encryptBlock(f._prev),i=d[0]^n;return f._prev=e.concat([f._prev.slice(1),new e([o?n:i])]),i}n.encrypt=function(n,o,d){for(var i=o.length,t=new e(i),l=-1;++l<i;)t[l]=f(n,o[l],d);return t}}).call(this,e("buffer").Buffer)},{buffer:150}],212:[function(e,f,n){(function(f){function o(e){var f=e._cipher.encryptBlock(e._prev);return d(e._prev),f}function d(e){for(var f,n=e.length;n--;){if(f=e.readUInt8(n),255!==f){f++,e.writeUInt8(f,n);break}e.writeUInt8(0,n)}}var i=e("../xor");n.encrypt=function(e,n){for(;e._cache.length<n.length;)e._cache=f.concat([e._cache,o(e)]);var d=e._cache.slice(0,n.length);return e._cache=e._cache.slice(n.length),i(n,d)}}).call(this,e("buffer").Buffer)},{"../xor":217,buffer:150}],213:[function(e,f,n){n.encrypt=function(e,f){return e._cipher.encryptBlock(f)},n.decrypt=function(e,f){return e._cipher.decryptBlock(f)}},{}],214:[function(e,f,n){(function(f){function o(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}var d=e("../xor");n.encrypt=function(e,n){for(;e._cache.length<n.length;)e._cache=f.concat([e._cache,o(e)]);var i=e._cache.slice(0,n.length);return e._cache=e._cache.slice(n.length),d(n,i)}}).call(this,e("buffer").Buffer)},{"../xor":217,buffer:150}],215:[function(e,f){f.exports=e(168)},{}],216:[function(e,f){(function(n){function o(e,f,t,l){return this instanceof o?(i.call(this),this._cipher=new d.AES(f),this._prev=new n(t.length),this._cache=new n(""),this._secCache=new n(""),this._decrypt=l,t.copy(this._prev),void(this._mode=e)):new o(e,f,t)}var d=e("./aes"),i=e("./cipherBase"),t=e("inherits");t(o,i),f.exports=o,o.prototype._transform=function(e,f,n){n(null,this._mode.encrypt(this,e,this._decrypt))},o.prototype._flush=function(e){this._cipher.scrub(),e()}}).call(this,e("buffer").Buffer)},{"./aes":200,"./cipherBase":202,buffer:150,inherits:215}],217:[function(e,f){(function(e){function n(f,n){for(var o=Math.min(f.length,n.length),d=new e(o),i=-1;++i<o;)d.writeUInt8(f[i]^n[i],i);return d}f.exports=n}).call(this,e("buffer").Buffer)},{buffer:150}],218:[function(e,f){f.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],219:[function(e,f,n){(function(e){n["RSA-SHA224"]=n.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new e("302d300d06096086480165030402040500041c","hex")},n["RSA-SHA256"]=n.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new e("3031300d060960864801650304020105000420","hex")},n["RSA-SHA384"]=n.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new e("3041300d060960864801650304020205000430","hex")},n["RSA-SHA512"]=n.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new e("3051300d060960864801650304020305000440","hex")},n["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new e("3021300906052b0e03021a05000414","hex")},n["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new e("","hex")}}).call(this,e("buffer").Buffer)},{buffer:150}],220:[function(e,f,n){var o=e("asn1.js"),d=e("asn1.js-rfc3280"),i=o.define("RSAPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("modulus")["int"](),this.key("publicExponent")["int"](),this.key("privateExponent")["int"](),this.key("prime1")["int"](),this.key("prime2")["int"](),this.key("exponent1")["int"](),this.key("exponent2")["int"](),this.key("coefficient")["int"]())});n.RSAPrivateKey=i;var t=o.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus")["int"](),this.key("publicExponent")["int"]())});n.RSAPublicKey=t;var l=d.SubjectPublicKeyInfo;n.PublicKey=l;var u=o.define("ECPublicKey",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").bitstr())});n.ECPublicKey=u;var p=o.define("ECPrivateWrap",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").octstr())});n.ECPrivateWrap=p;var s=o.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").use(d.AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});n.PrivateKey=s;var y=o.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters")["int"]())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});n.EncryptedPrivateKey=y;var c=o.define("ECPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(a),this.key("publicKey").optional().explicit(1).bitstr())});n.ECPrivateKey=c;var a=o.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),r=o.define("ECPrivateKey2",function(){this.seq().obj(this.key("version")["int"](),this.key("privateKey").octstr(),this.key("publicKey").seq().obj(this.key("key").bitstr()))});n.ECPrivateKey2=r},{"asn1.js":224,"asn1.js-rfc3280":223}],221:[function(e,f){e("./inject")(f.exports,e("crypto"))},{"./inject":222,crypto:157}],222:[function(e,f){(function(n){function o(e,f){l.call(this);var n=p[e];if(!n)throw new Error("Unknown message digest");this._hash=f.createHash(n.hash),this._tag=n.id,this._crypto=f}function d(e,f){l.call(this);var n=p[e];if(!n)throw new Error("Unknown message digest");this._hash=f.createHash(n.hash),this._tag=n.id}var i=e("./sign"),t=e("./verify"),l=e("readable-stream").Writable,u=e("inherits"),p=e("./algos");f.exports=function(e,f){function n(e){return new o(e,f)}function i(e){return new d(e,f)}e.createSign=n,e.createVerify=i},u(o,l),o.prototype._write=function(e,f,n){this._hash.update(e),n()},o.prototype.update=function(e){return this.write(e),this},o.prototype.sign=function(e,f){this.end();var o=this._hash.digest(),d=i(n.concat([this._tag,o]),e,this._crypto);return f&&(d=d.toString(f)),d},u(d,l),d.prototype._write=function(e,f,n){this._hash.update(e),n()},d.prototype.update=function(e){return this.write(e),this},d.prototype.verify=function(e,f,o){this.end();var d=this._hash.digest();return n.isBuffer(f)||(f=new n(f,o)),t(f,n.concat([this._tag,d]),e)}}).call(this,e("buffer").Buffer)},{"./algos":219,"./sign":269,"./verify":270,buffer:150,inherits:257,"readable-stream":267}],223:[function(e,f,n){try{var o=e("asn1.js")}catch(d){var o=e("../..")}var i=o.define("CRLReason",function(){this["enum"]({0:"unspecified",1:"keyCompromise",2:"CACompromise",3:"affiliationChanged",4:"superseded",5:"cessationOfOperation",6:"certificateHold",8:"removeFromCRL",9:"privilegeWithdrawn",10:"AACompromise"})});n.CRLReason=i;var t=o.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())});n.AlgorithmIdentifier=t;var l=o.define("Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(u),this.key("signatureAlgorithm").use(t),this.key("signature").bitstr())});n.Certificate=l;var u=o.define("TBSCertificate",function(){this.seq().obj(this.key("version").def("v1").explicit(0).use(p),this.key("serialNumber").use(s),this.key("signature").use(t),this.key("issuer").use(m),this.key("validity").use(y),this.key("subject").use(m),this.key("subjectPublicKeyInfo").use(r),this.key("issuerUniqueID").optional().explicit(1).use(a),this.key("subjectUniqueID").optional().explicit(2).use(a),this.key("extensions").optional().explicit(3).use(w))});n.TBSCertificate=u;var p=o.define("Version",function(){this["int"]({0:"v1",1:"v2",2:"v3"})});n.Version=p;var s=o.define("CertificateSerialNumber",function(){this["int"]()});n.CertificateSerialNumber=s;var y=o.define("Validity",function(){this.seq().obj(this.key("notBefore").use(c),this.key("notAfter").use(c))});n.Validity=y;var c=o.define("Time",function(){this.choice({utcTime:this.utctime(),genTime:this.gentime()})});n.Time=c;var a=o.define("UniqueIdentifier",function(){this.bitstr()});n.UniqueIdentifier=a;var r=o.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(t),this.key("subjectPublicKey").bitstr())});n.SubjectPublicKeyInfo=r;var w=o.define("Extensions",function(){this.seqof(b)});n.Extensions=w;var b=o.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())});n.Extension=b;var m=o.define("Name",function(){this.choice({rdn:this.use(g)})});n.Name=m;var g=o.define("RDNSequence",function(){this.seqof(x)});n.RDNSequence=g;var x=o.define("RelativeDistinguishedName",function(){this.setof(P)});n.RelativeDistinguishedName=x;var P=o.define("AttributeTypeAndValue",function(){this.seq().obj(this.key("type").use(j),this.key("value").use(v))});n.AttributeTypeAndValue=P;var j=o.define("AttributeType",function(){this.objid()});n.AttributeType=j;var v=o.define("AttributeValue",function(){this.any()});n.AttributeValue=v},{"../..":221,"asn1.js":224}],224:[function(e,f,n){var o=n;o.bignum=e("bn.js"),o.define=e("./asn1/api").define,o.base=e("./asn1/base"),o.constants=e("./asn1/constants"),o.decoders=e("./asn1/decoders"),o.encoders=e("./asn1/encoders")},{"./asn1/api":225,"./asn1/base":227,"./asn1/constants":231,"./asn1/decoders":233,"./asn1/encoders":235,"bn.js":236}],225:[function(e,f,n){function o(e,f){this.name=e,this.body=f,this.decoders={},this.encoders={}}var d=e("../asn1"),i=e("util"),t=e("vm"),l=n;l.define=function(e,f){return new o(e,f)},o.prototype._createNamed=function(e){var f=t.runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})");return i.inherits(f,e),f.prototype._initNamed=function(f){e.call(this,f)},new f(this)},o.prototype._getDecoder=function(e){return this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(d.decoders[e])),this.decoders[e]},o.prototype.decode=function(e,f,n){return this._getDecoder(f).decode(e,n)},o.prototype._getEncoder=function(e){return this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(d.encoders[e])),this.encoders[e]},o.prototype.encode=function(e,f,n){return this._getEncoder(f).encode(e,n)}},{"../asn1":224,util:186,vm:187}],226:[function(e,f,n){function o(e,f){return t.call(this,f),l.isBuffer(e)?(this.base=e,this.offset=0,void(this.length=e.length)):void this.error("Input not Buffer")}function d(e,f){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof d||(e=new d(e,f)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(e>=0&&255>=e))return f.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=l.byteLength(e);else{if(!l.isBuffer(e))return f.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}var i=(e("assert"),e("util")),t=e("../base").Reporter,l=e("buffer").Buffer;i.inherits(o,t),n.DecoderBuffer=o,o.prototype.save=function(){return{offset:this.offset}},o.prototype.restore=function(e){var f=new o(this.base);return f.offset=e.offset,f.length=this.offset,this.offset=e.offset,f},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},o.prototype.skip=function(e,f){if(!(this.offset+e<=this.length))return this.error(f||"DecoderBuffer overrun");var n=new o(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},o.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},n.EncoderBuffer=d,d.prototype.join=function(e,f){return e||(e=new l(this.length)),f||(f=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,f),f+=n.length}):("number"==typeof this.value?e[f]=this.value:"string"==typeof this.value?e.write(this.value,f):l.isBuffer(this.value)&&this.value.copy(e,f),f+=this.length),e)}},{"../base":227,assert:148,buffer:150,util:186}],227:[function(e,f,n){var o=n;o.Reporter=e("./reporter").Reporter,o.DecoderBuffer=e("./buffer").DecoderBuffer,o.EncoderBuffer=e("./buffer").EncoderBuffer,o.Node=e("./node")},{"./buffer":226,"./node":228,"./reporter":229}],228:[function(e,f){function n(e,f){var n={};this._baseState=n,n.enc=e,n.parent=f||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n["default"]=null,n.explicit=null,n.implicit=null,n.parent||(n.children=[],this._wrap())}var o=e("assert"),d=e("../base").Reporter,i=e("../base").EncoderBuffer,t=["seq","seqof","set","setof","octstr","bitstr","objid","bool","gentime","utctime","null_","enum","int","ia5str"],l=["key","obj","use","optional","explicit","implicit","def","choice","any"].concat(t),u=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];f.exports=n;var p=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit"];n.prototype.clone=function(){var e=this._baseState,f={};p.forEach(function(n){f[n]=e[n]});var n=new this.constructor(f.parent);return n._baseState=f,n},n.prototype._wrap=function(){var e=this._baseState;l.forEach(function(f){this[f]=function(){var n=new this.constructor(this);return e.children.push(n),n[f].apply(n,arguments)}},this)},n.prototype._init=function(e){var f=this._baseState;o(null===f.parent),e.call(this),f.children=f.children.filter(function(e){return e._baseState.parent===this},this),o.equal(f.children.length,1,"Root node can have only one child")},n.prototype._useArgs=function(e){var f=this._baseState,n=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==n.length&&(o(null===f.children),f.children=n,n.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(o(null===f.args),f.args=e,f.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;var f={};return Object.keys(e).forEach(function(n){n==(0|n)&&(n|=0);var o=e[n];f[o]=n}),f}))},u.forEach(function(e){n.prototype[e]=function(){var f=this._baseState;throw new Error(e+" not implemented for encoding: "+f.enc)}}),t.forEach(function(e){n.prototype[e]=function(){var f=this._baseState,n=Array.prototype.slice.call(arguments);return o(null===f.tag),f.tag=e,this._useArgs(n),this}}),n.prototype.use=function(e){var f=this._baseState;return o(null===f.use),f.use=e,this},n.prototype.optional=function(){var e=this._baseState;return e.optional=!0,this},n.prototype.def=function(e){var f=this._baseState;return o(null===f["default"]),f["default"]=e,f.optional=!0,this},n.prototype.explicit=function(e){var f=this._baseState;return o(null===f.explicit&&null===f.implicit),f.explicit=e,this},n.prototype.implicit=function(e){var f=this._baseState;return o(null===f.explicit&&null===f.implicit),f.implicit=e,this},n.prototype.obj=function(){var e=this._baseState,f=Array.prototype.slice.call(arguments);return e.obj=!0,0!==f.length&&this._useArgs(f),this},n.prototype.key=function s(s){var e=this._baseState;return o(null===e.key),e.key=s,this},n.prototype.any=function(){var e=this._baseState;return e.any=!0,this},n.prototype.choice=function(e){var f=this._baseState;return o(null===f.choice),f.choice=e,this._useArgs(Object.keys(e).map(function(f){return e[f]})),this},n.prototype._decode=function(e){var f=this._baseState;if(null===f.parent)return e.wrapResult(f.children[0]._decode(e));var n,o=f["default"],d=!0;if(null!==f.key&&(n=e.enterKey(f.key)),f.optional&&(d=this._peekTag(e,null!==f.explicit?f.explicit:null!==f.implicit?f.implicit:f.tag||0),e.isError(d)))return d;var i;if(f.obj&&d&&(i=e.enterObject()),d){if(null!==f.explicit){var t=this._decodeTag(e,f.explicit);if(e.isError(t))return t;e=t}if(null===f.use&&null===f.choice){if(f.any)var l=e.save();var u=this._decodeTag(e,null!==f.implicit?f.implicit:f.tag,f.any);if(e.isError(u))return u;f.any?o=e.raw(l):e=u}if(o=f.any?o:null===f.choice?this._decodeGeneric(f.tag,e):this._decodeChoice(e),e.isError(o))return o;if(!f.any&&null===f.choice&&null!==f.children){var p=f.children.some(function(f){f._decode(e)});if(p)return err}}return f.obj&&d&&(o=e.leaveObject(i)),null===f.key||null===o&&d!==!0||e.leaveKey(n,f.key,o),o},n.prototype._decodeGeneric=function(e,f){var n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(f,e,n.args[0]):"octstr"===e||"bitstr"===e||"ia5str"===e?this._decodeStr(f,e):"objid"===e&&n.args?this._decodeObjid(f,n.args[0],n.args[1]):"objid"===e?this._decodeObjid(f,null,null):"gentime"===e||"utctime"===e?this._decodeTime(f,e):"null_"===e?this._decodeNull(f):"bool"===e?this._decodeBool(f):"int"===e||"enum"===e?this._decodeInt(f,n.args&&n.args[0]):null!==n.use?this._getUse(n.use,f._reporterState.obj)._decode(f):f.error("unknown tag: "+e)},n.prototype._getUse=function(e,f){var n=this._baseState;return n.useDecoder=this._use(e,f),o(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},n.prototype._decodeChoice=function(e){var f=this._baseState,n=null,o=!1;return Object.keys(f.choice).some(function(d){var i=e.save(),t=f.choice[d];try{var l=t._decode(e);if(e.isError(l))return!1;n={type:d,value:l},o=!0}catch(u){return e.restore(i),!1}return!0},this),o?n:e.error("Choice not matched")},n.prototype._createEncoderBuffer=function(e){return new i(e,this.reporter)},n.prototype._encode=function(e,f,n){var o=this._baseState;if(null===o["default"]||o["default"]!==e){var d=this._encodeValue(e,f,n);if(void 0!==d&&!this._skipDefault(d,f,n))return d}},n.prototype._encodeValue=function(e,f,n){var o=this._baseState;if(null===o.parent)return o.children[0]._encode(e,f||new d);var i=null;if(this.reporter=f,o.optional&&void 0===e){if(null===o["default"])return;e=o["default"]}var t=null,l=!1;if(o.any)i=this._createEncoderBuffer(e);else if(o.choice)i=this._encodeChoice(e,f);else if(o.children)t=o.children.map(function(n){if("null_"===n._baseState.tag)return n._encode(null,f,e);if(null===n._baseState.key)return f.error("Child should have a key");var o=f.enterKey(n._baseState.key);if("object"!=typeof e)return f.error("Child expected, but input is not object");var d=n._encode(e[n._baseState.key],f,e);return f.leaveKey(o),d},this).filter(function(e){return e}),t=this._createEncoderBuffer(t);else if("seqof"===o.tag||"setof"===o.tag){if(!o.args||1!==o.args.length)return f.error("Too many args for : "+o.tag);if(!Array.isArray(e))return f.error("seqof/setof, but data is not Array");var u=this.clone();u._baseState.implicit=null,t=this._createEncoderBuffer(e.map(function(n){var o=this._baseState;return this._getUse(o.args[0],e)._encode(n,f)},u))}else null!==o.use?i=this._getUse(o.use,n)._encode(e,f):(t=this._encodePrimitive(o.tag,e),l=!0);var i;if(!o.any&&null===o.choice){var p=null!==o.implicit?o.implicit:o.tag,s=null===o.implicit?"universal":"context";null===p?null===o.use&&f.error("Tag could be ommited only for .use()"):null===o.use&&(i=this._encodeComposite(p,l,s,t))}return null!==o.explicit&&(i=this._encodeComposite(o.explicit,!1,"context",i)),i},n.prototype._encodeChoice=function(e,f){var n=this._baseState,d=n.choice[e.type];return d||o(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),d._encode(e.value,f)},n.prototype._encodePrimitive=function(e,f){var n=this._baseState;if("octstr"===e||"bitstr"===e||"ia5str"===e)return this._encodeStr(f,e);if("objid"===e&&n.args)return this._encodeObjid(f,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(f,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(f,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(f,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(f);throw new Error("Unsupported tag: "+e)}},{"../base":227,assert:148}],229:[function(e,f,n){function o(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function d(e,f){this.path=e,this.rethrow(f)}var i=e("util");n.Reporter=o,o.prototype.isError=function(e){return e instanceof d},o.prototype.enterKey=function(e){return this._reporterState.path.push(e)},o.prototype.leaveKey=function(e,f,n){var o=this._reporterState;o.path=o.path.slice(0,e-1),null!==o.obj&&(o.obj[f]=n)},o.prototype.enterObject=function(){var e=this._reporterState,f=e.obj;return e.obj={},f},o.prototype.leaveObject=function(e){var f=this._reporterState,n=f.obj;return f.obj=e,n},o.prototype.error=function(e){var f,n=this._reporterState,o=e instanceof d;if(f=o?e:new d(n.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw f;return o||n.errors.push(f),f},o.prototype.wrapResult=function(e){var f=this._reporterState;return f.options.partial?{result:this.isError(e)?null:e,errors:f.errors}:e},i.inherits(d,Error),d.prototype.rethrow=function(e){return this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace(this,d),this}},{util:186}],230:[function(e,f,n){var o=e("../constants");n.tagClass={0:"universal",1:"application",2:"context",3:"private"},n.tagClassByName=o._reverse(n.tagClass),n.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},n.tagByName=o._reverse(n.tag)},{"../constants":231}],231:[function(e,f,n){var o=n;o._reverse=function(e){var f={};return Object.keys(e).forEach(function(n){(0|n)==n&&(n=0|n);var o=e[n];f[o]=n}),f},o.der=e("./der")},{"./der":230}],232:[function(e,f){function n(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new o,this.tree._init(e.body)}function o(e){u.Node.call(this,"der",e)}function d(e,f){var n=e.readUInt8(f);if(e.isError(n))return n;var o=s.tagClass[n>>6],d=0===(32&n);if(31===(31&n)){var i=n;for(n=0;128===(128&i);){if(i=e.readUInt8(f),e.isError(i))return i;n<<=7,n|=127&i}}else n&=31;var t=s.tag[n];return{cls:o,primitive:d,tag:n,tagStr:t}}function i(e,f,n){var o=e.readUInt8(n);if(e.isError(o))return o;if(!f&&128===o)return null;if(0===(128&o))return o;var d=127&o;if(d>=4)return e.error("length octect is too long");o=0;for(var i=0;d>i;i++){o<<=8;var t=e.readUInt8(n);if(e.isError(t))return t;o|=t}return o}var t=e("util"),l=e("../../asn1"),u=l.base,p=l.bignum,s=l.constants.der;f.exports=n,n.prototype.decode=function(e,f){return e instanceof u.DecoderBuffer||(e=new u.DecoderBuffer(e,f)),this.tree._decode(e,f)},t.inherits(o,u.Node),o.prototype._peekTag=function(e,f){if(e.isEmpty())return!1;var n=e.save(),o=d(e,'Failed to peek tag: "'+f+'"');return e.isError(o)?o:(e.restore(n),o.tag===f||o.tagStr===f)},o.prototype._decodeTag=function(e,f,n){var o=d(e,'Failed to decode tag of "'+f+'"');if(e.isError(o))return o;var t=i(e,o.primitive,'Failed to get length of "'+f+'"');if(e.isError(t))return t;if(!n&&o.tag!==f&&o.tagStr!==f&&o.tagStr+"of"!==f)return e.error('Failed to match tag: "'+f+'"');if(o.primitive||null!==t)return e.skip(t,'Failed to match body of: "'+f+'"');var l=e.start(),u=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(u)?u:e.cut(l)},o.prototype._skipUntilEnd=function(e,f){for(;;){var n=d(e,f);if(e.isError(n))return n;var o=i(e,n.primitive,f);if(e.isError(o))return o;var t;if(t=n.primitive||null!==o?e.skip(o):this._skipUntilEnd(e,f),e.isError(t))return t;if("end"===n.tagStr)break}},o.prototype._decodeList=function(e,f,n){for(var o=[];!e.isEmpty();){var d=this._peekTag(e,"end");if(e.isError(d))return d;var i=n.decode(e,"der");if(e.isError(i)&&d)break;o.push(i)}return o},o.prototype._decodeStr=function(e,f){if("octstr"===f)return e.raw();if("bitstr"===f){var n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}return"ia5str"===f?e.raw().toString():this.error("Decoding of string type: "+f+" unsupported")},o.prototype._decodeObjid=function(e,f,n){for(var o=[],d=0;!e.isEmpty();){var i=e.readUInt8();d<<=7,d|=127&i,0===(128&i)&&(o.push(d),d=0)}128&i&&o.push(d);var t=o[0]/40|0,l=o[0]%40;return result=n?o:[t,l].concat(o.slice(1)),f&&(result=f[result.join(" ")]),result},o.prototype._decodeTime=function(e,f){var n=e.raw().toString();if("gentime"===f)var o=0|n.slice(0,4),d=0|n.slice(4,6),i=0|n.slice(6,8),t=0|n.slice(8,10),l=0|n.slice(10,12),u=0|n.slice(12,14);else{if("utctime"!==f)return this.error("Decoding "+f+" time is not supported yet");var o=0|n.slice(0,2),d=0|n.slice(2,4),i=0|n.slice(4,6),t=0|n.slice(6,8),l=0|n.slice(8,10),u=0|n.slice(10,12);o=70>o?2e3+o:1900+o}return Date.UTC(o,d-1,i,t,l,u,0)},o.prototype._decodeNull=function(){return null},o.prototype._decodeBool=function(e){var f=e.readUInt8();return e.isError(f)?f:0!==f},o.prototype._decodeInt=function(e,f){var n=0,o=e.raw();if(o.length>3)return new p(o);for(;!e.isEmpty();){n<<=8;var d=e.readUInt8();if(e.isError(d))return d;n|=d}return f&&(n=f[n]||n),n},o.prototype._use=function(e,f){return"function"==typeof e&&(e=e(f)),e._getDecoder("der").tree}},{"../../asn1":224,util:186}],233:[function(e,f,n){var o=n;o.der=e("./der")},{"./der":232}],234:[function(e,f){function n(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new o,this.tree._init(e.body)}function o(e){p.Node.call(this,"der",e)}function d(e){return 10>=e?"0"+e:e}function i(e,f,n,o){var d;if("seqof"===e?e="seq":"setof"===e&&(e="set"),y.tagByName.hasOwnProperty(e))d=y.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return o.error("Unknown tag: "+e);d=e}return d>=31?o.error("Multi-octet tag encoding unsupported"):(f||(d|=32),d|=y.tagClassByName[n||"universal"]<<6)}var t=e("util"),l=e("buffer").Buffer,u=e("../../asn1"),p=u.base,s=u.bignum,y=u.constants.der;f.exports=n,n.prototype.encode=function(e,f){return this.tree._encode(e,f).join()},t.inherits(o,p.Node),o.prototype._encodeComposite=function(e,f,n,o){var d=i(e,f,n,this.reporter);if(o.length<128){var t=new l(2);return t[0]=d,t[1]=o.length,this._createEncoderBuffer([t,o])}for(var u=1,p=o.length;p>=256;p>>=8)u++;var t=new l(2+u);t[0]=d,t[1]=128|u;for(var p=1+u,s=o.length;s>0;p--,s>>=8)t[p]=255&s;return this._createEncoderBuffer([t,o])},o.prototype._encodeStr=function(e,f){return"octstr"===f?this._createEncoderBuffer(e):"bitstr"===f?this._createEncoderBuffer([0|e.unused,e.data]):"ia5str"===f?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+f+" unsupported")},o.prototype._encodeObjid=function(e,f,n){if("string"==typeof e){if(!f)return this.reporter.error("string objid given, but no values map found");if(!f.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=f[e].split(/\s+/g);for(var o=0;o<e.length;o++)e[o]|=0}else Array.isArray(e)&&(e=e.slice());if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}for(var d=0,o=0;o<e.length;o++){var i=e[o];for(d++;i>=128;i>>=7)d++}for(var t=new l(d),u=t.length-1,o=e.length-1;o>=0;o--){var i=e[o];for(t[u--]=127&i;(i>>=7)>0;)t[u--]=128|127&i}return this._createEncoderBuffer(t)},o.prototype._encodeTime=function(e,f){var n,o=new Date(e);return"gentime"===f?n=[o.getFullYear(),d(o.getUTCMonth()+1),d(o.getUTCDate()),d(o.getUTCHours()),d(o.getUTCMinutes()),d(o.getUTCSeconds()),"Z"].join(""):"utctime"===f?n=[o.getFullYear()%100,d(o.getUTCMonth()+1),d(o.getUTCDate()),d(o.getUTCHours()),d(o.getUTCMinutes()),d(o.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+f+" time is not supported yet"),this._encodeStr(n,"octstr")},o.prototype._encodeNull=function(){return this._createEncoderBuffer("")},o.prototype._encodeInt=function(e,f){if("string"==typeof e){if(!f)return this.reporter.error("String int or enum given, but no values map");if(!f.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=f[e]}if(null!==s&&e instanceof s){var n=e.toArray();e.sign===!1&&128&n[0]&&n.unshift(0),e=new l(n)}if(l.isBuffer(e)){var o=e.length;0===e.length&&o++;var d=new l(o);return e.copy(d),0===e.length&&(d[0]=0),this._createEncoderBuffer(d)}if(128>e)return this._createEncoderBuffer(e);if(256>e)return this._createEncoderBuffer([0,e]);for(var o=1,i=e;i>=256;i>>=8)o++;for(var d=new Array(o),i=d.length-1;i>=0;i--)d[i]=255&e,e>>=8;return 128&d[0]&&d.unshift(0),this._createEncoderBuffer(new l(d))},o.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},o.prototype._use=function(e,f){return"function"==typeof e&&(e=e(f)),e._getEncoder("der").tree},o.prototype._skipDefault=function(e,f,n){var o,d=this._baseState;if(null===d["default"])return!1;var i=e.join();if(void 0===d.defaultBuffer&&(d.defaultBuffer=this._encodeValue(d["default"],f,n).join()),i.length!==d.defaultBuffer.length)return!1;for(o=0;o<i.length;o++)if(i[o]!==d.defaultBuffer[o])return!1;return!0}},{"../../asn1":224,buffer:150,util:186}],235:[function(e,f,n){var o=n;o.der=e("./der")},{"./der":234}],236:[function(e,f){function n(e,f){if(!e)throw new Error(f||"Assertion failed")}function o(e,f){e.super_=f;var n=function(){};n.prototype=f.prototype,e.prototype=new n,e.prototype.constructor=e}function d(e,f){return null!==e&&"object"==typeof e&&Array.isArray(e.words)?e:(this.sign=!1,this.words=null,this.length=0,this.red=null,void(null!==e&&this._init(e||0,f||10)))}function i(e,f){this.name=e,this.p=new d(f,16),this.n=this.p.bitLength(),this.k=new d(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function t(){i.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function l(){i.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function u(){i.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function p(){i.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")
}function s(e){if("string"==typeof e){var f=d._prime(e);this.m=f.p,this.prime=f}else this.m=e,this.prime=null}function y(e){s.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new d(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.invm(this.m),this.minv=this.rinv.mul(this.r).sub(new d(1)).div(this.m).neg().mod(this.r)}"object"==typeof f&&(f.exports=d),d.BN=d,d.wordSize=26,d.prototype._init=function(e,f){if("number"==typeof e)return 0>e&&(this.sign=!0,e=-e),void(67108864>e?(this.words=[67108863&e],this.length=1):(this.words=[67108863&e,e/67108864&67108863],this.length=2));if("object"==typeof e){n("number"==typeof e.length),this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;for(var d=0,o=e.length-1,i=0;o>=0;o-=3){var t=e[o]|e[o-1]<<8|e[o-2]<<16;this.words[i]|=t<<d&67108863,this.words[i+1]=t>>>26-d&67108863,d+=24,d>=26&&(d-=26,i++)}return this.strip()}"hex"===f&&(f=16),n(f===(0|f)&&f>=2&&36>=f),e=e.toString().replace(/\s+/g,"");var l=0;"-"===e[0]&&l++,16===f?this._parseHex(e,l):this._parseBase(e,f,l),"-"===e[0]&&(this.sign=!0),this.strip()},d.prototype._parseHex=function(e,f){this.length=Math.ceil((e.length-f)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;for(var o=0,n=e.length-6,d=0;n>=f;n-=6){var i=parseInt(e.slice(n,n+6),16);this.words[d]|=i<<o&67108863,this.words[d+1]|=i>>>26-o&4194303,o+=24,o>=26&&(o-=26,d++)}if(n+6!==f){var i=parseInt(e.slice(f,n+6),16);this.words[d]|=i<<o&67108863,this.words[d+1]|=i>>>26-o&4194303}this.strip()},d.prototype._parseBase=function(e,f,o){this.words=[0],this.length=1;for(var i=0,t=1,l=0,u=null,p=o;p<e.length;p++){var s,y=e[p];s=10===f||"9">=y?0|y:y>="a"?y.charCodeAt(0)-97+10:y.charCodeAt(0)-65+10,i*=f,i+=s,t*=f,l++,t>1048575&&(n(67108863>=t),u||(u=new d(t)),this.mul(u).copy(this),this.iadd(new d(i)),i=0,t=1,l=0)}0!==l&&(this.mul(new d(t)).copy(this),this.iadd(new d(i)))},d.prototype.copy=function(e){e.words=new Array(this.length);for(var f=0;f<this.length;f++)e.words[f]=this.words[f];e.length=this.length,e.sign=this.sign,e.red=this.red},d.prototype.clone=function(){var e=new d(null);return this.copy(e),e},d.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},d.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],r=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function(e,f){if(e=e||10,16===e||"hex"===e){for(var o="",d=0,f=0|f||1,i=0,t=0;t<this.length;t++){var l=this.words[t],u=(16777215&(l<<d|i)).toString(16);i=l>>>24-d&16777215,o=0!==i||t!==this.length-1?c[6-u.length]+u+o:u+o,d+=2,d>=26&&(d-=26,t--)}for(0!==i&&(o=i.toString(16)+o);o.length%f!==0;)o="0"+o;return this.sign&&(o="-"+o),o}if(e===(0|e)&&e>=2&&36>=e){var p=a[e],s=r[e],o="",y=this.clone();for(y.sign=!1;0!==y.cmpn(0);){var w=y.modn(s).toString(e);y=y.idivn(s),o=0!==y.cmpn(0)?c[p-w.length]+w+o:w+o}return 0===this.cmpn(0)&&(o="0"+o),this.sign&&(o="-"+o),o}n(!1,"Base should be between 2 and 36")},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toArray=function(){this.strip();var e=new Array(this.byteLength());e[0]=0;for(var f=this.clone(),n=0;0!==f.cmpn(0);n++){var o=f.andln(255);f.ishrn(8),e[e.length-n-1]=o}return e},d.prototype._countBits=function(e){return e>=33554432?26:e>=16777216?25:e>=8388608?24:e>=4194304?23:e>=2097152?22:e>=1048576?21:e>=524288?20:e>=262144?19:e>=131072?18:e>=65536?17:e>=32768?16:e>=16384?15:e>=8192?14:e>=4096?13:e>=2048?12:e>=1024?11:e>=512?10:e>=256?9:e>=128?8:e>=64?7:e>=32?6:e>=16?5:e>=8?4:e>=4?3:e>=2?2:e>=1?1:0},d.prototype.bitLength=function(){var e=0,f=this.words[this.length-1],e=this._countBits(f);return 26*(this.length-1)+e},d.prototype.byteLength=function(){this.words[this.length-1];return Math.ceil(this.bitLength()/8)},d.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var e=this.clone();return e.sign=!this.sign,e},d.prototype.iadd=function(e){if(this.sign&&!e.sign){this.sign=!1;var f=this.isub(e);return this.sign=!this.sign,this._normSign()}if(!this.sign&&e.sign){e.sign=!1;var f=this.isub(e);return e.sign=!0,f._normSign()}var n,o;this.length>e.length?(n=this,o=e):(n=e,o=this);for(var d=0,i=0;i<o.length;i++){var f=n.words[i]+o.words[i]+d;this.words[i]=67108863&f,d=f>>>26}for(;0!==d&&i<n.length;i++){var f=n.words[i]+d;this.words[i]=67108863&f,d=f>>>26}if(this.length=n.length,0!==d)this.words[this.length]=d,this.length++;else if(n!==this)for(;i<n.length;i++)this.words[i]=n.words[i];return this},d.prototype.add=function(e){if(e.sign&&!this.sign){e.sign=!1;var f=this.sub(e);return e.sign=!0,f}if(!e.sign&&this.sign){this.sign=!1;var f=e.sub(this);return this.sign=!0,f}return this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},d.prototype.isub=function(e){if(e.sign){e.sign=!1;var f=this.iadd(e);return e.sign=!0,f._normSign()}if(this.sign)return this.sign=!1,this.iadd(e),this.sign=!0,this._normSign();var n=this.cmp(e);if(0===n)return this.sign=!1,this.length=1,this.words[0]=0,this;if(n>0)var o=this,d=e;else var o=e,d=this;for(var i=0,t=0;t<d.length;t++){var f=o.words[t]-d.words[t]-i;0>f?(f+=67108864,i=1):i=0,this.words[t]=f}for(;0!==i&&t<o.length;t++){var f=o.words[t]-i;0>f?(f+=67108864,i=1):i=0,this.words[t]=f}if(0===i&&t<o.length&&o!==this)for(;t<o.length;t++)this.words[t]=o.words[t];return this.length=Math.max(this.length,t),o!==this&&(this.sign=!0),this.strip()},d.prototype.sub=function(e){return this.clone().isub(e)},d.prototype._smallMulTo=function(e,f){f.sign=e.sign!==this.sign,f.length=this.length+e.length;for(var n=0,o=0;o<f.length-1;o++){for(var d=n>>>26,i=67108863&n,t=Math.min(o,e.length-1),l=Math.max(0,o-this.length+1);t>=l;l++){var u=o-l,p=0|this.words[u],s=0|e.words[l],y=p*s,c=67108863&y;d=d+(y/67108864|0)|0,c=c+i|0,i=67108863&c,d=d+(c>>>26)|0}f.words[o]=i,n=d}return 0!==n?f.words[o]=n:f.length--,f.strip()},d.prototype._bigMulTo=function(e,f){f.sign=e.sign!==this.sign,f.length=this.length+e.length;for(var n=0,o=0,d=0;d<f.length-1;d++){var i=o;o=0;for(var t=67108863&n,l=Math.min(d,e.length-1),u=Math.max(0,d-this.length+1);l>=u;u++){var p=d-u,s=0|this.words[p],y=0|e.words[u],c=s*y,a=67108863&c;i=i+(c/67108864|0)|0,a=a+t|0,t=67108863&a,i=i+(a>>>26)|0,o+=i>>>26,i&=67108863}f.words[d]=t,n=i,i=o}return 0!==n?f.words[d]=n:f.length--,f.strip()},d.prototype.mulTo=function(e,f){var n;return n=this.length+e.length<63?this._smallMulTo(e,f):this._bigMulTo(e,f)},d.prototype.mul=function(e){var f=new d(null);return f.words=new Array(this.length+e.length),this.mulTo(e,f)},d.prototype.imul=function(e){if(0===this.cmpn(0)||0===e.cmpn(0))return this.words[0]=0,this.length=1,this;var f=this.length,n=e.length;this.sign=e.sign!==this.sign,this.length=this.length+e.length,this.words[this.length-1]=0;for(var o=this.length-2;o>=0;o--){for(var d=0,i=0,t=Math.min(o,n-1),l=Math.max(0,o-f+1);t>=l;l++){var u=o-l,p=this.words[u],s=e.words[l],y=p*s,c=67108863&y;d+=y/67108864|0,c+=i,i=67108863&c,d+=c>>>26}this.words[o]=i,this.words[o+1]+=d,d=0}for(var d=0,u=1;u<this.length;u++){var a=this.words[u]+d;this.words[u]=67108863&a,d=a>>>26}return this.strip()},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.mul(this)},d.prototype.ishln=function(e){n("number"==typeof e&&e>=0);{var f=e%26,o=(e-f)/26,d=67108863>>>26-f<<26-f;this.clone()}if(0!==f){for(var i=0,t=0;t<this.length;t++){var l=this.words[t]&d,u=this.words[t]-l<<f;this.words[t]=u|i,i=l>>>26-f}i&&(this.words[t]=i,this.length++)}if(0!==o){for(var t=this.length-1;t>=0;t--)this.words[t+o]=this.words[t];for(var t=0;o>t;t++)this.words[t]=0;this.length+=o}return this.strip()},d.prototype.ishrn=function(e,f,o){n("number"==typeof e&&e>=0),f=f?(f-f%26)/26:0;var d=e%26,i=Math.min((e-d)/26,this.length),t=67108863^67108863>>>d<<d,l=o;if(f-=i,f=Math.max(0,f),l){for(var u=0;i>u;u++)l.words[u]=this.words[u];l.length=i}if(0===i);else if(this.length>i){this.length-=i;for(var u=0;u<this.length;u++)this.words[u]=this.words[u+i]}else this.words[0]=0,this.length=1;for(var p=0,u=this.length-1;u>=0&&(0!==p||u>=f);u--){var s=this.words[u];this.words[u]=p<<26-d|s>>>d,p=s&t}return l&&0!==p&&(l.words[l.length++]=p),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),o?{hi:this,lo:l}:this},d.prototype.shln=function(e){return this.clone().ishln(e)},d.prototype.shrn=function(e){return this.clone().ishrn(e)},d.prototype.testn=function(e){n("number"==typeof e&&e>=0);var f=e%26,o=(e-f)/26,d=1<<f;if(this.length<=o)return!1;var i=this.words[o];return!!(i&d)},d.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var f=e%26,o=(e-f)/26;if(n(!this.sign,"imaskn works only with positive numbers"),0!==f&&o++,this.length=Math.min(o,this.length),0!==f){var d=67108863^67108863>>>f<<f;this.words[this.length-1]&=d}return this.strip()},d.prototype.maskn=function(e){return this.clone().imaskn(e)},d.prototype.iaddn=function(e){if(n("number"==typeof e),0>e)return this.isubn(-e);if(this.sign)return 1===this.length&&this.words[0]<e?(this.words[0]=e-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(e),this.sign=!0,this);this.words[0]+=e;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},d.prototype.isubn=function(e){if(n("number"==typeof e),0>e)return this.iaddn(-e);if(this.sign)return this.sign=!1,this.iaddn(e),this.sign=!0,this;this.words[0]-=e;for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this.strip()},d.prototype.addn=function(e){return this.clone().iaddn(e)},d.prototype.subn=function(e){return this.clone().isubn(e)},d.prototype.iabs=function(){return this.sign=!1,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._wordDiv=function(e,f){for(var n=this.length-e.length,o=this.clone(),i=e,t="mod"!==f&&new d(0);o.length>i.length;){var l=67108864*o.words[o.length-1]+o.words[o.length-2],u=l/i.words[i.length-1],p=u/67108864|0,s=67108863&u;u=new d(null),u.words=[s,p],u.length=2;var n=26*(o.length-i.length-1);if(t){var y=u.shln(n);o.sign?t.isub(y):t.iadd(y)}u=u.mul(i).ishln(n),o.sign?o.iadd(u):o.isub(u)}for(;o.ucmp(i)>=0;){var l=o.words[o.length-1],u=new d(l/i.words[i.length-1]|0),n=26*(o.length-i.length);if(t){var y=u.shln(n);o.sign?t.isub(y):t.iadd(y)}u=u.mul(i).ishln(n),o.sign?o.iadd(u):o.isub(u)}return o.sign&&(t&&t.isubn(1),o.iadd(i)),{div:t?t:null,mod:o}},d.prototype.divmod=function(e,f){if(n(0!==e.cmpn(0)),this.sign&&!e.sign){var o,i,t=this.neg().divmod(e,f);return"mod"!==f&&(o=t.div.neg()),"div"!==f&&(i=0===t.mod.cmpn(0)?t.mod:e.sub(t.mod)),{div:o,mod:i}}if(!this.sign&&e.sign){var o,t=this.divmod(e.neg(),f);return"mod"!==f&&(o=t.div.neg()),{div:o,mod:t.mod}}return this.sign&&e.sign?this.neg().divmod(e.neg(),f):e.length>this.length||this.cmp(e)<0?{div:new d(0),mod:this}:1===e.length?"div"===f?{div:this.divn(e.words[0]),mod:null}:"mod"===f?{div:null,mod:new d(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new d(this.modn(e.words[0]))}:this._wordDiv(e,f)},d.prototype.div=function(e){return this.divmod(e,"div").div},d.prototype.mod=function(e){return this.divmod(e,"mod").mod},d.prototype.divRound=function(e){var f=this.divmod(e);if(0===f.mod.cmpn(0))return f.div;var n=f.div.sign?f.mod.isub(e):f.mod,o=e.shrn(1),d=e.andln(1),i=n.cmp(o);return 0>i||1===d&&0===i?f.div:f.div.sign?f.div.isubn(1):f.div.iaddn(1)},d.prototype.modn=function(e){n(67108863>=e);for(var f=(1<<26)%e,o=0,d=this.length-1;d>=0;d--)o=(f*o+this.words[d])%e;return o},d.prototype.idivn=function(e){n(67108863>=e);for(var f=0,o=this.length-1;o>=0;o--){var d=this.words[o]+67108864*f;this.words[o]=d/e|0,f=d%e}return this.strip()},d.prototype.divn=function(e){return this.clone().idivn(e)},d.prototype._egcd=function(e,f){n(!f.sign),n(0!==f.cmpn(0));var o=this,i=f.clone();o=o.sign?o.mod(f):o.clone();for(var t=new d(0);i.isEven();)i.ishrn(1);for(var l=i.clone();o.cmpn(1)>0&&i.cmpn(1)>0;){for(;o.isEven();)o.ishrn(1),e.isEven()?e.ishrn(1):e.iadd(l).ishrn(1);for(;i.isEven();)i.ishrn(1),t.isEven()?t.ishrn(1):t.iadd(l).ishrn(1);o.cmp(i)>=0?(o.isub(i),e.isub(t)):(i.isub(o),t.isub(e))}return 0===o.cmpn(1)?e:t},d.prototype.gcd=function(e){if(0===this.cmpn(0))return e.clone();if(0===e.cmpn(0))return this.clone();var f=this.clone(),n=e.clone();f.sign=!1,n.sign=!1;for(var o=0;f.isEven()&&n.isEven();o++)f.ishrn(1),n.ishrn(1);for(;f.isEven();)f.ishrn(1);do{for(;n.isEven();)n.ishrn(1);if(f.cmp(n)<0){var d=f;f=n,n=d}f.isub(f.div(n).mul(n))}while(0!==f.cmpn(0)&&0!==n.cmpn(0));return 0===f.cmpn(0)?n.ishln(o):f.ishln(o)},d.prototype.invm=function(e){return this._egcd(new d(1),e).mod(e)},d.prototype.isEven=function(){return 0===(1&this.words[0])},d.prototype.isOdd=function(){return 1===(1&this.words[0])},d.prototype.andln=function(e){return this.words[0]&e},d.prototype.bincn=function(e){n("number"==typeof e);var f=e%26,o=(e-f)/26,d=1<<f;if(this.length<=o){for(var i=this.length;o+1>i;i++)this.words[i]=0;return this.words[o]|=d,this.length=o+1,this}for(var t=d,i=o;0!==t&&i<this.length;i++){var l=this.words[i];l+=t,t=l>>>26,l&=67108863,this.words[i]=l}return 0!==t&&(this.words[i]=t,this.length++),this},d.prototype.cmpn=function(e){var f=0>e;if(f&&(e=-e),this.sign&&!f)return-1;if(!this.sign&&f)return 1;e&=67108863,this.strip();var n;if(this.length>1)n=1;else{var o=this.words[0];n=o===e?0:e>o?-1:1}return this.sign&&(n=-n),n},d.prototype.cmp=function(e){if(this.sign&&!e.sign)return-1;if(!this.sign&&e.sign)return 1;var f=this.ucmp(e);return this.sign?-f:f},d.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var f=0,n=this.length-1;n>=0;n--){var o=this.words[n],d=e.words[n];if(o!==d){d>o?f=-1:o>d&&(f=1);break}}return f},d.red=function(e){return new s(e)},d.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(!this.sign,"red works only with positives"),e.convertTo(this)._forceRed(e)},d.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(e){return this.red=e,this},d.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},d.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},d.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},d.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},d.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},d.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},d.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},d.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},d.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};i.prototype._tmp=function(){var e=new d(null);return e.words=new Array(Math.ceil(this.n/13)),e},i.prototype.ireduce=function(e){var f,n=e;do{var o=n.ishrn(this.n,0,this.tmp);n=this.imulK(o.hi),n=n.iadd(o.lo),f=n.bitLength()}while(f>this.n);var d=f<this.n?-1:n.cmp(this.p);return 0===d?(n.words[0]=0,n.length=1):d>0?n.isub(this.p):n.strip(),n},i.prototype.imulK=function(e){return e.imul(this.k)},o(t,i),t.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var f=e.length-3;f>=0;f--){var n=e.words[f],o=64*n,d=977*n;o+=d/67108864|0;var i=o/67108864|0;o&=67108863,d&=67108863,e.words[f+2]+=i,e.words[f+1]+=o,e.words[f]=d}var n=e.words[e.length-2];return n>=67108864&&(e.words[e.length-1]+=n>>>26,e.words[e.length-2]=67108863&n),0===e.words[e.length-1]&&e.length--,0===e.words[e.length-1]&&e.length--,e},o(l,i),o(u,i),o(p,i),p.prototype.imulK=function(e){for(var f=0,n=0;n<e.length;n++){var o=19*e.words[n]+f,d=67108863&o;o>>>=26,e.words[n]=d,f=o}return 0!==f&&(e.words[e.length++]=f),e},d._prime=function b(e){if(w[e])return w[e];var b;if("k256"===e)b=new t;else if("p224"===e)b=new l;else if("p192"===e)b=new u;else{if("p25519"!==e)throw new Error("Unknown prime "+e);b=new p}return w[e]=b,b},s.prototype._verify1=function(e){n(!e.sign,"red works only with positives"),n(e.red,"red works only with red numbers")},s.prototype._verify2=function(e,f){n(!e.sign&&!f.sign,"red works only with positives"),n(e.red&&e.red===f.red,"red works only with red numbers")},s.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.mod(this.m)._forceRed(this)},s.prototype.neg=function(e){var f=e.clone();return f.sign=!f.sign,f.iadd(this.m)._forceRed(this)},s.prototype.add=function(e,f){this._verify2(e,f);var n=e.add(f);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},s.prototype.iadd=function(e,f){this._verify2(e,f);var n=e.iadd(f);return n.cmp(this.m)>=0&&n.isub(this.m),n},s.prototype.sub=function(e,f){this._verify2(e,f);var n=e.sub(f);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},s.prototype.isub=function(e,f){this._verify2(e,f);var n=e.isub(f);return n.cmpn(0)<0&&n.iadd(this.m),n},s.prototype.shl=function(e,f){return this._verify1(e),this.imod(e.shln(f))},s.prototype.imul=function(e,f){return this._verify2(e,f),this.imod(e.imul(f))},s.prototype.mul=function(e,f){return this._verify2(e,f),this.imod(e.mul(f))},s.prototype.isqr=function(e){return this.imul(e,e)},s.prototype.sqr=function(e){return this.mul(e,e)},s.prototype.sqrt=function(e){if(0===e.cmpn(0))return e.clone();var f=this.m.andln(3);if(n(f%2===1),3===f){var o=this.m.add(new d(1)).ishrn(2),i=this.pow(e,o);return i}for(var t=this.m.subn(1),l=0;0!==t.cmpn(0)&&0===t.andln(1);)l++,t.ishrn(1);n(0!==t.cmpn(0));var u=new d(1).toRed(this),p=u.redNeg(),s=this.m.subn(1).ishrn(1),y=this.m.bitLength();for(y=new d(2*y*y).toRed(this);0!==this.pow(y,s).cmp(p);)y.redIAdd(p);for(var c=this.pow(y,t),i=this.pow(e,t.addn(1).ishrn(1)),a=this.pow(e,t),r=l;0!==a.cmp(u);){for(var w=a,b=0;0!==w.cmp(u);b++)w=w.redSqr();n(r>b);var m=this.pow(c,new d(1).ishln(r-b-1));i=i.redMul(m),c=m.redSqr(),a=a.redMul(c),r=b}return i},s.prototype.invm=function(e){var f=e._egcd(new d(1),this.m);return f.sign?(f.sign=!1,this.imod(f).redNeg()):this.imod(f)},s.prototype.pow=function(e,f){for(var n=[],o=f.clone();0!==o.cmpn(0);)n.push(o.andln(1)),o.ishrn(1);for(var d=e,i=0;i<n.length&&0===n[i];i++,d=this.sqr(d));if(++i<n.length)for(var o=this.sqr(d);i<n.length;i++,o=this.sqr(o))0!==n[i]&&(d=this.mul(d,o));return d},s.prototype.convertTo=function(e){return e.clone()},s.prototype.convertFrom=function(e){var f=e.clone();return f.red=null,f},d.mont=function(e){return new y(e)},o(y,s),y.prototype.convertTo=function(e){return this.imod(e.shln(this.shift))},y.prototype.convertFrom=function(e){var f=this.imod(e.mul(this.rinv));return f.red=null,f},y.prototype.imul=function(e,f){if(0===e.cmpn(0)||0===f.cmpn(0))return e.words[0]=0,e.length=1,e;var n=e.imul(f),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=n.isub(o).ishrn(this.shift),i=d;return d.cmp(this.m)>=0?i=d.isub(this.m):d.cmpn(0)<0&&(i=d.iadd(this.m)),i._forceRed(this)},y.prototype.mul=function(e,f){if(0===e.cmpn(0)||0===f.cmpn(0))return new d(0)._forceRed(this);var n=e.mul(f),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(o).ishrn(this.shift),t=i;return i.cmp(this.m)>=0?t=i.isub(this.m):i.cmpn(0)<0&&(t=i.iadd(this.m)),t._forceRed(this)},y.prototype.invm=function(e){var f=this.imod(e.invm(this.m).mul(this.r2));return f._forceRed(this)}},{}],237:[function(e,f,n){var o=n;o.version=e("../package.json").version,o.utils=e("./elliptic/utils"),o.rand=e("brorand"),o.hmacDRBG=e("./elliptic/hmac-drbg"),o.curve=e("./elliptic/curve"),o.curves=e("./elliptic/curves"),o.ec=e("./elliptic/ec")},{"../package.json":256,"./elliptic/curve":240,"./elliptic/curves":243,"./elliptic/ec":244,"./elliptic/hmac-drbg":247,"./elliptic/utils":248,brorand:249}],238:[function(e,f){function n(e,f){this.type=e,this.p=new i(f.p,16),this.red=f.prime?i.red(f.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=f.n&&new i(f.n,16),this.g=f.g&&this.pointFromJSON(f.g,f.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4)}function o(e,f){this.curve=e,this.type=f,this.precomputed=null}var d=e("assert"),i=e("bn.js"),t=e("../../elliptic"),l=t.utils.getNAF,u=t.utils.getJSF;f.exports=n,n.prototype.point=function(){throw new Error("Not implemented")},n.prototype.validate=function(){throw new Error("Not implemented")},n.prototype._fixedNafMul=function(e,f){var n=e._getDoubles(),o=l(f,1),d=(1<<n.step+1)-(n.step%2===0?2:1);d/=3;for(var i=[],t=0;t<o.length;t+=n.step){for(var u=0,f=t+n.step-1;f>=t;f--)u=(u<<1)+o[f];i.push(u)}for(var p=this.jpoint(null,null,null),s=this.jpoint(null,null,null),y=d;y>0;y--){for(var t=0;t<i.length;t++){var u=i[t];u===y?s=s.mixedAdd(n.points[t]):u===-y&&(s=s.mixedAdd(n.points[t].neg()))}p=p.add(s)}return p.toP()},n.prototype._wnafMul=function(e,f){var n=4,o=e._getNAFPoints(n);n=o.wnd;for(var i=o.points,t=l(f,n),u=this.jpoint(null,null,null),p=t.length-1;p>=0;p--){for(var f=0;p>=0&&0===t[p];p--)f++;if(p>=0&&f++,u=u.dblp(f),0>p)break;var s=t[p];d(0!==s),u="affine"===e.type?u.mixedAdd(s>0?i[s-1>>1]:i[-s-1>>1].neg()):u.add(s>0?i[s-1>>1]:i[-s-1>>1].neg())}return"affine"===e.type?u.toP():u},n.prototype._wnafMulAdd=function(e,f,n,o){for(var d=this._wnafT1,i=this._wnafT2,t=this._wnafT3,p=0,s=0;o>s;s++){var y=f[s],c=y._getNAFPoints(e);d[s]=c.wnd,i[s]=c.points}for(var s=o-1;s>=1;s-=2){var a=s-1,r=s;if(1===d[a]&&1===d[r]){var w=[f[a],null,null,f[r]];0===f[a].y.cmp(f[r].y)?(w[1]=f[a].add(f[r]),w[2]=f[a].toJ().mixedAdd(f[r].neg())):0===f[a].y.cmp(f[r].y.redNeg())?(w[1]=f[a].toJ().mixedAdd(f[r]),w[2]=f[a].add(f[r].neg())):(w[1]=f[a].toJ().mixedAdd(f[r]),w[2]=f[a].toJ().mixedAdd(f[r].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],m=u(n[a],n[r]);p=Math.max(m[0].length,p),t[a]=new Array(p),t[r]=new Array(p);for(var g=0;p>g;g++){var x=0|m[0][g],P=0|m[1][g];t[a][g]=b[3*(x+1)+(P+1)],t[r][g]=0,i[a]=w}}else t[a]=l(n[a],d[a]),t[r]=l(n[r],d[r]),p=Math.max(t[a].length,p),p=Math.max(t[r].length,p)}for(var j=this.jpoint(null,null,null),v=this._wnafT4,s=p;s>=0;s--){for(var M=0;s>=0;){for(var X=!0,g=0;o>g;g++)v[g]=0|t[g][s],0!==v[g]&&(X=!1);if(!X)break;M++,s--}if(s>=0&&M++,j=j.dblp(M),0>s)break;for(var g=0;o>g;g++){var y,h=v[g];0!==h&&(h>0?y=i[g][h-1>>1]:0>h&&(y=i[g][-h-1>>1].neg()),j="affine"===y.type?j.mixedAdd(y):j.add(y))}}for(var s=0;o>s;s++)i[s]=null;return j.toP()},n.BasePoint=o,o.prototype.validate=function(){return this.curve.validate(this)},o.prototype.precompute=function(e){if(this.precomputed)return this;var f={doubles:null,naf:null,beta:null};return f.naf=this._getNAFPoints(8),f.doubles=this._getDoubles(4,e),f.beta=this._getBeta(),this.precomputed=f,this},o.prototype._getDoubles=function(e,f){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],o=this,d=0;f>d;d+=e){for(var i=0;e>i;i++)o=o.dbl();n.push(o)}return{step:e,points:n}},o.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var f=[this],n=(1<<e)-1,o=1===n?null:this.dbl(),d=1;n>d;d++)f[d]=f[d-1].add(o);return{wnd:e,points:f}},o.prototype._getBeta=function(){return null},o.prototype.dblp=function(e){for(var f=this,n=0;e>n;n++)f=f.dbl();return f}},{"../../elliptic":237,assert:148,"bn.js":236}],239:[function(e,f){function n(e){this.twisted=1!=e.a,this.mOneA=this.twisted&&-1==e.a,this.extended=this.mOneA,p.call(this,"mont",e),this.a=new l(e.a,16).mod(this.red.m).toRed(this.red),this.c=new l(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new l(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),d(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==e.c}function o(e,f,n,o,d){p.BasePoint.call(this,e,"projective"),null===f&&null===n&&null===o?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new l(f,16),this.y=new l(n,16),this.z=o?new l(o,16):this.curve.one,this.t=d&&new l(d,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}{var d=e("assert"),i=e("../curve"),t=e("../../elliptic"),l=e("bn.js"),u=e("inherits"),p=i.base;t.utils.getNAF}u(n,p),f.exports=n,n.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},n.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},n.prototype.point=function(e,f,n,d){return new o(this,e,f,n,d)},n.prototype.jpoint=function(e,f,n,o){return this.point(e,f,n,o)},n.prototype.pointFromJSON=function(e){return o.fromJSON(this,e)},n.prototype.pointFromX=function(e,f){f=new l(f,16),f.red||(f=f.toRed(this.red));var n=f.redSqr(),o=this.c2.redSub(this.a.redMul(n)),d=this.one.redSub(this.c2.redMul(this.d).redMul(n)),t=o.redMul(d.redInvm()).redSqrt(),u=t.fromRed().isOdd();return(e&&!u||!e&&u)&&(t=t.redNeg()),this.point(f,t,i.one)},n.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var f=e.x.redSqr(),n=e.y.redSqr(),o=f.redMul(this.a).redAdd(n),d=this.c2.redMul(this.one.redAdd(this.d.redMul(f).redMul(n)));return 0===o.cmp(d)},u(o,p.BasePoint),o.fromJSON=function(e,f){return new o(e,f[0],f[1],f[2])},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},o.prototype._extDbl=function(){var e=this.x.redSqr(),f=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var o=this.curve._mulA(e),d=this.x.redAdd(this.y).redSqr().redISub(e).redISub(f),i=o.redAdd(f),t=i.redSub(n),l=o.redSub(f),u=d.redMul(t),p=i.redMul(l),s=d.redMul(l),y=t.redMul(i);return this.curve.point(u,p,y,s)},o.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),f=this.x.redSqr(),n=this.y.redSqr();if(this.curve.twisted){var o=this.curve._mulA(f),d=o.redAdd(n);if(this.zOne)var i=e.redSub(f).redSub(n).redMul(d.redSub(this.curve.two)),t=d.redMul(o.redSub(n)),l=d.redSqr().redSub(d).redSub(d);else var u=this.z.redSqr(),p=d.redSub(u).redISub(u),i=e.redSub(f).redISub(n).redMul(p),t=d.redMul(o.redSub(n)),l=d.redMul(p)}else var o=f.redAdd(n),u=this.curve._mulC(redMul(this.z)).redSqr(),p=o.redSub(u).redSub(u),i=this.curve._mulC(e.redISub(o)).redMul(p),t=this.curve._mulC(o).redMul(f.redISub(n)),l=o.redMul(p);return this.curve.point(i,t,l)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},o.prototype._extAdd=function(e){var f=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),o=this.t.redMul(this.curve.dd).redMul(e.t),d=this.z.redMul(e.z.redAdd(e.z)),i=n.redSub(f),t=d.redSub(o),l=d.redAdd(o),u=n.redAdd(f),p=i.redMul(t),s=l.redMul(u),y=i.redMul(u),c=t.redMul(l);return this.curve.point(p,s,c,y)},o.prototype._projAdd=function(e){var f=this.z.redMul(e.z),n=f.redSqr(),o=this.x.redMul(e.x),d=this.y.redMul(e.y),i=this.curve.d.redMul(o).redMul(d),t=n.redSub(i),l=n.redAdd(i),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(d),p=f.redMul(t).redMul(u);if(this.curve.twisted)var s=f.redMul(l).redMul(d.redSub(this.curve._mulA(o))),y=t.redMul(l);else var s=f.redMul(l).redMul(d.redSub(o)),y=this.curve._mulC(t).redMul(l);return this.curve.point(p,s,y)},o.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},o.prototype.mul=function(e){return this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},o.prototype.mulAdd=function(e,f,n){return this.curve._wnafMulAdd(1,[this,f],[e,n],2)},o.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},o.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},o.prototype.getX=function(){return this.normalize(),this.x.fromRed()},o.prototype.getY=function(){return this.normalize(),this.y.fromRed()},o.prototype.toP=o.prototype.normalize,o.prototype.mixedAdd=o.prototype.add},{"../../elliptic":237,"../curve":240,assert:148,"bn.js":236,inherits:257}],240:[function(e,f,n){var o=n;o.base=e("./base"),o["short"]=e("./short"),o.mont=e("./mont"),o.edwards=e("./edwards")},{"./base":238,"./edwards":239,"./mont":241,"./short":242}],241:[function(e,f){function n(e){u.call(this,"mont",e),this.a=new t(e.a,16).toRed(this.red),this.b=new t(e.b,16).toRed(this.red),this.i4=new t(4).toRed(this.red).redInvm(),this.two=new t(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function o(e,f,n){u.BasePoint.call(this,e,"projective"),null===f&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new t(f,16),this.z=new t(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}{var d=(e("assert"),e("../curve")),i=e("../../elliptic"),t=e("bn.js"),l=e("inherits"),u=d.base;i.utils.getNAF}l(n,u),f.exports=n,n.prototype.point=function(e,f){return new o(this,e,f)},n.prototype.pointFromJSON=function(e){return o.fromJSON(this,e)},n.prototype.validate=function(e){var f=e.normalize().x,n=f.redSqr(),o=n.redMul(f).redAdd(n.redMul(this.a)).redAdd(f),d=o.redSqrt();return 0===d.redSqr().cmp(o)},l(o,u.BasePoint),o.prototype.precompute=function(){},o.fromJSON=function(e,f){return new o(e,f[0],f[1]||e.one)},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"
},o.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},o.prototype.dbl=function(){var e=this.x.redAdd(this.z),f=e.redSqr(),n=this.x.redSub(this.z),o=n.redSqr(),d=f.redSub(o),i=f.redMul(o),t=d.redMul(o.redAdd(this.curve.a24.redMul(d)));return this.curve.point(i,t)},o.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},o.prototype.diffAdd=function(e,f){var n=this.x.redAdd(this.z),o=this.x.redSub(this.z),d=e.x.redAdd(e.z),i=e.x.redSub(e.z),t=i.redMul(n),l=d.redMul(o),u=f.z.redMul(t.redAdd(l).redSqr()),p=f.x.redMul(t.redISub(l).redSqr());return this.curve.point(u,p)},o.prototype.mul=function(e){for(var f=e.clone(),n=this,o=this.curve.point(null,null),d=this,i=[];0!==f.cmpn(0);f.ishrn(1))i.push(f.andln(1));for(var t=i.length-1;t>=0;t--)0===i[t]?(n=n.diffAdd(o,d),o=o.dbl()):(o=n.diffAdd(o,d),n=n.dbl());return o},o.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},o.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},o.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../../elliptic":237,"../curve":240,assert:148,"bn.js":236,inherits:257}],242:[function(e,f){function n(e){s.call(this,"short",e),this.a=new u(e.a,16).toRed(this.red),this.b=new u(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function o(e,f,n,o){s.BasePoint.call(this,e,"affine"),null===f&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new u(f,16),this.y=new u(n,16),o&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function d(e,f,n,o){s.BasePoint.call(this,e,"jacobian"),null===f&&null===n&&null===o?(this.x=this.curve.one,this.y=this.curve.one,this.z=new u(0)):(this.x=new u(f,16),this.y=new u(n,16),this.z=new u(o,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}{var i=e("assert"),t=e("../curve"),l=e("../../elliptic"),u=e("bn.js"),p=e("inherits"),s=t.base;l.utils.getNAF}p(n,s),f.exports=n,n.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var f,n;if(e.beta)f=new u(e.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);f=o[0].cmp(o[1])<0?o[0]:o[1],f=f.toRed(this.red)}if(e.lambda)n=new u(e.lambda,16);else{var d=this._getEndoRoots(this.n);0===this.g.mul(d[0]).x.cmp(this.g.x.redMul(f))?n=d[0]:(n=d[1],i(0===this.g.mul(n).x.cmp(this.g.x.redMul(f))))}var t;return t=e.basis?e.basis.map(function(e){return{a:new u(e.a,16),b:new u(e.b,16)}}):this._getEndoBasis(n),{beta:f,lambda:n,basis:t}}},n.prototype._getEndoRoots=function(e){var f=e===this.p?this.red:u.mont(e),n=new u(2).toRed(f).redInvm(),o=n.redNeg(),d=(new u(1).toRed(f),new u(3).toRed(f).redNeg().redSqrt().redMul(n)),i=o.redAdd(d).fromRed(),t=o.redSub(d).fromRed();return[i,t]},n.prototype._getEndoBasis=function(e){for(var f,n,o,d,i,t,l,p=this.n.shrn(Math.floor(this.n.bitLength()/2)),s=e,y=this.n.clone(),c=new u(1),a=new u(0),r=new u(0),w=new u(1),b=0;0!==s.cmpn(0);){var m=y.div(s),g=y.sub(m.mul(s)),x=r.sub(m.mul(c)),P=w.sub(m.mul(a));if(!o&&g.cmp(p)<0)f=l.neg(),n=c,o=g.neg(),d=x;else if(o&&2===++b)break;l=g,y=s,s=g,r=c,c=x,w=a,a=P}i=g.neg(),t=x;var j=o.sqr().add(d.sqr()),v=i.sqr().add(t.sqr());return v.cmp(j)>=0&&(i=f,t=n),o.sign&&(o=o.neg(),d=d.neg()),i.sign&&(i=i.neg(),t=t.neg()),[{a:o,b:d},{a:i,b:t}]},n.prototype._endoSplit=function(e){var f=this.endo.basis,n=f[0],o=f[1],d=o.b.mul(e).divRound(this.n),i=n.b.neg().mul(e).divRound(this.n),t=d.mul(n.a),l=i.mul(o.a),u=d.mul(n.b),p=i.mul(o.b),s=e.sub(t).sub(l),y=u.add(p).neg();return{k1:s,k2:y}},n.prototype.point=function(e,f,n){return new o(this,e,f,n)},n.prototype.pointFromX=function(e,f){f=new u(f,16),f.red||(f=f.toRed(this.red));var n=f.redSqr().redMul(f).redIAdd(f.redMul(this.a)).redIAdd(this.b),o=n.redSqrt(),d=o.fromRed().isOdd();return(e&&!d||!e&&d)&&(o=o.redNeg()),this.point(f,o)},n.prototype.jpoint=function(e,f,n){return new d(this,e,f,n)},n.prototype.pointFromJSON=function(e,f){return o.fromJSON(this,e,f)},n.prototype.validate=function(e){if(e.inf)return!0;var f=e.x,n=e.y,o=this.a.redMul(f),d=f.redSqr().redMul(f).redIAdd(o).redIAdd(this.b);return 0===n.redSqr().redISub(d).cmpn(0)},n.prototype._endoWnafMulAdd=function(e,f){for(var n=this._endoWnafT1,o=this._endoWnafT2,d=0;d<e.length;d++){var i=this._endoSplit(f[d]),t=e[d],l=t._getBeta();i.k1.sign&&(i.k1.sign=!i.k1.sign,t=t.neg(!0)),i.k2.sign&&(i.k2.sign=!i.k2.sign,l=l.neg(!0)),n[2*d]=t,n[2*d+1]=l,o[2*d]=i.k1,o[2*d+1]=i.k2}for(var u=this._wnafMulAdd(1,n,o,2*d),p=0;2*d>p;p++)n[p]=null,o[p]=null;return u},p(o,s.BasePoint),o.prototype._getBeta=function(){function e(e){return o.point(e.x.redMul(o.endo.beta),e.y)}if(this.curve.endo){var f=this.precomputed;if(f&&f.beta)return f.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(f){var o=this.curve;f.beta=n,n.precomputed={beta:null,naf:f.naf&&{wnd:f.naf.wnd,points:f.naf.points.map(e)},doubles:f.doubles&&{step:f.doubles.step,points:f.doubles.points.map(e)}}}return n}},o.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},o.fromJSON=function(e,f,n){function o(f){return e.point(f[0],f[1],n)}"string"==typeof f&&(f=JSON.parse(f));var d=e.point(f[0],f[1],n);if(!f[2])return d;var i=f[2];return d.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[d].concat(i.doubles.points.map(o))},naf:i.naf&&{wnd:i.naf.wnd,points:[d].concat(i.naf.points.map(o))}},d},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return this.inf},o.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var f=this.y.redSub(e.y);0!==f.cmpn(0)&&(f=f.redMul(this.x.redSub(e.x).redInvm()));var n=f.redSqr().redISub(this.x).redISub(e.x),o=f.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,o)},o.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var f=this.curve.a,n=this.x.redSqr(),o=e.redInvm(),d=n.redAdd(n).redIAdd(n).redIAdd(f).redMul(o),i=d.redSqr().redISub(this.x.redAdd(this.x)),t=d.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,t)},o.prototype.getX=function(){return this.x.fromRed()},o.prototype.getY=function(){return this.y.fromRed()},o.prototype.mul=function(e){return e=new u(e,16),this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},o.prototype.mulAdd=function(e,f,n){var o=[this,f],d=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(o,d):this.curve._wnafMulAdd(1,o,d,2)},o.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},o.prototype.neg=function(e){function f(e){return e.neg()}if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var o=this.precomputed;n.precomputed={naf:o.naf&&{wnd:o.naf.wnd,points:o.naf.points.map(f)},doubles:o.doubles&&{step:o.doubles.step,points:o.doubles.points.map(f)}}}return n},o.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e},p(d,s.BasePoint),d.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),f=e.redSqr(),n=this.x.redMul(f),o=this.y.redMul(f).redMul(e);return this.curve.point(n,o)},d.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},d.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var f=e.z.redSqr(),n=this.z.redSqr(),o=this.x.redMul(f),d=e.x.redMul(n),i=this.y.redMul(f.redMul(e.z)),t=e.y.redMul(n.redMul(this.z)),l=o.redSub(d),u=i.redSub(t);if(0===l.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var p=l.redSqr(),s=p.redMul(l),y=o.redMul(p),c=u.redSqr().redIAdd(s).redISub(y).redISub(y),a=u.redMul(y.redISub(c)).redISub(i.redMul(s)),r=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(c,a,r)},d.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var f=this.z.redSqr(),n=this.x,o=e.x.redMul(f),d=this.y,i=e.y.redMul(f).redMul(this.z),t=n.redSub(o),l=d.redSub(i);if(0===t.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=t.redSqr(),p=u.redMul(t),s=n.redMul(u),y=l.redSqr().redIAdd(p).redISub(s).redISub(s),c=l.redMul(s.redISub(y)).redISub(d.redMul(p)),a=this.z.redMul(t);return this.curve.jpoint(y,c,a)},d.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var f=this,n=0;e>n;n++)f=f.dbl();return f}for(var o=this.curve.a,d=this.curve.tinv,i=this.x,t=this.y,l=this.z,u=l.redSqr().redSqr(),p=t.redAdd(t),n=0;e>n;n++){var s=i.redSqr(),y=p.redSqr(),c=y.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(o.redMul(u)),r=i.redMul(y),w=a.redSqr().redISub(r.redAdd(r)),b=r.redISub(w),m=a.redMul(b);m=m.redIAdd(m).redISub(c);var g=p.redMul(l);e>n+1&&(u=u.redMul(c)),i=w,l=g,p=m}return this.curve.jpoint(i,p.redMul(d),l)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},d.prototype._zeroDbl=function(){if(this.zOne){var e=this.x.redSqr(),f=this.y.redSqr(),n=f.redSqr(),o=this.x.redAdd(f).redSqr().redISub(e).redISub(n);o=o.redIAdd(o);var d=e.redAdd(e).redIAdd(e),i=d.redSqr().redISub(o).redISub(o),t=n.redIAdd(n);t=t.redIAdd(t),t=t.redIAdd(t);var l=i,u=d.redMul(o.redISub(i)).redISub(t),p=this.y.redAdd(this.y)}else{var s=this.x.redSqr(),y=this.y.redSqr(),c=y.redSqr(),a=this.x.redAdd(y).redSqr().redISub(s).redISub(c);a=a.redIAdd(a);var r=s.redAdd(s).redIAdd(s),w=r.redSqr(),b=c.redIAdd(c);b=b.redIAdd(b),b=b.redIAdd(b);var l=w.redISub(a).redISub(a),u=r.redMul(a.redISub(l)).redISub(b),p=this.y.redMul(this.z);p=p.redIAdd(p)}return this.curve.jpoint(l,u,p)},d.prototype._threeDbl=function(){if(this.zOne){var e=this.x.redSqr(),f=this.y.redSqr(),n=f.redSqr(),o=this.x.redAdd(f).redSqr().redISub(e).redISub(n);o=o.redIAdd(o);var d=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a),i=d.redSqr().redISub(o).redISub(o),t=i,l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l);var u=d.redMul(o.redISub(i)).redISub(l),p=this.y.redAdd(this.y)}else{var s=this.z.redSqr(),y=this.y.redSqr(),c=this.x.redMul(y),a=this.x.redSub(s).redMul(this.x.redAdd(s));a=a.redAdd(a).redIAdd(a);var r=c.redIAdd(c);r=r.redIAdd(r);var w=r.redAdd(r),t=a.redSqr().redISub(w),p=this.y.redAdd(this.z).redSqr().redISub(y).redISub(s),b=y.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var u=a.redMul(r.redISub(t)).redISub(b)}return this.curve.jpoint(t,u,p)},d.prototype._dbl=function(){var e=this.curve.a,f=(this.curve.tinv,this.x),n=this.y,o=this.z,d=o.redSqr().redSqr(),i=f.redSqr(),t=n.redSqr(),l=i.redAdd(i).redIAdd(i).redIAdd(e.redMul(d)),u=f.redAdd(f);u=u.redIAdd(u);var p=u.redMul(t),s=l.redSqr().redISub(p.redAdd(p)),y=p.redISub(s),c=t.redSqr();c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var a=l.redMul(y).redISub(c),r=n.redAdd(n).redMul(o);return this.curve.jpoint(s,a,r)},d.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),f=this.y.redSqr(),n=this.z.redSqr(),o=f.redSqr(),d=e.redAdd(e).redIAdd(e),i=d.redSqr(),t=this.x.redAdd(f).redSqr().redISub(e).redISub(o);t=t.redIAdd(t),t=t.redAdd(t).redIAdd(t),t=t.redISub(i);var l=t.redSqr(),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var p=d.redIAdd(t).redSqr().redISub(i).redISub(l).redISub(u),s=f.redMul(p);s=s.redIAdd(s),s=s.redIAdd(s);var y=this.x.redMul(l).redISub(s);y=y.redIAdd(y),y=y.redIAdd(y);var c=this.y.redMul(p.redMul(u.redISub(p)).redISub(t.redMul(l)));c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var a=this.z.redAdd(t).redSqr().redISub(n).redISub(l);return this.curve.jpoint(y,c,a)},d.prototype.mul=function(e,f){return e=new u(e,f),this.curve._wnafMul(this,e)},d.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var f=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(f)).cmpn(0))return!1;var o=f.redMul(this.z),d=n.redMul(e.z);return 0===this.y.redMul(d).redISub(e.y.redMul(o)).cmpn(0)},d.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../../elliptic":237,"../curve":240,assert:148,"bn.js":236,inherits:257}],243:[function(e,f,n){function o(e){this.curve="short"===e.type?new u.curve["short"](e):"edwards"===e.type?new u.curve.edwards(e):new u.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,t(this.g.validate(),"Invalid curve"),t(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function d(e,f){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var n=new o(f);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:n}),n}})}var i=n,t=e("assert"),l=e("hash.js"),u=(e("bn.js"),e("../elliptic"));i.PresetCurve=o,d("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:l.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),d("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:l.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),d("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:l.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),d("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"0",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:l.sha256,gRed:!1,g:["9"]}),d("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:l.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]}),d("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:l.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]})
},{"../elliptic":237,assert:148,"bn.js":236,"hash.js":250}],244:[function(e,f){function n(e){return this instanceof n?("string"==typeof e&&(o(i.curves.hasOwnProperty(e),"Unknown curve "+e),e=i.curves[e]),e instanceof i.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.shrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),void(this.hash=e.hash||e.curve.hash)):new n(e)}var o=e("assert"),d=e("bn.js"),i=e("../../elliptic"),t=(i.utils,e("./key")),l=e("./signature");f.exports=n,n.prototype.keyPair=function(e,f){return new t(this,e,f)},n.prototype.genKeyPair=function(e){e||(e={});for(var f=new i.hmacDRBG({hash:this.hash,pers:e.pers,entropy:e.entropy||i.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),n=this.n.byteLength(),o=this.n.sub(new d(2));;){var t=new d(f.generate(n));if(!(t.cmp(o)>0))return t.iaddn(1),this.keyPair(t)}},n.prototype._truncateToN=function(e,f){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.shrn(n)),!f&&e.cmp(this.n)>=0?e.sub(this.n):e},n.prototype.sign=function(e,f,n){f=this.keyPair(f,"hex"),e=this._truncateToN(new d(e,16)),n||(n={});for(var o=this.n.byteLength(),t=f.getPrivate().toArray(),u=t.length;21>u;u++)t.unshift(0);for(var p=e.toArray(),u=p.length;o>u;u++)p.unshift(0);for(var s=new i.hmacDRBG({hash:this.hash,entropy:t,nonce:p}),y=this.n.sub(new d(1));;){var c=new d(s.generate(this.n.byteLength()));if(c=this._truncateToN(c,!0),!(c.cmpn(1)<=0||c.cmp(y)>=0)){var a=this.g.mul(c);if(!a.isInfinity()){var r=a.getX().mod(this.n);if(0!==r.cmpn(0)){var w=c.invm(this.n).mul(r.mul(f.getPrivate()).iadd(e)).mod(this.n);if(0!==w.cmpn(0))return n.canonical&&w.cmp(this.nh)>0&&(w=this.n.sub(w)),new l(r,w)}}}}},n.prototype.verify=function(e,f,n){e=this._truncateToN(new d(e,16)),n=this.keyPair(n,"hex"),f=new l(f,"hex");var o=f.r,i=f.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;var t=i.invm(this.n),u=t.mul(e).mod(this.n),p=t.mul(o).mod(this.n),s=this.g.mulAdd(u,n.getPublic(),p);return s.isInfinity()?!1:0===s.getX().mod(this.n).cmp(o)}},{"../../elliptic":237,"./key":245,"./signature":246,assert:148,"bn.js":236}],245:[function(e,f){function n(e,f,o){return f instanceof n?f:o instanceof n?o:(f||(f=o,o=null),null!==f&&"object"==typeof f&&(f.x?(o=f,f=null):(f.priv||f.pub)&&(o=f.pub,f=f.priv)),this.ec=e,this.priv=null,this.pub=null,void(this._importPublicHex(f,o)||("hex"===o&&(o=null),f&&this._importPrivate(f),o&&this._importPublic(o))))}var o=(e("assert"),e("bn.js")),d=e("../../elliptic"),i=d.utils;f.exports=n,n.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(e,f){if(this.pub||(this.pub=this.ec.g.mul(this.priv)),"string"==typeof e&&(f=e,e=null),!f)return this.pub;for(var n=this.ec.curve.p.byteLength(),o=this.pub.getX().toArray(),d=o.length;n>d;d++)o.unshift(0);if(e)var t=[this.pub.getY().isEven()?2:3].concat(o);else{for(var l=this.pub.getY().toArray(),d=l.length;n>d;d++)l.unshift(0);var t=[4].concat(o,l)}return i.encode(t,f)},n.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(e){this.priv=new o(e,16),this.priv=this.priv.mod(this.ec.curve.n)},n.prototype._importPublic=function(e){this.pub=this.ec.curve.point(e.x,e.y)},n.prototype._importPublicHex=function(e,f){e=i.toArray(e,f);var n=this.ec.curve.p.byteLength();if(4===e[0]&&e.length-1===2*n)this.pub=this.ec.curve.point(e.slice(1,1+n),e.slice(1+n,1+2*n));else{if(2!==e[0]&&3!==e[0]||e.length-1!==n)return!1;this.pub=this.ec.curve.pointFromX(3===e[0],e.slice(1,1+n))}return!0},n.prototype.derive=function(e){return e.mul(this.priv).getX()},n.prototype.sign=function(e){return this.ec.sign(e,this)},n.prototype.verify=function(e,f){return this.ec.verify(e,f,this)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../../elliptic":237,assert:148,"bn.js":236}],246:[function(e,f){function n(e,f){return e instanceof n?e:void(this._importDER(e,f)||(o(e&&f,"Signature without r or s"),this.r=new d(e,16),this.s=new d(f,16)))}var o=e("assert"),d=e("bn.js"),i=e("../../elliptic"),t=i.utils;f.exports=n,n.prototype._importDER=function(e,f){if(e=t.toArray(e,f),e.length<6||48!==e[0]||2!==e[2])return!1;var n=e[1];if(1+n>e.length)return!1;var o=e[3];if(o>=128)return!1;if(4+o+2>=e.length)return!1;if(2!==e[4+o])return!1;var i=e[5+o];return i>=128?!1:4+o+2+i>e.length?!1:(this.r=new d(e.slice(4,4+o)),this.s=new d(e.slice(4+o+2,4+o+2+i)),!0)},n.prototype.toDER=function(e){var f=this.r.toArray(),n=this.s.toArray();128&f[0]&&(f=[0].concat(f)),128&n[0]&&(n=[0].concat(n));var o=f.length+n.length+4,d=[48,o,2,f.length];return d=d.concat(f,[2,n.length],n),t.encode(d,e)}},{"../../elliptic":237,assert:148,"bn.js":236}],247:[function(e,f){function n(e){if(!(this instanceof n))return new n(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var f=t.toArray(e.entropy,e.entropyEnc),d=t.toArray(e.nonce,e.nonceEnc),i=t.toArray(e.pers,e.persEnc);o(f.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(f,d,i)}var o=e("assert"),d=e("hash.js"),i=e("../elliptic"),t=i.utils;f.exports=n,n.prototype._init=function(e,f,n){var o=e.concat(f).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var d=0;d<this.V.length;d++)this.K[d]=0,this.V[d]=1;this._update(o),this.reseed=1,this.reseedInterval=281474976710656},n.prototype._hmac=function(){return new d.hmac(this.hash,this.K)},n.prototype._update=function(e){var f=this._hmac().update(this.V).update([0]);e&&(f=f.update(e)),this.K=f.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},n.prototype.reseed=function(e,f,n,d){"string"!=typeof f&&(d=n,n=f,f=null),e=t.toBuffer(e,f),n=t.toBuffer(n,d),o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this.reseed=1},n.prototype.generate=function(e,f,n,o){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof f&&(o=n,n=f,f=null),n&&(n=t.toArray(n,o),this._update(n));for(var d=[];d.length<e;)this.V=this._hmac().update(this.V).digest(),d=d.concat(this.V);var i=d.slice(0,e);return this._update(n),this.reseed++,t.encode(i,f)}},{"../elliptic":237,assert:148,"hash.js":250}],248:[function(e,f,n){function o(e,f){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(f){if("hex"===f){e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!==0&&(e="0"+e);for(var o=0;o<e.length;o+=2)n.push(parseInt(e[o]+e[o+1],16))}}else for(var o=0;o<e.length;o++){var d=e.charCodeAt(o),i=d>>8,t=255&d;i?n.push(i,t):n.push(t)}else for(var o=0;o<e.length;o++)n[o]=0|e[o];return n}function d(e){for(var f="",n=0;n<e.length;n++)f+=i(e[n].toString(16));return f}function i(e){return 1===e.length?"0"+e:e}function t(e,f){for(var n=[],o=1<<f+1,d=e.clone();d.cmpn(1)>=0;){var i;if(d.isOdd()){var t=d.andln(o-1);i=t>(o>>1)-1?(o>>1)-t:t,d.isubn(i)}else i=0;n.push(i);for(var l=0!==d.cmpn(0)&&0===d.andln(o-1)?f+1:1,u=1;l>u;u++)n.push(0);d.ishrn(l)}return n}function l(e,f){var n=[[],[]];e=e.clone(),f=f.clone();for(var o=0,d=0;e.cmpn(-o)>0||f.cmpn(-d)>0;){var i=e.andln(3)+o&3,t=f.andln(3)+d&3;3===i&&(i=-1),3===t&&(t=-1);var l;if(0===(1&i))l=0;else{var u=e.andln(7)+o&7;l=3!==u&&5!==u||2!==t?i:-i}n[0].push(l);var p;if(0===(1&t))p=0;else{var u=f.andln(7)+d&7;p=3!==u&&5!==u||2!==i?t:-t}n[1].push(p),2*o===l+1&&(o=1-o),2*d===p+1&&(d=1-d),e.ishrn(1),f.ishrn(1)}return n}var u=(e("assert"),e("bn.js"),n);u.toArray=o,u.toHex=d,u.encode=function(e,f){return"hex"===f?d(e):e},u.zero2=i,u.getNAF=t,u.getJSF=l},{assert:148,"bn.js":236}],249:[function(e,f){function n(e){this.rand=e}var o;if(f.exports=function(e){return o||(o=new n(null)),o.generate(e)},f.exports.Rand=n,n.prototype.generate=function(e){return this._rand(e)},"object"==typeof window)n.prototype._rand=window.crypto&&window.crypto.getRandomValues?function(e){var f=new Uint8Array(e);return window.crypto.getRandomValues(f),f}:window.msCrypto&&window.msCrypto.getRandomValues?function(e){var f=new Uint8Array(e);return window.msCrypto.getRandomValues(f),f}:function(){throw new Error("Not implemented yet")};else try{var d=e("crypto");n.prototype._rand=function(e){return d.randomBytes(e)}}catch(i){n.prototype._rand=function(e){for(var f=new Uint8Array(e),n=0;n<f.length;n++)f[n]=this.rand.getByte();return f}}},{}],250:[function(e,f,n){var o=n;o.utils=e("./hash/utils"),o.common=e("./hash/common"),o.sha=e("./hash/sha"),o.ripemd=e("./hash/ripemd"),o.hmac=e("./hash/hmac"),o.sha256=o.sha.sha256,o.sha224=o.sha.sha224,o.ripemd160=o.ripemd.ripemd160},{"./hash/common":251,"./hash/hmac":252,"./hash/ripemd":253,"./hash/sha":254,"./hash/utils":255}],251:[function(e,f,n){function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.endian="big"}var d=e("../hash"),i=d.utils,t=i.assert;n.BlockHash=o,o.prototype.update=function(e,f){if(e=i.toArray(e,f),this.pending=this.pending?this.pending.concat(e):e,this.pendingTotal+=e.length,this.pending.length>=this.blockSize/8){e=this.pending;var n=e.length%(this.blockSize/8);this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=i.join32(e.slice(0,e.length-n),this.endian);for(var o=0;o<e.length;o+=this.blockSize/32)this._update(e.slice(o,o+this.blockSize/32))}return this},o.prototype.digest=function(e){return this.update(this._pad()),t(null===this.pending),this._digest(e)},o.prototype._pad=function(){var e=this.pendingTotal,f=this.blockSize/8,n=f-(e+8)%f,o=new Array(n+8);o[0]=128;for(var d=1;n>d;d++)o[d]=0;return e<<=3,"big"===this.endian?(o[d++]=0,o[d++]=0,o[d++]=0,o[d++]=0,o[d++]=e>>>24&255,o[d++]=e>>>16&255,o[d++]=e>>>8&255,o[d++]=255&e):(o[d++]=255&e,o[d++]=e>>>8&255,o[d++]=e>>>16&255,o[d++]=e>>>24&255,o[d++]=0,o[d++]=0,o[d++]=0,o[d++]=0),o}},{"../hash":250}],252:[function(e,f,n){function o(e,f,n){return this instanceof o?(this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,void this._init(i.toArray(f,n))):new o(e,f,n)}var d=e("../hash"),i=d.utils,t=i.assert;f.exports=o,o.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),t(e.length<=this.blockSize);for(var f=e.length;f<this.blockSize;f++)e.push(0);for(var n=e.slice(),f=0;f<e.length;f++)e[f]^=54,n[f]^=92;this.hash={inner:(new this.Hash).update(e),outer:(new this.Hash).update(n)}},o.prototype.update=function(e,f){return this.hash.inner.update(e,f),this},o.prototype.digest=function(e){return this.hash.outer.update(this.hash.inner.digest()),this.hash.outer.digest(e)}},{"../hash":250}],253:[function(e,f,n){function o(){return this instanceof o?(a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new o}function d(e,f,n,o){return 15>=e?f^n^o:31>=e?f&n|~f&o:47>=e?(f|~n)^o:63>=e?f&o|n&~o:f^(n|~o)}function i(e){return 15>=e?0:31>=e?1518500249:47>=e?1859775393:63>=e?2400959708:2840853838}function t(e){return 15>=e?1352829926:31>=e?1548603684:47>=e?1836072691:63>=e?2053994217:0}var l=e("../hash"),u=l.utils,p=u.rotl32,s=u.sum32,y=u.sum32_3,c=u.sum32_4,a=l.common.BlockHash;u.inherits(o,a),n.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.prototype._update=function(e){for(var f=this.h[0],n=this.h[1],o=this.h[2],l=this.h[3],u=this.h[4],a=f,g=n,x=o,P=l,j=u,v=0;80>v;v++){var M=s(p(c(f,d(v,n,o,l),e[r[v]],i(v)),b[v]),u);f=u,u=l,l=p(o,10),o=n,n=M,M=s(p(c(a,d(79-v,g,x,P),e[w[v]],t(v)),m[v]),j),a=j,j=P,P=p(x,10),x=g,g=M}M=y(this.h[1],o,P),this.h[1]=y(this.h[2],l,j),this.h[2]=y(this.h[3],u,a),this.h[3]=y(this.h[4],f,g),this.h[4]=y(this.h[0],n,x),this.h[0]=M},o.prototype._digest=function(e){return"hex"===e?u.toHex32(this.h,"little"):u.split32(this.h,"little")};var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],w=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],b=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"../hash":250}],254:[function(e,f,n){function o(){return this instanceof o?(g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],void(this.k=x)):new o}function d(){return this instanceof d?(o.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new d}function i(e,f,n){return e&f^~e&n}function t(e,f,n){return e&f^e&n^f&n}function l(e){return r(e,2)^r(e,13)^r(e,22)}function u(e){return r(e,6)^r(e,11)^r(e,25)}function p(e){return r(e,7)^r(e,18)^e>>>3}function s(e){return r(e,17)^r(e,19)^e>>>10}var y=e("../hash"),c=y.utils,a=c.assert,r=c.rotr32,w=(c.rotl32,c.sum32),b=c.sum32_4,m=c.sum32_5,g=y.common.BlockHash,x=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];c.inherits(o,g),n.sha256=o,o.blockSize=512,o.outSize=256,o.hmacStrength=192,o.prototype._update=function(e){for(var f=new Array(64),n=0;16>n;n++)f[n]=e[n];for(;n<f.length;n++)f[n]=b(s(f[n-2]),f[n-7],p(f[n-15]),f[n-16]);var o=this.h[0],d=this.h[1],y=this.h[2],c=this.h[3],r=this.h[4],g=this.h[5],x=this.h[6],P=this.h[7];a(this.k.length===f.length);for(var n=0;n<f.length;n++){var j=m(P,u(r),i(r,g,x),this.k[n],f[n]),v=w(l(o),t(o,d,y));P=x,x=g,g=r,r=w(c,j),c=y,y=d,d=o,o=w(j,v)}this.h[0]=w(this.h[0],o),this.h[1]=w(this.h[1],d),this.h[2]=w(this.h[2],y),this.h[3]=w(this.h[3],c),this.h[4]=w(this.h[4],r),this.h[5]=w(this.h[5],g),this.h[6]=w(this.h[6],x),this.h[7]=w(this.h[7],P)},o.prototype._digest=function(e){return"hex"===e?c.toHex32(this.h,"big"):c.split32(this.h,"big")},c.inherits(d,o),n.sha224=d,d.blockSize=512,d.outSize=224,d.hmacStrength=192,d.prototype._digest=function(e){return"hex"===e?c.toHex32(this.h.slice(0,7),"big"):c.split32(this.h.slice(0,7),"big")}},{"../hash":250}],255:[function(e,f,n){function o(e,f){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(f){if("hex"===f){e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!=0&&(e="0"+e);for(var o=0;o<e.length;o+=2)n.push(parseInt(e[o]+e[o+1],16))}}else for(var o=0;o<e.length;o++){var d=e.charCodeAt(o),i=d>>8,t=255&d;i?n.push(i,t):n.push(t)}else for(var o=0;o<e.length;o++)n[o]=0|e[o];return n}function d(e){for(var f="",n=0;n<e.length;n++)f+=t(e[n].toString(16));return f}function i(e,f){for(var n="",o=0;o<e.length;o++){var d=e[o];"little"===f&&(d=d>>>24|d>>>8&65280|d<<8&16711680|(255&d)<<24,0>d&&(d+=4294967296)),n+=l(d.toString(16))}return n}function t(e){return 1===e.length?"0"+e:e}function l(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}function u(e,f){b(e.length%4===0);for(var n=new Array(e.length/4),o=0,d=0;o<n.length;o++,d+=4){var i;i="big"===f?e[d]<<24|e[d+1]<<16|e[d+2]<<8|e[d+3]:e[d+3]<<24|e[d+2]<<16|e[d+1]<<8|e[d],0>i&&(i+=4294967296),n[o]=i}return n}function p(e,f){for(var n=new Array(4*e.length),o=0,d=0;o<e.length;o++,d+=4){var i=e[o];"big"===f?(n[d]=i>>>24,n[d+1]=i>>>16&255,n[d+2]=i>>>8&255,n[d+3]=255&i):(n[d+3]=i>>>24,n[d+2]=i>>>16&255,n[d+1]=i>>>8&255,n[d]=255&i)}return n}function s(e,f){return e>>>f|e<<32-f}function y(e,f){return e<<f|e>>>32-f}function c(e,f){var n=e+f&4294967295;return 0>n&&(n+=4294967296),n}function a(e,f,n){var o=e+f+n&4294967295;return 0>o&&(o+=4294967296),o}function r(e,f,n,o){var d=e+f+n+o&4294967295;return 0>d&&(d+=4294967296),d}function w(e,f,n,o,d){var i=e+f+n+o+d&4294967295;return 0>i&&(i+=4294967296),i}function b(e,f){if(!e)throw new Error(f||"Assertion failed")}var m=n;m.toArray=o,m.toHex=d,m.toHex32=i,m.zero2=t,m.zero8=l,m.join32=u,m.split32=p,m.rotr32=s,m.rotl32=y,m.sum32=c,m.sum32_3=a,m.sum32_4=r,m.sum32_5=w,m.assert=b,m.inherits="function"==typeof Object.create?function(e,f){e.super_=f,e.prototype=Object.create(f.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,f){e.super_=f;var n=function(){};n.prototype=f.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],256:[function(e,f){f.exports={name:"elliptic",version:"0.15.15",description:"EC cryptography",main:"lib/elliptic.js",scripts:{test:"mocha --reporter=spec test/*-test.js"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:{name:"Fedor Indutny",email:"fedor@indutny.com"},license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{browserify:"^3.44.2",mocha:"^1.18.2","uglify-js":"^2.4.13"},dependencies:{"bn.js":"^0.15.0",brorand:"^1.0.1","hash.js":"^0.2.0",inherits:"^2.0.1"},gitHead:"4bf1f50607285bff4ae19521217dbc801c3d36af",_id:"elliptic@0.15.15",_shasum:"63269184a856d6e00871e84f37a8401ff84e4aea",_from:"elliptic@>=0.15.14 <0.16.0",_npmVersion:"2.1.6",_nodeVersion:"0.10.33",_npmUser:{name:"indutny",email:"fedor@indutny.com"},maintainers:[{name:"indutny",email:"fedor@indutny.com"}],dist:{shasum:"63269184a856d6e00871e84f37a8401ff84e4aea",tarball:"http://registry.npmjs.org/elliptic/-/elliptic-0.15.15.tgz"},directories:{},_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-0.15.15.tgz",readme:"ERROR: No README data found!"}},{}],257:[function(e,f){f.exports=e(168)},{}],258:[function(e,f,n){n.strip=function(e){e=e.toString();var f=/^-----BEGIN (.*)-----\n/,n=f.exec(e),o=n[1],d=new RegExp("\n-----END "+o+"-----(\n*)$"),i=e.slice(n[0].length).replace(d,"").replace(/\n/g,"");return{tag:o,base64:i}};var o=function(e,f){for(var n=[];e;){if(e.length<f){n.push(e);break}n.push(e.substr(0,f)),e=e.substr(f)}return n.join("\n")};n.assemble=function(e){var f=e.tag,n=e.base64,d="-----BEGIN "+f+"-----",i="-----END "+f+"-----";return d+"\n"+o(n,64)+"\n"+i+"\n"}},{}],259:[function(e,f){f.exports=e(172)},{"./_stream_readable":261,"./_stream_writable":263,FWaASH:169,"core-util-is":264,inherits:257}],260:[function(e,f){f.exports=e(173)},{"./_stream_transform":262,"core-util-is":264,inherits:257}],261:[function(e,f){f.exports=e(174)},{FWaASH:169,buffer:150,"core-util-is":264,events:167,inherits:257,isarray:265,stream:184,"string_decoder/":266}],262:[function(e,f){f.exports=e(175)},{"./_stream_duplex":259,"core-util-is":264,inherits:257}],263:[function(e,f){f.exports=e(176)},{"./_stream_duplex":259,FWaASH:169,buffer:150,"core-util-is":264,inherits:257,stream:184}],264:[function(e,f){f.exports=e(177)},{buffer:150}],265:[function(e,f){f.exports=e(178)},{}],266:[function(e,f){f.exports=e(179)},{buffer:150}],267:[function(e,f){f.exports=e(181)},{"./lib/_stream_duplex.js":259,"./lib/_stream_passthrough.js":260,"./lib/_stream_readable.js":261,"./lib/_stream_transform.js":262,"./lib/_stream_writable.js":263,stream:184}],268:[function(e,f){(function(n){function o(e,f){var o;"object"!=typeof e||n.isBuffer(e)||(o=e.passphrase,e=e.key);var l,u,p=i.strip(e),s=p.tag,y=new n(p.base64,"base64");switch(s){case"PUBLIC KEY":switch(u=t.PublicKey.decode(y,"der"),l=u.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return t.RSAPublicKey.decode(u.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return{type:"ec",data:t.ECPublicKey.decode(y,"der")};default:throw new Error("unknown key id "+l)}throw new Error("unknown key type "+s);case"ENCRYPTED PRIVATE KEY":y=t.EncryptedPrivateKey.decode(y,"der"),y=d(f,y,o);case"PRIVATE KEY":switch(u=t.PrivateKey.decode(y,"der"),l=u.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return t.RSAPrivateKey.decode(u.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return u=t.ECPrivateWrap.decode(y,"der"),{curve:u.algorithm.curve,privateKey:t.ECPrivateKey.decode(u.subjectPrivateKey,"der").privateKey};default:throw new Error("unknown key id "+l)}throw new Error("unknown key type "+s);case"RSA PUBLIC KEY":return t.RSAPublicKey.decode(y,"der");case"RSA PRIVATE KEY":return t.RSAPrivateKey.decode(y,"der");case"EC PRIVATE KEY":return y=t.ECPrivateKey.decode(y,"der"),{curve:y.parameters.value,privateKey:y.privateKey};default:throw new Error("unknown key type "+s)}}function d(e,f,o){var d=f.algorithm.decrypt.kde.kdeparams.salt,i=f.algorithm.decrypt.kde.kdeparams.iters,t=l[f.algorithm.decrypt.cipher.algo.join(".")],u=f.algorithm.decrypt.cipher.iv,p=f.subjectPrivateKey,s=parseInt(t.split("-")[1],10)/8,y=e.pbkdf2Sync(o,d,i,s),c=e.createDecipheriv(t,y,u),a=[];return a.push(c.update(p)),a.push(c["final"]()),n.concat(a)}var i=e("pemstrip"),t=e("./asn1"),l=e("./aesid.json");f.exports=o}).call(this,e("buffer").Buffer)},{"./aesid.json":218,"./asn1":220,buffer:150,pemstrip:258}],269:[function(e,f){(function(n){function o(e,f,o){var l=t(f,o);if(l.curve)return i(e,l,o);for(var u=l.modulus.byteLength(),p=[0,1];e.length+p.length+1<u;)p.push(255);p.push(0);for(var s=-1;++s<e.length;)p.push(e[s]);var y=d(p,l);if(y.length<u){var c=new n(u-y.length);c.fill(0),y=n.concat([c,y],u)}return y}function d(e,f){var o=new l(e).toRed(l.mont(f.prime1)),d=new l(e).toRed(l.mont(f.prime2)),i=new l(f.coefficient),t=new l(f.prime1),u=new l(f.prime2),p=o.redPow(f.exponent1),s=d.redPow(f.exponent2);p=p.fromRed(),s=s.fromRed();var y=p.isub(s).imul(i).mod(t);return y.imul(u),s.iadd(y),new n(s.toArray())}function i(e,f,o){u.rand=o.randomBytes;var d;"1.3.132.0.10"===f.curve.join(".")&&(d=new u.ec("secp256k1"));var i=d.genKeyPair();i._importPrivate(f.privateKey);var t=i.sign(e);return new n(t.toDER())}var t=e("./parseKeys"),l=e("bn.js"),u=e("elliptic");f.exports=o}).call(this,e("buffer").Buffer)},{"./parseKeys":268,"bn.js":236,buffer:150,elliptic:237}],270:[function(e,f){(function(n){function o(e,f,o){var t=i(o);if("ec"===t.type)return d(e,f,t);var u=l.mont(t.modulus);e=new l(e).toRed(u),e=e.redPow(new l(t.publicExponent)),e=new n(e.fromRed().toArray()),e=e.slice(e.length-f.length);for(var p=0,s=e.length,y=-1;++y<s;)p+=e[y]^f[y];return!p}function d(e,f,n){var o;"1.3.132.0.10"===n.data.algorithm.curve.join(".")&&(o=new t.ec("secp256k1"));var d=n.data.subjectPrivateKey.data;return o.verify(f.toString("hex"),e.toString("hex"),d.toString("hex"))}var i=e("./parseKeys"),t=e("elliptic"),l=e("bn.js");f.exports=o}).call(this,e("buffer").Buffer)},{"./parseKeys":268,"bn.js":236,buffer:150,elliptic:237}],271:[function(e,f){(function(n){function o(e,f){i.rand=f.randomBytes,this.curve=new i.ec(e),this.keys=void 0}function d(e,f){Array.isArray(e)||(e=e.toArray());var o=new n(e);return f?o.toString(f):o}var i=e("elliptic"),t=e("bn.js");f.exports=o,o.prototype.generateKeys=function(e,f){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,f)},o.prototype.computeSecret=function(e,f,o){f=f||"utf8",n.isBuffer(e)||(e=new n(e,f)),e=new t(e),e=e.toString(16);var i=this.curve.keyPair(e,"hex").getPublic(),l=i.mul(this.keys.getPrivate()).getX();return d(l,o)},o.prototype.getPublicKey=function(e,f){var n=this.keys.getPublic("compressed"===f,!0);return"hybrid"===f&&(n[0]=n[n.length-1]%2?7:6),d(n,e)},o.prototype.getPrivateKey=function(e){return d(this.keys.getPrivate(),e)},o.prototype.setPublicKey=function(e,f){f=f||"utf8",n.isBuffer(e)||(e=new n(e,f));var o=new t(e);o=o.toArray(),this.keys._importPublicHex(o)},o.prototype.setPrivateKey=function(e,f){f=f||"utf8",n.isBuffer(e)||(e=new n(e,f));var o=new t(e);o=o.toString(16),this.keys._importPrivate(o)}}).call(this,e("buffer").Buffer)},{"bn.js":273,buffer:150,elliptic:274}],272:[function(e,f){var n=e("./ecdh");f.exports=function(e,f){f.createECDH=function(f){return new n(f,e)}}},{"./ecdh":271}],273:[function(e,f){f.exports=e(236)},{}],274:[function(e,f){f.exports=e(237)},{"../package.json":294,"./elliptic/curve":277,"./elliptic/curves":280,"./elliptic/ec":281,"./elliptic/hmac-drbg":284,"./elliptic/utils":285,brorand:286}],275:[function(e,f){f.exports=e(238)},{"../../elliptic":274,assert:148,"bn.js":273}],276:[function(e,f){f.exports=e(239)},{"../../elliptic":274,"../curve":277,assert:148,"bn.js":273,inherits:293}],277:[function(e,f){f.exports=e(240)},{"./base":275,"./edwards":276,"./mont":278,"./short":279}],278:[function(e,f){f.exports=e(241)},{"../../elliptic":274,"../curve":277,assert:148,"bn.js":273,inherits:293}],279:[function(e,f){f.exports=e(242)},{"../../elliptic":274,"../curve":277,assert:148,"bn.js":273,inherits:293}],280:[function(e,f){f.exports=e(243)},{"../elliptic":274,assert:148,"bn.js":273,"hash.js":287}],281:[function(e,f){f.exports=e(244)},{"../../elliptic":274,"./key":282,"./signature":283,assert:148,"bn.js":273}],282:[function(e,f){f.exports=e(245)},{"../../elliptic":274,assert:148,"bn.js":273}],283:[function(e,f){f.exports=e(246)},{"../../elliptic":274,assert:148,"bn.js":273}],284:[function(e,f){f.exports=e(247)},{"../elliptic":274,assert:148,"hash.js":287}],285:[function(e,f){f.exports=e(248)},{assert:148,"bn.js":273}],286:[function(e,f){f.exports=e(249)},{}],287:[function(e,f){f.exports=e(250)},{"./hash/common":288,"./hash/hmac":289,"./hash/ripemd":290,"./hash/sha":291,"./hash/utils":292}],288:[function(e,f){f.exports=e(251)},{"../hash":287}],289:[function(e,f){f.exports=e(252)},{"../hash":287}],290:[function(e,f){f.exports=e(253)},{"../hash":287}],291:[function(e,f){f.exports=e(254)},{"../hash":287}],292:[function(e,f){f.exports=e(255)},{}],293:[function(e,f){f.exports=e(168)},{}],294:[function(e,f){f.exports=e(256)},{}],295:[function(e,f){(function(n){function o(e,f){f=f||"utf8",n.isBuffer(e)||(e=new n(e,f)),this._pub=new p(e)}function d(e,f){f=f||"utf8",n.isBuffer(e)||(e=new n(e,f)),this._priv=new p(e)}function i(e,f){var n=f.toString("hex"),o=[n,e.toString(16)].join("_");if(o in g)return g[o];var d=0;if(e.isEven()||!m.simpleSieve||!m.fermatTest(e)||!y.test(e))return d+=1,d+="02"===n||"05"===n?8:4,g[o]=d,d;y.test(e.shrn(1))||(d+=2);var i,n=f.toString("hex");switch(n){case"02":e.mod(c).cmp(a)&&(d+=8);break;case"05":i=e.mod(r),i.cmp(w)&&i.cmp(b)&&(d+=8);break;default:d+=4}return g[o]=d,d}function t(e,f){try{Object.defineProperty(e,"verifyError",{enumerable:!0,value:f,writable:!1})}catch(n){e.verifyError=f}}function l(e,f,n,l){this.setGenerator(f),this.__prime=new p(e),this._prime=p.mont(this.__prime),this._pub=void 0,this._priv=void 0,l?(this.setPublicKey=o,this.setPrivateKey=d,t(this,i(this.__prime,f))):t(this,8),this._makeNum=function(){return n.randomBytes(192)}}function u(e,f){var o=new n(e.toArray());return f?o.toString(f):o}var p=e("bn.js"),s=e("miller-rabin"),y=new s,c=new p(24),a=new p(11),r=new p(10),w=new p(3),b=new p(7),m=e("./generatePrime");f.exports=l;var g={};l.prototype.generateKeys=function(){return this._priv||(this._priv=new p(this._makeNum())),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},l.prototype.computeSecret=function(e){e=new p(e),e=e.toRed(this._prime);var f=e.redPow(this._priv).fromRed(),o=new n(f.toArray()),d=this.getPrime();if(o.length<d.length){var i=new n(d.length-o.length);i.fill(0),o=n.concat([i,o])}return o},l.prototype.getPublicKey=function(e){return u(this._pub,e)},l.prototype.getPrivateKey=function(e){return u(this._priv,e)},l.prototype.getPrime=function(e){return u(this.__prime,e)},l.prototype.getGenerator=function(e){return u(this._gen,e)},l.prototype.setGenerator=function(e,f){f=f||"utf8",n.isBuffer(e)||(e=new n(e,f)),this._gen=new p(e)}}).call(this,e("buffer").Buffer)},{"./generatePrime":296,"bn.js":298,buffer:150,"miller-rabin":299}],296:[function(e,f){function n(){if(null!==x)return x;var e=1048576,f=[];f[0]=2;for(var n=1,o=3;e>o;o+=2){for(var d=Math.ceil(Math.sqrt(o)),i=0;n>i&&f[i]<=d&&o%f[i]!==0;i++);n!==i&&f[i]<=d||(f[n++]=o)}return x=f,f}function o(e){for(var f=n(),o=0;o<f.length;o++)if(0===e.modn(f[o]))return!1;return!0}function d(e){var f=t.mont(e);return 0===s.toRed(f).redPow(e.subn(1)).fromRed().cmpn(1)}function i(e,f,n){function i(e){u=-1;var o=n.randomBytes(Math.ceil(e/8));o[0]|=192,o[o.length-1]|=3;var d,i=new t(o);if(f.cmp(s))if(f.cmp(y))x={major:[m],minor:[s]};else{for(d=i.mod(r);d.cmp(w);)i.iadd(m),d=i.mod(r);x={major:[m,c],minor:[s,a]}}else{for(;i.mod(l).cmp(b);)i.iadd(m);x={major:[l],minor:[g]}}return i}f=new t(f);for(var u,x,P=i(e),j=P.shrn(1);;){if(P.bitLength()>e&&(P=i(e),j=P.shrn(1)),u++,o(j)&&d(j)&&p.test(j)&&o(P)&&d(P)&&p.test(P))return P;P.iadd(x.major[u%x.major.length]),j.iadd(x.minor[u%x.minor.length])}}f.exports=i,i.simpleSieve=o,i.fermatTest=d;var t=e("bn.js"),l=new t(24),u=e("miller-rabin"),p=new u,s=(new t(1),new t(2)),y=new t(5),c=new t(16),a=new t(8),r=new t(10),w=new t(3),b=(new t(7),new t(11)),m=new t(4),g=new t(12),x=null},{"bn.js":298,"miller-rabin":299}],297:[function(e,f){(function(n){var o=e("./primes.json"),d=e("./dh"),i=e("./generatePrime");f.exports=function(e,f){function t(f){return new d(new n(o[f].prime,"hex"),new n(o[f].gen,"hex"),e)}function l(f,o,t,l){return(n.isBuffer(o)||"string"==typeof o&&-1===["hex","binary","base64"].indexOf(o))&&(l=t,t=o,o=void 0),o=o||"binary",l=l||"binary",t=t||new n([2]),n.isBuffer(t)||(t=new n(t,l)),"number"==typeof f?new d(i(f,t,e),t,e,!0):(n.isBuffer(f)||(f=new n(f,o)),new d(f,t,e,!0))}f.DiffieHellmanGroup=f.createDiffieHellmanGroup=f.getDiffieHellman=t,f.createDiffieHellman=f.DiffieHellman=l}}).call(this,e("buffer").Buffer)},{"./dh":295,"./generatePrime":296,"./primes.json":301,buffer:150}],298:[function(e,f){f.exports=e(236)},{}],299:[function(e,f){function n(e){this.rand=e||new d.Rand}var o=e("bn.js"),d=e("brorand");f.exports=n,n.create=function(e){return new n(e)},n.prototype._rand=function(e){var f=e.bitLength(),n=this.rand.generate(Math.ceil(f/8));n[0]|=3;var d=7&f;return 0!==d&&(n[n.length-1]>>=7-d),new o(n)},n.prototype.test=function(e,f,n){var d=e.bitLength(),i=o.mont(e),t=new o(1).toRed(i);f||(f=Math.max(1,d/48|0));for(var l=e.subn(1),u=l.subn(1),p=0;!l.testn(p);p++);for(var s=e.shrn(p),y=l.toRed(i),c=!0;f>0;f--){var a=this._rand(u);n&&n(a);var r=a.toRed(i).redPow(s);if(0!==r.cmp(t)&&0!==r.cmp(y)){for(var w=1;p>w;w++){if(r=r.redSqr(),0===r.cmp(t))return!1;if(0===r.cmp(y))break}if(w===p)return!1}}return c},n.prototype.getDivisor=function(e,f){var n=e.bitLength(),d=o.mont(e),i=new o(1).toRed(d);f||(f=Math.max(1,n/48|0));for(var t=e.subn(1),l=t.subn(1),u=0;!t.testn(u);u++);for(var p=e.shrn(u),s=t.toRed(d),y=!0;f>0;f--){var c=this._rand(l),a=e.gcd(c);if(0!==a.cmpn(1))return a;var r=c.toRed(d).redPow(p);if(0!==r.cmp(i)&&0!==r.cmp(s)){for(var w=1;u>w;w++){if(r=r.redSqr(),0===r.cmp(i))return r.fromRed().subn(1).gcd(e);
if(0===r.cmp(s))break}if(w===u)return r=r.redSqr(),r.fromRed().subn(1).gcd(e)}}return y}},{"bn.js":298,brorand:300}],300:[function(e,f){f.exports=e(249)},{}],301:[function(e,f){f.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],302:[function(e,f){(function(e){f.exports=function(f){function n(e,f,n,d,i,t){if("function"==typeof i&&(t=i,i=void 0),"function"!=typeof t)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var l;try{l=o(e,f,n,d,i)}catch(u){return t(u)}t(void 0,l)})}function o(n,o,d,i,t){if("number"!=typeof d)throw new TypeError("Iterations not a number");if(0>d)throw new TypeError("Bad iterations");if("number"!=typeof i)throw new TypeError("Key length not a number");if(0>i)throw new TypeError("Bad key length");t=t||"sha1",e.isBuffer(n)||(n=new e(n)),e.isBuffer(o)||(o=new e(o));var l,u,p,s=1,y=new e(i),c=new e(o.length+4);o.copy(c,0,0,o.length);for(var a=1;s>=a;a++){c.writeUInt32BE(a,o.length);var r=f.createHmac(t,n).update(c).digest();if(!l&&(l=r.length,p=new e(l),s=Math.ceil(i/l),u=i-(s-1)*l,i>(Math.pow(2,32)-1)*l))throw new TypeError("keylen exceeds maximum length");r.copy(p,0,0,l);for(var w=1;d>w;w++){r=f.createHmac(t,n).update(r).digest();for(var b=0;l>b;b++)p[b]^=r[b]}var m=(a-1)*l,g=a==s?u:l;p.copy(y,m,0,g)}return y}return{pbkdf2:n,pbkdf2Sync:o}}}).call(this,e("buffer").Buffer)},{buffer:150}],303:[function(e,f){f.exports=e(159)},{buffer:150}],304:[function(e,f){(function(e){function n(f,n){this._block=new e(f),this._finalSize=n,this._blockSize=f,this._len=0,this._s=0}n.prototype.init=function(){this._s=0,this._len=0},n.prototype.update=function(f,n){"string"==typeof f&&(n=n||"utf8",f=new e(f,n));for(var o=this._len+=f.length,d=this._s=this._s||0,i=0,t=this._block;o>d;){for(var l=Math.min(f.length,i+this._blockSize-d%this._blockSize),u=l-i,p=0;u>p;p++)t[d%this._blockSize+p]=f[p+i];d+=u,i+=u,d%this._blockSize===0&&this._update(t)}return this._s=d,this},n.prototype.digest=function(e){var f=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),f%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(f,this._blockSize-4);var n=this._update(this._block)||this._hash();return e?n.toString(e):n},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},f.exports=n}).call(this,e("buffer").Buffer)},{buffer:150}],305:[function(e,f,n){var n=f.exports=function(e){var f=n[e.toLowerCase()];if(!f)throw new Error(e+" is not supported (we accept pull requests)");return new f};n.sha1=e("./sha1"),n.sha224=e("./sha224"),n.sha256=e("./sha256"),n.sha384=e("./sha384"),n.sha512=e("./sha512")},{"./sha1":306,"./sha224":307,"./sha256":308,"./sha384":309,"./sha512":310}],306:[function(e,f){(function(n){function o(){return b.length?b.pop().init():this instanceof o?(this._w=w,p.call(this,64,56),this._h=null,void this.init()):new o}function d(e,f,n,o){return 20>e?f&n|~f&o:40>e?f^n^o:60>e?f&n|f&o|n&o:f^n^o}function i(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function t(e,f){return e+f|0}function l(e,f){return e<<f|e>>>32-f}var u=e("util").inherits,p=e("./hash"),s=0,y=4,c=8,a=12,r=16,w=new("undefined"==typeof Int32Array?Array:Int32Array)(80),b=[];u(o,p),o.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,p.prototype.init.call(this),this},o.prototype._POOL=b,o.prototype._update=function(e){var f,n,o,u,p,s,y,c,a,r;f=s=this._a,n=y=this._b,o=c=this._c,u=a=this._d,p=r=this._e;for(var w=this._w,b=0;80>b;b++){var m=w[b]=16>b?e.readInt32BE(4*b):l(w[b-3]^w[b-8]^w[b-14]^w[b-16],1),g=t(t(l(f,5),d(b,n,o,u)),t(t(p,m),i(b)));p=u,u=o,o=l(n,30),n=f,f=g}this._a=t(f,s),this._b=t(n,y),this._c=t(o,c),this._d=t(u,a),this._e=t(p,r)},o.prototype._hash=function(){b.length<100&&b.push(this);var e=new n(20);return e.writeInt32BE(0|this._a,s),e.writeInt32BE(0|this._b,y),e.writeInt32BE(0|this._c,c),e.writeInt32BE(0|this._d,a),e.writeInt32BE(0|this._e,r),e},f.exports=o}).call(this,e("buffer").Buffer)},{"./hash":304,buffer:150,util:186}],307:[function(e,f){(function(n){function o(){this.init(),this._w=l,t.call(this,64,56)}var d=e("util").inherits,i=e("./sha256"),t=e("./hash"),l=new Array(64);d(o,i),o.prototype.init=function(){return this._a=-1056596264,this._b=914150663,this._c=812702999,this._d=-150054599,this._e=-4191439,this._f=1750603025,this._g=1694076839,this._h=-1090891868,this._len=this._s=0,this},o.prototype._hash=function(){var e=new n(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},f.exports=o}).call(this,e("buffer").Buffer)},{"./hash":304,"./sha256":308,buffer:150,util:186}],308:[function(e,f){(function(n){function o(){this.init(),this._w=w,a.call(this,64,56)}function d(e,f){return e>>>f|e<<32-f}function i(e,f){return e>>>f}function t(e,f,n){return e&f^~e&n}function l(e,f,n){return e&f^e&n^f&n}function u(e){return d(e,2)^d(e,13)^d(e,22)}function p(e){return d(e,6)^d(e,11)^d(e,25)}function s(e){return d(e,7)^d(e,18)^i(e,3)}function y(e){return d(e,17)^d(e,19)^i(e,10)}var c=e("util").inherits,a=e("./hash"),r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],w=new Array(64);c(o,a),o.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},o.prototype._update=function(e){var f,n,o,d,i,c,a,w,b,m,g=this._w;f=0|this._a,n=0|this._b,o=0|this._c,d=0|this._d,i=0|this._e,c=0|this._f,a=0|this._g,w=0|this._h;for(var x=0;64>x;x++){var P=g[x]=16>x?e.readInt32BE(4*x):y(g[x-2])+g[x-7]+s(g[x-15])+g[x-16];b=w+p(i)+t(i,c,a)+r[x]+P,m=u(f)+l(f,n,o),w=a,a=c,c=i,i=d+b,d=o,o=n,n=f,f=b+m}this._a=f+this._a|0,this._b=n+this._b|0,this._c=o+this._c|0,this._d=d+this._d|0,this._e=i+this._e|0,this._f=c+this._f|0,this._g=a+this._g|0,this._h=w+this._h|0},o.prototype._hash=function(){var e=new n(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},f.exports=o}).call(this,e("buffer").Buffer)},{"./hash":304,buffer:150,util:186}],309:[function(e,f){(function(n){function o(){this.init(),this._w=l,t.call(this,128,112)}var d=e("util").inherits,i=e("./sha512"),t=e("./hash"),l=new Array(160);d(o,i),o.prototype.init=function(){return this._a=-876896931,this._b=1654270250,this._c=-1856437926,this._d=355462360,this._e=1731405415,this._f=-1900787065,this._g=-619958771,this._h=1203062813,this._al=-1056596264,this._bl=914150663,this._cl=812702999,this._dl=-150054599,this._el=-4191439,this._fl=1750603025,this._gl=1694076839,this._hl=-1090891868,this._len=this._s=0,this},o.prototype._hash=function(){function e(e,n,o){f.writeInt32BE(e,o),f.writeInt32BE(n,o+4)}var f=new n(48);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),f},f.exports=o}).call(this,e("buffer").Buffer)},{"./hash":304,"./sha512":310,buffer:150,util:186}],310:[function(e,f){(function(n){function o(){this.init(),this._w=s,u.call(this,128,112)}function d(e,f,n){return e>>>n|f<<32-n}function i(e,f,n){return e&f^~e&n}function t(e,f,n){return e&f^e&n^f&n}var l=e("util").inherits,u=e("./hash"),p=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);l(o,u),o.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},o.prototype._update=function(e){var f,n,o,l,u,s,y,c,a,r,w,b,m,g,x,P,j=this._w;f=0|this._a,n=0|this._b,o=0|this._c,l=0|this._d,u=0|this._e,s=0|this._f,y=0|this._g,c=0|this._h,a=0|this._al,r=0|this._bl,w=0|this._cl,b=0|this._dl,m=0|this._el,g=0|this._fl,x=0|this._gl,P=0|this._hl;for(var v=0;80>v;v++){var M,X,h=2*v;if(16>v)M=j[h]=e.readInt32BE(4*h),X=j[h+1]=e.readInt32BE(4*h+4);else{var k=j[h-30],q=j[h-30+1],z=d(k,q,1)^d(k,q,8)^k>>>7,A=d(q,k,1)^d(q,k,8)^d(q,k,7);k=j[h-4],q=j[h-4+1];var B=d(k,q,19)^d(q,k,29)^k>>>6,C=d(q,k,19)^d(k,q,29)^d(q,k,6),D=j[h-14],E=j[h-14+1],F=j[h-32],G=j[h-32+1];X=A+E,M=z+D+(A>>>0>X>>>0?1:0),X+=C,M=M+B+(C>>>0>X>>>0?1:0),X+=G,M=M+F+(G>>>0>X>>>0?1:0),j[h]=M,j[h+1]=X}var H=t(f,n,o),I=t(a,r,w),J=d(f,a,28)^d(a,f,2)^d(a,f,7),K=d(a,f,28)^d(f,a,2)^d(f,a,7),L=d(u,m,14)^d(u,m,18)^d(m,u,9),N=d(m,u,14)^d(m,u,18)^d(u,m,9),O=p[h],Q=p[h+1],R=i(u,s,y),S=i(m,g,x),T=P+N,U=c+L+(P>>>0>T>>>0?1:0);T+=S,U=U+R+(S>>>0>T>>>0?1:0),T+=Q,U=U+O+(Q>>>0>T>>>0?1:0),T+=X,U=U+M+(X>>>0>T>>>0?1:0);var V=K+I,W=J+H+(K>>>0>V>>>0?1:0);c=y,P=x,y=s,x=g,s=u,g=m,m=b+T|0,u=l+U+(b>>>0>m>>>0?1:0)|0,l=o,b=w,o=n,w=r,n=f,r=a,a=T+V|0,f=U+W+(T>>>0>a>>>0?1:0)|0}this._al=this._al+a|0,this._bl=this._bl+r|0,this._cl=this._cl+w|0,this._dl=this._dl+b|0,this._el=this._el+m|0,this._fl=this._fl+g|0,this._gl=this._gl+x|0,this._hl=this._hl+P|0,this._a=this._a+f+(this._al>>>0<a>>>0?1:0)|0,this._b=this._b+n+(this._bl>>>0<r>>>0?1:0)|0,this._c=this._c+o+(this._cl>>>0<w>>>0?1:0)|0,this._d=this._d+l+(this._dl>>>0<b>>>0?1:0)|0,this._e=this._e+u+(this._el>>>0<m>>>0?1:0)|0,this._f=this._f+s+(this._fl>>>0<g>>>0?1:0)|0,this._g=this._g+y+(this._gl>>>0<x>>>0?1:0)|0,this._h=this._h+c+(this._hl>>>0<P>>>0?1:0)|0},o.prototype._hash=function(){function e(e,n,o){f.writeInt32BE(e,o),f.writeInt32BE(n,o+4)}var f=new n(64);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),e(this._g,this._gl,48),e(this._h,this._hl,56),f},f.exports=o}).call(this,e("buffer").Buffer)},{"./hash":304,buffer:150,util:186}],311:[function(e,f){"use strict";var n=e("pbkdf2-compat/pbkdf2");f.exports=function(e,f){f=f||{};var o=n(e);return f.pbkdf2=o.pbkdf2,f.pbkdf2Sync=o.pbkdf2Sync,f}},{"pbkdf2-compat/pbkdf2":302}],312:[function(e,f){(function(n,o){"use strict";!function(){var d=("undefined"==typeof window?n:window)||{},i=d.crypto||d.msCrypto||e("crypto");f.exports=function(e){if(i.getRandomValues){var f=new o(e);return i.getRandomValues(f),f}if(i.randomBytes)return i.randomBytes(e);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{buffer:150,crypto:149}],313:[function(e,f){f.exports=e("./lib/sessionManager")},{"./lib/sessionManager":317}],314:[function(e,f){function n(e){i.call(this,e);var f=this,n=this.parent.config.peerConnectionConfig,o=this.parent.config.peerConnectionConstraints;n.useJingle=!0,this.pc=new t(n,o),this.pc.on("addChannel",this._onChannelAdded.bind(this)),this.pc.on("ice",this._onIceCandidate.bind(this)),this.pc.on("iceConnectionStateChange",function(){switch(f.pc.iceConnectionState){case"failed":f.pc.isInitiator&&f.parent.emit("iceFailed",f)}}),this.sender=new l.Sender,this.sender.on("progress",function(e,n){f._log("debug","Send progress "+e+"/"+n)}),this.sender.on("sentFile",function(e){f._log("debug","Sent file "+e.name);var n=f.pc.localDescription.contents[0];delete n.transport,n.description={descType:"filetransfer",offer:{hash:{algo:e.algo,value:e.hash}}},f.send("description-info",{contents:[n]}),f.parent.emit("sentFile",f,e)}),this.receiver=new l.Receiver,this.receiver.on("receivedFile",function(e){f.receivedFile=e,f.maybeReceivedFile()}),this.receiver.on("progress",function(e,n){f._log("debug","Receive progress "+e+"/"+n)})}var o=e("util"),d=e("extend-object"),i=e("./genericSession"),t=e("rtcpeerconnection"),l=e("filetransfer");o.inherits(n,i),n.prototype._onChannelAdded=function(e){this.receiver.receive(null,e)},n.prototype=d(n.prototype,{start:function(e){var f=this;this.state="pending",this.pc.isInitiator=!0;var n=this.pc.createDataChannel("filetransfer");n.onopen=function(){f.sender.send(e,n)};var o={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};this.pc.offer(o,function(n,o){o.jingle.contents[0].description={descType:"filetransfer",offer:{date:e.lastModifiedDate,name:e.name,size:e.size,hash:{algo:"sha-1",value:""}}},f.send("session-initiate",o.jingle)})},end:function(e,f){this.pc.close(),i.prototype.end.call(this,e,f)},accept:function(){var e=this;this._log("debug","Accepted incoming session"),this.state="active",this.pc.answer(function(f,n){return f?(e._log("error","Could not create WebRTC answer",f),e.end("failed-application")):(n.jingle.contents[0].name="data",void e.send("session-accept",n.jingle))})},onSessionInitiate:function(e,f){var n=this;this._log("debug","Initiating incoming session"),this.state="pending",this.pc.isInitiator=!1;var o=e.contents[0].description;this.receiver.metadata=o.offer.toJSON(),this.receiver.metadata.hash&&(this.receiver.config.hash=this.receiver.metadata.hash.algo),e.contents[0].description={descType:"datachannel"},this.pc.handleOffer({type:"offer",jingle:e},function(e){return e?(n._log("error","Could not create WebRTC answer",e),f({condition:"general-error"})):void f()})},onSessionAccept:function(e,f){var n=this;this._log("debug","Activating accepted outbound session"),this.state="active",e.contents[0].description={descType:"datachannel"},this.pc.handleAnswer({type:"answer",jingle:e},function(e){return e?(n._log("error","Could not process WebRTC answer",e),f({condition:"general-error"})):(n.parent.emit("accepted",n),void f())})},onSessionTerminate:function(e,f){this._log("debug","Terminating session"),this.pc.close(),i.prototype.end.call(this,e.reason,!0),f()},onTransportInfo:function(e,f){var n=this;this._log("debug","Adding ICE candidate"),this.pc.processIce(e,function(e){e&&n._log("error","Could not process ICE candidate",e),f()})},onDescriptionInfo:function(e,f){var n=e.contents[0].description.offer.hash;this.receiver.metadata.hash=n,this.receiver.metadata.actualhash&&this.maybeReceivedFile(),f()},_onIceCandidate:function(e){this._log("debug","Discovered new ICE candidate",e.jingle),e.jingle.contents[0].name="data",this.send("transport-info",e.jingle)},maybeReceivedFile:function(){this.receiver.metadata.hash.value&&(this.receiver.metadata.hash.value===this.receiver.metadata.actualhash?(this._log("debug","Hash matches"),this.parent.emit("receivedFile",this,this.receivedFile,this.receiver.metadata),this.end("success")):(this._log("error","Hash mismatch, terminating"),this.end("media-error")))}}),f.exports=n},{"./genericSession":315,"extend-object":318,filetransfer:319,rtcpeerconnection:326,util:186}],315:[function(e,f){function n(e){t.call(this);var f=this;this.sid=e.sid||Date.now().toString(),this.peer=e.peer,this.peerID=e.peerID||this.peer.full||this.peer,this.isInitiator=e.initiator||!1,this.parent=e.parent,this.state="starting",this.connectionState="starting",this.pendingDescriptionTypes=e.descriptionTypes||[],this.pendingAction=!1,this.processingQueue=d.queue(function(e,n){var o=e.action,d=e.changes,i=e.cb;return f._log("debug",o),l[o]?void f[l[o]](d,function(e,f){return i(e,f),n()}):(f._log("error","Invalid action: "+o),i({condition:"bad-request"}),n())})}var o=e("util"),d=e("async"),i=e("extend-object"),t=e("wildemitter"),l={"content-accept":"onContentAccept","content-add":"onContentAdd","content-modify":"onConentModify","content-reject":"onContentReject","content-remove":"onContentRemove","description-info":"onDescriptionInfo","security-info":"onSecurityInfo","session-accept":"onSessionAccept","session-info":"onSessionInfo","session-initiate":"onSessionInitiate","session-terminate":"onSessionTerminate","transport-accept":"onTransportAccept","transport-info":"onTransportInfo","transport-reject":"onTransportReject","transport-replace":"onTransportReplace","source-add":"onSourceAdd","source-remove":"onSourceRemove"};o.inherits(n,t),Object.keys(l).forEach(function(e){var f=l[e];n.prototype[f]=function(f,n){this._log("error","Unsupported action: "+e),n()}}),Object.defineProperties(n.prototype,{state:{get:function(){return this._sessionState},set:function(e){if(e!==this._sessionState){var f=this._sessionState;this._log("info","Changing session state to: "+e),this._sessionState=e,this.emit("change:sessionState",this,e),this.emit("change:"+e,this,!0),f&&this.emit("change:"+f,this,!1)}}},connectionState:{get:function(){return this._connectionState},set:function(e){if(e!==this._connectionState){var f=this._connectionState;this._log("info","Changing connection state to: "+e),this._connectionState=e,this.emit("change:connectionState",this,e),this.emit("change:"+e,this,!0),f&&this.emit("change:"+f,this,!1)}}},starting:{get:function(){return"starting"===this._sessionState}},pending:{get:function(){return"pending"===this._sessionState}},active:{get:function(){return"active"===this._sessionState}},ended:{get:function(){return"ended"===this._sessionState}},connected:{get:function(){return"connected"===this._connectionState}},connecting:{get:function(){return"connecting"===this._connectionState}},disconnected:{get:function(){return"disconnected"===this._connectionState}},interrupted:{get:function(){return"interrupted"===this._connectionState}}}),n.prototype=i(n.prototype,{_log:function(e,f){f=this.sid+": "+f,this.emit("log:"+e,f)},send:function(e,f){f=f||{},f.sid=this.sid,f.action=e;var n={"session-inititate":!0,"session-accept":!0,"content-add":!0,"content-remove":!0,"content-reject":!0,"content-accept":!0,"content-modify":!0,"transport-replace":!0,"transport-reject":!0,"transport-accept":!0,"source-add":!0,"source-remove":!0};this.pendingAction=n[e]?e:!1,this.emit("send",{to:this.peer,type:"set",jingle:f})},process:function(e,f,n){this.processingQueue.push({action:e,changes:f,cb:n})},start:function(){this._log("error","Can not start base sessions"),this.end("unsupported-applications",!0)},accept:function(){this._log("error","Can not accept base sessions"),this.end("unsupported-applications")},cancel:function(){this.end("cancel")},decline:function(){this.end("decline")},end:function(e,f){this.state="ended",e||(e="success"),"string"==typeof e&&(e={condition:e}),f||this.send("session-terminate",{reason:e}),this.emit("terminated",this,e)},onSessionInfo:function(e,f){var n={sid:!0,action:!0,initiator:!0,responder:!0},o=!1;Object.keys(e).forEach(function(e){n[e]||(o=!0)}),o?f({type:"modify",condition:"feature-not-implemented",jingleCondition:"unsupported-info"}):f()},onDescriptionInfo:function(e,f){f({type:"modify",condition:"feature-not-implemented",jingleCondition:"unsupported-info"})},onTransportInfo:function(e,f){f({type:"modify",condition:"feature-not-implemented",jingleCondition:"unsupported-info"})},onContentAdd:function(e,f){f(),this.send("content-reject",{reason:{condition:"failed-application",text:"content-add is not supported"}})},onTransportReplace:function(e,f){f(),this.send("transport-reject",{reason:{condition:"failed-application",text:"transport-replace is not supported"}})}}),f.exports=n},{async:110,"extend-object":318,util:186,wildemitter:354}],316:[function(e,f){function n(e){i.call(this,e);var f=this,n=this.parent.config.peerConnectionConfig,o=this.parent.config.peerConnectionConstraints;n.useJingle=!0,this.pc=new t(n,o),this.pc.on("ice",this._onIceCandidate.bind(this)),this.pc.on("addStream",this._onStreamAdded.bind(this)),this.pc.on("removeStream",this._onStreamRemoved.bind(this)),this.pc.on("iceConnectionStateChange",function(){switch(f.pc.iceConnectionState){case"failed":f.pc.isInitiator&&f.parent.emit("iceFailed",f)}})}var o=e("util"),d=e("extend-object"),i=e("./genericSession"),t=e("rtcpeerconnection");o.inherits(n,i),Object.defineProperty(n.prototype,"streams",{get:function(){return this.pc.remoteStreams}}),n.prototype=d(n.prototype,{start:function(e){var f=this;this.state="pending",this.pc.isInitiator=!0,this.pc.offer(e,function(n,o){e&&e.mandatory&&o.jingle.contents.forEach(function(f){f.description&&"rtp"===f.description.descType&&(e.mandatory.OfferToReceiveAudio||"audio"!==f.description.media||(f.senders="initiator"),e.mandatory.OfferToReceiveVideo||"video"!==f.description.media||(f.senders="initiator"))}),o.jingle.contents.forEach(function(e){var f=e.description.sources||[];f.forEach(function(e){e.parameters=e.parameters.filter(function(e){return!("mslabel"===e.key||"label"===e.key)})})}),f.send("session-initiate",o.jingle)})},end:function(e,f){var n=this;this.pc.close(),this.streams.forEach(function(e){n._onStreamRemoved({stream:e})}),i.prototype.end.call(this,e,f)},accept:function(){var e=this;this._log("debug","Accepted incoming session"),this.state="active",this.pc.answer(function(f,n){return f?(e._log("error","Could not create WebRTC answer",f),e.end("failed-application")):(n.jingle.contents.forEach(function(e){var f=e.description.sources||[];f.forEach(function(e){e.parameters=e.parameters.filter(function(e){return!("mslabel"===e.key||"label"===e.key)})})}),void e.send("session-accept",n.jingle))})},ring:function(){this._log("debug","Ringing on incoming session"),this.send("session-info",{ringing:!0})},mute:function(e,f){this._log("debug","Muting"),this.send("session-info",{mute:{creator:e,name:f}})},unmute:function(e,f){this._log("debug","Unmuting"),this.send("session-info",{unmute:{creator:e,name:f}})},hold:function(){this._log("debug","Placing on hold"),this.send("session-info",{hold:!0})},resume:function(){this._log("debug","Resuing from hold"),this.send("session-info",{active:!0})},addStream:function(e){this.pc.addStream(e)},addStream2:function(e,f){f=f||function(){};var n=this;this.pc.addStream(e),this.pc.handleOffer({type:"offer",jingle:this.pc.remoteDescription},function(o){return o?f(o):void n.pc.answer(function(o,d){return o?f(o):(d.jingle.contents.forEach(function(f){delete f.transport,delete f.description.payloads,f.description.sources&&(f.description.sources=f.description.sources.filter(function(f){return e.id===f.parameters[1].value.split(" ")[0]}))}),n.send("source-add",d.jingle),void f())})})},removeStream:function(e){this.pc.removeStream(e)},removeStream2:function(e,f){f=f||function(){};var n=this,o=this.pc.localDescription;o.contents.forEach(function(f){delete f.transport,delete f.description.payloads,f.description.sources&&(f.description.sources=f.description.sources.filter(function(f){return e.id===f.parameters[1].value.split(" ")[0]}))}),this.send("source-remove",o),this.pc.removeStream(e),this.pc.handleOffer({type:"offer",jingle:this.pc.remoteDescription},function(e){return e?f(e):void n.pc.answer(function(e){return e?f(e):void f()
})})},onSessionInitiate:function(e,f){var n=this;this._log("debug","Initiating incoming session"),this.state="pending",this.pc.isInitiator=!1,this.pc.handleOffer({type:"offer",jingle:e},function(e){return e?(n._log("error","Could not create WebRTC answer",e),f({condition:"general-error"})):void f()})},onSessionAccept:function(e,f){var n=this;this._log("debug","Activating accepted outbound session"),this.state="active",this.pc.handleAnswer({type:"answer",jingle:e},function(e){return e?(n._log("error","Could not process WebRTC answer",e),f({condition:"general-error"})):(n.parent.emit("accepted",n),void f())})},onSessionTerminate:function(e,f){var n=this;this._log("debug","Terminating session"),this.pc.close(),this.streams.forEach(function(e){n._onStreamRemoved({stream:e})}),i.prototype.end.call(this,e.reason,!0),f()},onTransportInfo:function(e,f){var n=this;this._log("debug","Adding ICE candidate"),this.pc.processIce(e,function(e){e&&n._log("error","Could not process ICE candidate",e),f()})},onSessionInfo:function(e,f){this._log("debug","Session info",e),e.ringing&&(this._log("debug","Ringing on remote stream"),this.parent.emit("ringing",this)),e.hold&&(this._log("debug","On hold"),this.parent.emit("hold",this)),e.active&&(this._log("debug","Resumed from hold"),this.parent.emit("resumed",this)),e.mute&&(this._log("debug","Muted",e.mute),this.parent.emit("mute",this,e.mute)),e.unmute&&(this._log("debug","Unmuted",e.unmute),this.parent.emit("unmute",this,e.unmute)),f()},onSourceAdd:function(e,f){var n=this;if(this.pc&&"closed"!==this.pc.iceConnectionState){if("connected"!==this.pc.iceConnectionState)return this.waitForUpdate=!0,void window.setTimeout(function(){n.onSourceAdd(e,f)},250);if(this.waitForUpdate)return delete this.waitForUpdate,void window.setTimeout(function(){n.onSourceAdd(e,f)},500);this._log("debug","source-add");var o=this.pc.remoteDescription;this.pc.remoteDescription.contents.forEach(function(f,n){var d=f.description,i=d.sources||[],t=d.sourceGroups||[];e.contents.forEach(function(e){if(f.name===e.name){var d=e.description,l=d.sources||[];i=i.concat(l),o.contents[n].description.sources=JSON.parse(JSON.stringify(i));var u=d.sourceGroups||[];t=t.concat(u),o.contents[n].description.sourceGroups=JSON.parse(JSON.stringify(t))}})}),this.pc.handleOffer({type:"offer",jingle:o},function(e){return e?(n._log("error","source-add offer error"),f({condition:"general-error"})):void n.pc.answer(function(e){return e?(n._log("error","source-add answer error"),f({condition:"general-error"})):void f()})})}},onSourceRemove:function(e,f){var n=this;if(this.pc&&"closed"!==this.pc.iceConnectionState){if("connected"!==this.pc.iceConnectionState)return this.waitForUpdate=!0,void window.setTimeout(function(){n.onSourceRemove(e,f)},250);if(this.waitForUpdate)return delete this.waitForUpdate,void window.setTimeout(function(){n.onSourceRemove(e,f)},500);this._log("debug","source-remove");var o=this.pc.remoteDescription;this.pc.remoteDescription.contents.forEach(function(f,n){var d=f.description,i=d.sources||[],t=d.sourceGroups||[];e.contents.forEach(function(e){if(f.name===e.name){var d,l,u,p,s=e.description,y=s.sources||[],c=s.sourceGroups||[];for(l=0;l<y.length;l++){for(d=-1,u=0;u<i.length;u++)if(y[l].ssrc===i[u].ssrc){d=u;break}d>-1&&(i.splice(d,1),o.contents[n].description.sources=JSON.parse(JSON.stringify(i)))}for(l=0;l<c.length;l++){for(d=-1,u=0;u<t.length;u++)if(c[l].semantics===t[u].semantics&&c[l].sources.length===t[u].sources.length){var a=!0;for(p=0;p<c[l].sources.length;p++)if(c[l].sources[p]!==t[u].sources[p]){a=!1;break}if(a){d=u;break}}d>-1&&(t.splice(d,1),o.contents[n].description.sourceGroups=JSON.parse(JSON.stringify(t)))}}})}),this.pc.handleOffer({type:"offer",jingle:o},function(e){return e?(n._log("error","source-remove offer error"),f({condition:"general-error"})):void n.pc.answer(function(e){return e?(n._log("error","source-remove answer error"),f({condition:"general-error"})):void f()})})}},switchStream:function(e,f,n){n=n||function(){};var o=this,d=this.pc.localDescription;d.contents.forEach(function(e){delete e.transport,delete e.description.payloads}),this.pc.removeStream(e),this.send("source-remove",d);var i=e.getAudioTracks();i.length&&f.addTrack(i[0]),this.pc.addStream(f),this.pc.handleOffer({type:"offer",jingle:this.pc.remoteDescription},function(e){return e?n(e):void o.pc.answer(function(e,f){return e?n(e):(f.jingle.contents.forEach(function(e){delete e.transport,delete e.description.payloads}),o.send("source-add",f.jingle),void n())})})},_onIceCandidate:function(e){this._log("debug","Discovered new ICE candidate",e.jingle),this.send("transport-info",e.jingle)},_onStreamAdded:function(e){this._log("debug","Remote media stream added"),this.parent.emit("peerStreamAdded",this,e.stream)},_onStreamRemoved:function(e){this._log("debug","Remote media stream removed"),this.parent.emit("peerStreamRemoved",this,e.stream)}}),f.exports=n},{"./genericSession":315,"extend-object":318,rtcpeerconnection:326,util:186}],317:[function(e,f){function n(e){i.call(this),e=e||{},this.jid=e.jid,this.selfID=e.selfID||this.jid&&this.jid.full||this.jid||"",this.sessions={},this.peers={},this.prepareSession=e.prepareSession||function(e){return e.descriptionTypes.indexOf("rtp")>=0?new u(e):e.descriptionTypes.indexOf("filetransfer")>=0?new p(e):void 0},this.screenSharingSupport=t.screenSharing,this.capabilities=["urn:xmpp:jingle:1"],t.support&&(this.capabilities=["urn:xmpp:jingle:1","urn:xmpp:jingle:apps:rtp:1","urn:xmpp:jingle:apps:rtp:audio","urn:xmpp:jingle:apps:rtp:video","urn:xmpp:jingle:apps:rtp:rtcb-fb:0","urn:xmpp:jingle:apps:rtp:rtp-hdrext:0","urn:xmpp:jingle:apps:rtp:ssma:0","urn:xmpp:jingle:apps:dtls:0","urn:xmpp:jingle:apps:grouping:0","urn:xmpp:jingle:apps:file-transfer:3","urn:xmpp:jingle:transports:ice-udp:1","urn:xmpp:jingle:transports.dtls-sctp:1","urn:ietf:rfc:3264","urn:ietf:rfc:5576","urn:ietf:rfc:5888"]),this.config={debug:!1,peerConnectionConfig:{iceServers:e.iceServers||[{url:"stun:stun.l.google.com:19302"}]},peerConnectionConstraints:{optional:[{DtlsSrtpKeyAgreement:!0},{RtpDataChannesl:!1}]},media:{audio:!0,video:!0}};for(var f in e)this.config[f]=e[f];this.iceServers=this.config.peerConnectionConfig.iceServers}var o=e("util"),d=e("intersect"),i=e("wildemitter"),t=e("webrtcsupport"),l=e("./genericSession"),u=e("./mediaSession"),p=e("./fileSession");o.inherits(n,i),n.prototype.addICEServer=function(e){"string"==typeof e&&(e={url:e}),this.iceServers.push(e)},n.prototype.addSession=function(e){var f=this,n=e.sid,o=e.peerID;return this.sessions[n]=e,this.peers[o]||(this.peers[o]=[]),this.peers[o].push(e),e.on("terminated",function(){var d=f.peers[o]||[];d.length&&d.splice(d.indexOf(e),1),delete f.sessions[n]}),e.on("*",function(n,o,d,i){if("send"===n){var t=o.jingle&&o.jingle.action;e.isInitiator&&"session-initiate"===t&&f.emit("outgoing",e)}!f.config.debug||"log:debug"!==n&&"log:error"!==n||console.log("Jingle:",o,d,i),0!==n.indexOf("change")&&f.emit(n,o,d,i)}),this.emit("createdSession",e),e},n.prototype.createMediaSession=function(e,f,n){var o=new u({sid:f,peer:e,initiator:!0,stream:n,parent:this});return this.addSession(o),o},n.prototype.createFileTransferSession=function(e,f){var n=new p({sid:f,peer:e,initiator:!0,parent:this});return this.addSession(n),n},n.prototype.endPeerSessions=function(e,f,n){e=e.full||e;var o=this.peers[e]||[];delete this.peers[e],o.forEach(function(e){e.end(f||"gone",n)})},n.prototype.endAllSessions=function(e,f){var n=this;Object.keys(this.peers).forEach(function(o){n.endPeerSessions(o,e,f)})},n.prototype._createIncomingSession=function(e,f){var n;return this.prepareSession&&(n=this.prepareSession(e,f)),n||(n=new l(e)),this.addSession(n),n},n.prototype._sendError=function(e,f,n){n.type||(n.type="cancel"),this.emit("send",{to:e,id:f,type:"error",error:n})},n.prototype._log=function(e,f){this.emit("log:"+e,f)},n.prototype.process=function(e){var f=this,n=e.jingle?e.jingle.sid:null,o=this.sessions[n]||null,i=e.id,t=e.from.full||e.from;if("error"===e.type){var l=e.error&&"tie-break"===e.error.jingleCondition;return o&&o.pending&&l?o.end("alternative-session",!0):(o&&(o.pendingAction=!1),this.emit("error",e))}if("result"===e.type)return void(o&&(o.pendingAction=!1));var u=e.jingle.action,p=e.jingle.contents||[],s=p.map(function(e){return e.description?e.description.descType:void 0}),y=p.map(function(e){return e.transport?e.transport.transType:void 0});if("session-initiate"!==u){if(!o)return this._log("error","Unknown session",n),this._sendError(t,i,{condition:"item-not-found",jingleCondition:"unknown-session"});if(o.peerID!==t||o.ended)return this._log("error","Session has ended, or action has wrong sender"),this._sendError(t,i,{condition:"item-not-found",jingleCondition:"unknown-session"});if("session-accept"===u&&!o.pending)return this._log("error","Tried to accept session twice",n),this._sendError(t,i,{condition:"unexpected-request",jingleCondition:"out-of-order"});if("session-terminate"!==u&&u===o.pendingAction&&(this._log("error","Tie break during pending request"),o.isInitiator))return this._sendError(t,i,{condition:"conflict",jingleCondition:"tie-break"})}else if(o){if(o.peerID!==t)return this._log("error","Duplicate sid from new sender"),this._sendError(t,i,{condition:"service-unavailable"});if(!o.pending)return this._log("error","Someone is doing this wrong"),this._sendError(t,i,{condition:"unexpected-request",jingleCondition:"out-of-order"});if(this.selfID>o.peerID)return this._log("error","Tie break new session because of duplicate sids"),this._sendError(t,i,{condition:"conflict",jingleCondition:"tie-break"})}else if(this.peers[t]&&this.peers[t].length)for(var c=0,a=this.peers[t].length;a>c;c++){var r=this.peers[t][c];if(r&&r.pending&&d(s,r.pendingDescriptionTypes).length&&r.sid>n)return this._log("info","Tie break"),this._sendError(t,i,{condition:"conflict",jingleCondition:"tie-break"})}if("session-initiate"===u){if(!p.length)return f._sendError(t,i,{condition:"bad-request"});o=this._createIncomingSession({sid:n,peer:e.from,peerID:t,initiator:!1,parent:this,descriptionTypes:s,transportTypes:y},e)}o.process(u,e.jingle,function(n){n?(f._log("error","Could not process request",e,n),f._sendError(t,i,n)):(f.emit("send",{to:t,id:i,type:"result"}),"session-initiate"===u&&f.emit("incoming",o))})},f.exports=n},{"./fileSession":314,"./genericSession":315,"./mediaSession":316,intersect:320,util:186,webrtcsupport:327,wildemitter:354}],318:[function(e,f){var n=[],o=n.forEach,d=n.slice;f.exports=function(e){return o.call(d.call(arguments,1),function(f){if(f)for(var n in f)e[n]=f[n]}),e}},{}],319:[function(e,f){function n(e){i.call(this);var f=this,n=e||{};this.config={chunksize:768,pacing:10,hash:"sha-1"};var o;for(o in n)this.config[o]=n[o];this.file=null,this.channel=null,this.hash=null,this.processingQueue=d.queue(function(e,n){if("chunk"==e.type){var o=new window.FileReader;o.onload=function(){return function(o){f.channel.send(o.target.result),f.hash.update(new Uint8Array(o.target.result)),f.emit("progress",e.start,e.file.size),window.setTimeout(n,f.config.pacing)}}(e.file);var d=e.file.slice(e.start,e.start+e.size);o.readAsArrayBuffer(d)}else"complete"==e.type&&(f.emit("sentFile",{hash:f.hash.digest("hex"),algo:f.config.hash}),n())})}function o(e){i.call(this);var f=e||{};this.config={hash:"sha-1"};var n;for(n in f)this.config[n]=f[n];this.receiveBuffer=[],this.received=0,this.metadata={},this.channel=null,this.hash=null}var d=e("async"),i=e("wildemitter"),t=e("util"),l=e("iana-hashes");t.inherits(n,i),n.prototype.send=function(e,f){this.file=e,this.hash=l.createHash(this.config.hash),this.channel=f;for(var n=0;n<this.file.size;n+=this.config.chunksize)this.processingQueue.push({type:"chunk",file:e,start:n,size:this.config.chunksize});this.processingQueue.push({type:"complete"})},t.inherits(o,i),o.prototype.receive=function(e,f){var n=this;e&&(this.metadata=e),this.hash=l.createHash(this.config.hash),this.channel=f,f.binaryType="arraybuffer",this.channel.onmessage=function(e){var f=e.data.byteLength;n.received+=f,n.receiveBuffer.push(e.data),n.hash.update(new Uint8Array(e.data)),n.emit("progress",n.received,n.metadata.size),n.received==n.metadata.size?(n.metadata.actualhash=n.hash.digest("hex"),n.emit("receivedFile",new window.Blob(n.receiveBuffer),n.metadata),n.receiveBuffer=[]):n.received>n.metadata.size&&(console.error("received more than expected, discarding..."),n.receiveBuffer=[])}},f.exports={},f.exports.support=window&&window.File&&window.FileReader&&window.Blob,f.exports.Sender=n,f.exports.Receiver=o},{async:110,"iana-hashes":193,util:186,wildemitter:354}],320:[function(e,f){function n(e,f){for(var n=[],d=0;d<e.length;d++)o(f,e[d])>-1&&n.push(e[d]);return n}function o(e,f){for(var n=0;n<e.length;n++)if(e[n]===f)return n;return-1}f.exports=n,n.big=function(e,f){for(var n=[],o={},d=0;d<f.length;d++)o[f[d]]=!0;for(var d=0;d<e.length;d++)o[e[d]]&&n.push(e[d]);return n}},{}],321:[function(e,f,n){var o=e("./lib/tosdp"),d=e("./lib/tojson");n.toSessionSDP=o.toSessionSDP,n.toMediaSDP=o.toMediaSDP,n.toCandidateSDP=o.toCandidateSDP,n.toSessionJSON=d.toSessionJSON,n.toMediaJSON=d.toMediaJSON,n.toCandidateJSON=d.toCandidateJSON},{"./lib/tojson":323,"./lib/tosdp":324}],322:[function(e,f,n){n.lines=function(e){return e.split("\r\n").filter(function(e){return e.length>0})},n.findLine=function(e,f,n){for(var o=e.length,d=0;d<f.length;d++)if(f[d].substr(0,o)===e)return f[d];if(!n)return!1;for(var i=0;i<n.length;i++)if(n[i].substr(0,o)===e)return n[i];return!1},n.findLines=function(e,f,n){for(var o=[],d=e.length,i=0;i<f.length;i++)f[i].substr(0,d)===e&&o.push(f[i]);if(o.length||!n)return o;for(var t=0;t<n.length;t++)n[t].substr(0,d)===e&&o.push(n[t]);return o},n.mline=function(e){for(var f=e.substr(2).split(" "),n={media:f[0],port:f[1],proto:f[2],formats:[]},o=3;o<f.length;o++)f[o]&&n.formats.push(f[o]);return n},n.rtpmap=function(e){var f=e.substr(9).split(" "),n={id:f.shift()};return f=f[0].split("/"),n.name=f[0],n.clockrate=f[1],n.channels=3==f.length?f[2]:"1",n},n.sctpmap=function(e){var f=e.substr(10).split(" "),n={number:f.shift(),protocol:f.shift(),streams:f.shift()};return n},n.fmtp=function(e){for(var f,n,o,d=e.substr(e.indexOf(" ")+1).split(";"),i=[],t=0;t<d.length;t++)f=d[t].split("="),n=f[0].trim(),o=f[1],n&&o?i.push({key:n,value:o}):n&&i.push({key:"",value:n});return i},n.crypto=function(e){var f=e.substr(9).split(" "),n={tag:f[0],cipherSuite:f[1],keyParams:f[2],sessionParams:f.slice(3).join(" ")};return n},n.fingerprint=function(e){var f=e.substr(14).split(" ");return{hash:f[0],value:f[1]}},n.extmap=function(e){var f=e.substr(9).split(" "),n={},o=f.shift(),d=o.indexOf("/");return d>=0?(n.id=o.substr(0,d),n.senders=o.substr(d+1)):(n.id=o,n.senders="sendrecv"),n.uri=f.shift()||"",n},n.rtcpfb=function(e){var f=e.substr(10).split(" "),n={};return n.id=f.shift(),n.type=f.shift(),"trr-int"===n.type?n.value=f.shift():n.subtype=f.shift()||"",n.parameters=f,n},n.candidate=function(e){var f;f=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:f[0],component:f[1],protocol:f[2].toLowerCase(),priority:f[3],ip:f[4],port:f[5],type:f[7],generation:"0"},o=8;o<f.length;o+=2)"raddr"===f[o]?n.relAddr=f[o+1]:"rport"===f[o]?n.relPort=f[o+1]:"generation"===f[o]?n.generation=f[o+1]:"tcptype"===f[o]&&(n.tcpType=f[o+1]);return n.network="1",n},n.sourceGroups=function(e){for(var f=[],n=0;n<e.length;n++){var o=e[n].substr(13).split(" ");f.push({semantics:o.shift(),sources:o})}return f},n.sources=function(e){for(var f=[],n={},o=0;o<e.length;o++){var d=e[o].substr(7).split(" "),i=d.shift();if(!n[i]){var t={ssrc:i,parameters:[]};f.push(t),n[i]=t}d=d.join(" ").split(":");var l=d.shift(),u=d.join(":")||null;n[i].parameters.push({key:l,value:u})}return f},n.groups=function(e){for(var f,n=[],o=0;o<e.length;o++)f=e[o].substr(8).split(" "),n.push({semantics:f.shift(),contents:f});return n},n.bandwidth=function(e){var f=e.substr(2).split(":"),n={};return n.type=f.shift(),n.bandwidth=f.shift(),n}},{}],323:[function(e,f,n){var o=e("./parsers"),d=Math.random();n._setIdCounter=function(e){d=e},n.toSessionJSON=function(e,f){for(var d=e.split("\r\nm="),i=1;i<d.length;i++)d[i]="m="+d[i],i!==d.length-1&&(d[i]+="\r\n");var t=d.shift()+"\r\n",l=o.lines(t),u={},p=[];d.forEach(function(e){p.push(n.toMediaJSON(e,t,f))}),u.contents=p;var s=o.findLines("a=group:",l);return s.length&&(u.groups=o.groups(s)),u},n.toMediaJSON=function(e,f,d){var i=o.lines(e),t=o.lines(f),l=o.mline(i[0]),u={creator:d,name:l.media,description:{descType:"rtp",media:l.media,payloads:[],encryption:[],feedback:[],headerExtensions:[]},transport:{transType:"iceUdp",candidates:[],fingerprints:[]}};"application"==l.media&&(u.description={descType:"datachannel"},u.transport.sctp=[]);var p=u.description,s=u.transport,y=o.findLine("a=mid:",i);if(y&&(u.name=y.substr(6)),o.findLine("a=sendrecv",i,t)?u.senders="both":o.findLine("a=sendonly",i,t)?u.senders="initiator":o.findLine("a=recvonly",i,t)?u.senders="responder":o.findLine("a=inactive",i,t)&&(u.senders="none"),"rtp"==p.descType){var c=o.findLine("b=",i);c&&(p.bandwidth=o.bandwidth(c));var a=o.findLine("a=ssrc:",i);a&&(p.ssrc=a.substr(7).split(" ")[0]);var r=o.findLines("a=rtpmap:",i);r.forEach(function(e){var f=o.rtpmap(e);f.feedback=[];var n=o.findLines("a=fmtp:"+f.id,i);n.forEach(function(e){f.parameters=o.fmtp(e)});var d=o.findLines("a=rtcp-fb:"+f.id,i);d.forEach(function(e){f.feedback.push(o.rtcpfb(e))}),p.payloads.push(f)});var w=o.findLines("a=crypto:",i,t);w.forEach(function(e){p.encryption.push(o.crypto(e))}),o.findLine("a=rtcp-mux",i)&&(p.mux=!0);var b=o.findLines("a=rtcp-fb:*",i);b.forEach(function(e){p.feedback.push(o.rtcpfb(e))});var m=o.findLines("a=extmap:",i);m.forEach(function(e){var f=o.extmap(e),n={sendonly:"responder",recvonly:"initiator",sendrecv:"both",inactive:"none"};f.senders=n[f.senders],p.headerExtensions.push(f)});var g=o.findLines("a=ssrc-group:",i);p.sourceGroups=o.sourceGroups(g||[]);var x=o.findLines("a=ssrc:",i);p.sources=o.sources(x||[]),o.findLine("a=x-google-flag:conference",i,t)&&(p.googConferenceFlag=!0)}var P=o.findLines("a=fingerprint:",i,t),j=o.findLine("a=setup:",i,t);P.forEach(function(e){var f=o.fingerprint(e);j&&(f.setup=j.substr(8)),s.fingerprints.push(f)});var v=o.findLine("a=ice-ufrag:",i,t),M=o.findLine("a=ice-pwd:",i,t);if(v&&M){s.ufrag=v.substr(12),s.pwd=M.substr(10),s.candidates=[];var X=o.findLines("a=candidate:",i,t);X.forEach(function(e){s.candidates.push(n.toCandidateJSON(e))})}if("datachannel"==p.descType){var h=o.findLines("a=sctpmap:",i);h.forEach(function(e){var f=o.sctpmap(e);s.sctp.push(f)})}return u},n.toCandidateJSON=function(e){var f=o.candidate(e.split("\r\n")[0]);return f.id=(d++).toString(36).substr(0,12),f}},{"./parsers":322}],324:[function(e,f,n){var o={initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",sendonly:"initator",recvonly:"responder",sendrecv:"both",inactive:"none"};n.toSessionSDP=function(e,f,o){var d=["v=0","o=- "+(f||e.sid||Date.now())+" "+(o||Date.now())+" IN IP4 0.0.0.0","s=-","t=0 0"],i=e.groups||[];i.forEach(function(e){d.push("a=group:"+e.semantics+" "+e.contents.join(" "))});var t=e.contents||[];return t.forEach(function(e){d.push(n.toMediaSDP(e))}),d.join("\r\n")+"\r\n"},n.toMediaSDP=function(e){var f=[],d=e.description,i=e.transport,t=d.payloads||[],l=i&&i.fingerprints||[],u=[];if("datachannel"==d.descType?(u.push("application"),u.push("1"),u.push("DTLS/SCTP"),i.sctp&&i.sctp.forEach(function(e){u.push(e.number)})):(u.push(d.media),u.push("1"),u.push(d.encryption&&d.encryption.length>0||l.length>0?"RTP/SAVPF":"RTP/AVPF"),t.forEach(function(e){u.push(e.id)})),f.push("m="+u.join(" ")),f.push("c=IN IP4 0.0.0.0"),d.bandwidth&&d.bandwidth.type&&d.bandwidth.bandwidth&&f.push("b="+d.bandwidth.type+":"+d.bandwidth.bandwidth),"rtp"==d.descType&&f.push("a=rtcp:1 IN IP4 0.0.0.0"),i){i.ufrag&&f.push("a=ice-ufrag:"+i.ufrag),i.pwd&&f.push("a=ice-pwd:"+i.pwd);var p=!1;l.forEach(function(e){f.push("a=fingerprint:"+e.hash+" "+e.value),e.setup&&!p&&f.push("a=setup:"+e.setup)}),i.sctp&&i.sctp.forEach(function(e){f.push("a=sctpmap:"+e.number+" "+e.protocol+" "+e.streams)})}"rtp"==d.descType&&f.push("a="+(o[e.senders]||"sendrecv")),f.push("a=mid:"+e.name),d.mux&&f.push("a=rtcp-mux");var s=d.encryption||[];s.forEach(function(e){f.push("a=crypto:"+e.tag+" "+e.cipherSuite+" "+e.keyParams+(e.sessionParams?" "+e.sessionParams:""))}),d.googConferenceFlag&&f.push("a=x-google-flag:conference"),t.forEach(function(e){var n="a=rtpmap:"+e.id+" "+e.name+"/"+e.clockrate;if(e.channels&&"1"!=e.channels&&(n+="/"+e.channels),f.push(n),e.parameters&&e.parameters.length){var o=["a=fmtp:"+e.id],d=[];e.parameters.forEach(function(e){d.push((e.key?e.key+"=":"")+e.value)}),o.push(d.join(";")),f.push(o.join(" "))}e.feedback&&e.feedback.forEach(function(n){f.push("trr-int"===n.type?"a=rtcp-fb:"+e.id+" trr-int "+n.value?n.value:"0":"a=rtcp-fb:"+e.id+" "+n.type+(n.subtype?" "+n.subtype:""))})}),d.feedback&&d.feedback.forEach(function(e){f.push("trr-int"===e.type?e.value:"a=rtcp-fb:* "+e.type+(e.subtype?" "+e.subtype:""))});var y=d.headerExtensions||[];y.forEach(function(e){f.push("a=extmap:"+e.id+(e.senders?"/"+o[e.senders]:"")+" "+e.uri)});var c=d.sourceGroups||[];c.forEach(function(e){f.push("a=ssrc-group:"+e.semantics+" "+e.sources.join(" "))});var a=d.sources||[];a.forEach(function(e){for(var n=0;n<e.parameters.length;n++){var o=e.parameters[n];f.push("a=ssrc:"+(e.ssrc||d.ssrc)+" "+o.key+(o.value?":"+o.value:""))}});var r=i.candidates||[];return r.forEach(function(e){f.push(n.toCandidateSDP(e))}),f.join("\r\n")},n.toCandidateSDP=function(e){var f=[];f.push(e.foundation),f.push(e.component),f.push(e.protocol.toUpperCase()),f.push(e.priority),f.push(e.ip),f.push(e.port);var n=e.type;return f.push("typ"),f.push(n),("srflx"===n||"prflx"===n||"relay"===n)&&e.relAddr&&e.relPort&&(f.push("raddr"),f.push(e.relAddr),f.push("rport"),f.push(e.relPort)),e.tcpType&&"TCP"==e.protocol.toUpperCase()&&(f.push("tcptype"),f.push(e.tcpType)),f.push("generation"),f.push(e.generation||"0"),"a=candidate:"+f.join(" ")}},{}],325:[function(e,f){function n(e){return{type:e.type,sdp:e.sdp}}function o(e){var f={label:e.id};return e.getAudioTracks().length&&(f.audio=e.getAudioTracks().map(function(e){return e.id})),e.getVideoTracks().length&&(f.video=e.getVideoTracks().map(function(e){return e.id})),f}function d(e,f){var n=this;l.call(this),this.peerconnection=new t.PeerConnection(e,f),this.trace=function(e,f){n.emit("PeerConnectionTrace",{time:new Date,type:e,value:f||""})},this.onicecandidate=null,this.peerconnection.onicecandidate=function(e){n.trace("onicecandidate",e.candidate),null!==n.onicecandidate&&n.onicecandidate(e)},this.onaddstream=null,this.peerconnection.onaddstream=function(e){n.trace("onaddstream",o(e.stream)),null!==n.onaddstream&&n.onaddstream(e)},this.onremovestream=null,this.peerconnection.onremovestream=function(e){n.trace("onremovestream",o(e.stream)),null!==n.onremovestream&&n.onremovestream(e)},this.onsignalingstatechange=null,this.peerconnection.onsignalingstatechange=function(e){n.trace("onsignalingstatechange",n.signalingState),null!==n.onsignalingstatechange&&n.onsignalingstatechange(e)},this.oniceconnectionstatechange=null,this.peerconnection.oniceconnectionstatechange=function(e){n.trace("oniceconnectionstatechange",n.iceConnectionState),null!==n.oniceconnectionstatechange&&n.oniceconnectionstatechange(e)},this.onnegotiationneeded=null,this.peerconnection.onnegotiationneeded=function(e){n.trace("onnegotiationneeded"),null!==n.onnegotiationneeded&&n.onnegotiationneeded(e)},n.ondatachannel=null,this.peerconnection.ondatachannel=function(e){n.trace("ondatachannel",e),null!==n.ondatachannel&&n.ondatachannel(e)},this.getLocalStreams=this.peerconnection.getLocalStreams.bind(this.peerconnection),this.getRemoteStreams=this.peerconnection.getRemoteStreams.bind(this.peerconnection)}var i=e("util"),t=e("webrtcsupport"),l=e("wildemitter");i.inherits(d,l),Object.defineProperty(d.prototype,"signalingState",{get:function(){return this.peerconnection.signalingState}}),Object.defineProperty(d.prototype,"iceConnectionState",{get:function(){return this.peerconnection.iceConnectionState}}),Object.defineProperty(d.prototype,"localDescription",{get:function(){return this.peerconnection.localDescription}}),Object.defineProperty(d.prototype,"remoteDescription",{get:function(){return this.peerconnection.remoteDescription}}),d.prototype.addStream=function(e){this.trace("addStream",o(e)),this.peerconnection.addStream(e)},d.prototype.removeStream=function(e){this.trace("removeStream",o(e)),this.peerconnection.removeStream(e)},d.prototype.createDataChannel=function(e,f){return this.trace("createDataChannel",e,f),this.peerconnection.createDataChannel(e,f)},d.prototype.setLocalDescription=function(e,f,o){var d=this;this.trace("setLocalDescription",n(e)),this.peerconnection.setLocalDescription(e,function(){d.trace("setLocalDescriptionOnSuccess"),f()},function(e){d.trace("setLocalDescriptionOnFailure",e),o(e)})},d.prototype.setRemoteDescription=function(e,f,o){var d=this;this.trace("setRemoteDescription",n(e)),this.peerconnection.setRemoteDescription(e,function(){d.trace("setRemoteDescriptionOnSuccess"),f()},function(e){d.trace("setRemoteDescriptionOnFailure",e),o(e)})},d.prototype.close=function(){this.trace("stop"),null!==this.statsinterval&&(window.clearInterval(this.statsinterval),this.statsinterval=null),"closed"!=this.peerconnection.signalingState&&this.peerconnection.close()},d.prototype.createOffer=function(e,f,o){var d=this;this.trace("createOffer",o),this.peerconnection.createOffer(function(f){d.trace("createOfferOnSuccess",n(f)),e(f)},function(e){d.trace("createOfferOnFailure",e),f(e)},o)},d.prototype.createAnswer=function(e,f,o){var d=this;this.trace("createAnswer",o),this.peerconnection.createAnswer(function(f){d.trace("createAnswerOnSuccess",n(f)),e(f)},function(e){d.trace("createAnswerOnFailure",e),f(e)},o)},d.prototype.addIceCandidate=function(e,f,n){var o=this;this.trace("addIceCandidate",e),this.peerconnection.addIceCandidate(e,function(){f&&f()},function(e){o.trace("addIceCandidateOnFailure",e),n&&n(e)})},d.prototype.getStats=function(e,f){navigator.mozGetUserMedia?this.peerconnection.getStats(null,e,f):this.peerconnection.getStats(e)},f.exports=d},{util:186,webrtcsupport:327,wildemitter:354}],326:[function(e,f){function n(e,f){var n,o=this;l.call(this),e=e||{},e.iceServers=e.iceServers||[],this.enableChromeNativeSimulcast=!1,f&&f.optional&&"webkit"===i.prefix&&null===navigator.appVersion.match(/Chromium\//)&&f.optional.forEach(function(e){e.enableChromeNativeSimulcast&&(o.enableChromeNativeSimulcast=!0)}),this.enableMultiStreamHacks=!1,f&&f.optional&&f.optional.forEach(function(e){e.enableMultiStreamHacks&&(o.enableMultiStreamHacks=!0)}),this.pc=new u(e,f),this.getLocalStreams=this.pc.getLocalStreams.bind(this.pc),this.getRemoteStreams=this.pc.getRemoteStreams.bind(this.pc),this.addStream=this.pc.addStream.bind(this.pc),this.removeStream=this.pc.removeStream.bind(this.pc),this.pc.on("*",function(){o.emit.apply(o,arguments)}),this.pc.onremovestream=this.emit.bind(this,"removeStream"),this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded"),this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange"),this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange"),this.pc.onaddstream=this._onAddStream.bind(this),this.pc.onicecandidate=this._onIce.bind(this),this.pc.ondatachannel=this._onDataChannel.bind(this),this.localDescription={contents:[]},this.remoteDescription={contents:[]},this.localStream=null,this.remoteStreams=[],this.config={debug:!1,ice:{},sid:"",isInitiator:!0,sdpSessionID:Date.now(),useJingle:!1};for(n in e)this.config[n]=e[n];this.config.debug&&this.on("*",function(){var f=e.logger||console;f.log("PeerConnection event:",arguments)}),this.hadLocalStunCandidate=!1,this.hadRemoteStunCandidate=!1,this.hadLocalRelayCandidate=!1,this.hadRemoteRelayCandidate=!1,this.hadLocalIPv6Candidate=!1,this.hadRemoteIPv6Candidate=!1,this._remoteDataChannels=[],this._localDataChannels=[]}var o=e("underscore"),d=e("util"),i=e("webrtcsupport"),t=e("sdp-jingle-json"),l=e("wildemitter"),u=e("traceablepeerconnection");d.inherits(n,l),Object.defineProperty(n.prototype,"signalingState",{get:function(){return this.pc.signalingState}}),Object.defineProperty(n.prototype,"iceConnectionState",{get:function(){return this.pc.iceConnectionState}}),n.prototype.addStream=function(e){this.localStream=e,this.pc.addStream(e)},n.prototype._checkLocalCandidate=function(e){var f=t.toCandidateJSON(e);"srflx"==f.type?this.hadLocalStunCandidate=!0:"relay"==f.type&&(this.hadLocalRelayCandidate=!0),-1!=f.ip.indexOf(":")&&(this.hadLocalIPv6Candidate=!0)},n.prototype._checkRemoteCandidate=function(e){var f=t.toCandidateJSON(e);"srflx"==f.type?this.hadRemoteStunCandidate=!0:"relay"==f.type&&(this.hadRemoteRelayCandidate=!0),-1!=f.ip.indexOf(":")&&(this.hadRemoteIPv6Candidate=!0)},n.prototype.processIce=function(e,f){f=f||function(){};var n=this;if(e.contents){var d=o.pluck(this.remoteDescription.contents,"name"),l=e.contents;l.forEach(function(e){var f=e.transport||{},o=f.candidates||[],l=d.indexOf(e.name),u=e.name;o.forEach(function(e){var f=t.toCandidateSDP(e)+"\r\n";n.pc.addIceCandidate(new i.IceCandidate({candidate:f,sdpMLineIndex:l,sdpMid:u})),n._checkRemoteCandidate(f)})})}else 0!==e.candidate.candidate.indexOf("a=")&&(e.candidate.candidate="a="+e.candidate.candidate),n.pc.addIceCandidate(new i.IceCandidate(e.candidate)),n._checkRemoteCandidate(e.candidate.candidate);f()},n.prototype.offer=function(e,f){var n=this,d=2===arguments.length,i=d?e:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};f=d?f:e,f=f||function(){},this.pc.createOffer(function(e){n.pc.setLocalDescription(e,function(){var d,i={type:"offer",sdp:e.sdp};n.config.useJingle&&(d=t.toSessionJSON(e.sdp,n.config.isInitiator?"initiator":"responder"),d.sid=n.config.sid,n.localDescription=d,o.each(d.contents,function(e){var f=e.transport||{};f.ufrag&&(n.config.ice[e.name]={ufrag:f.ufrag,pwd:f.pwd})}),i.jingle=d),i.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkLocalCandidate(e)}),n.emit("offer",i),f(null,i)},function(e){n.emit("error",e),f(e)})},function(e){n.emit("error",e),f(e)},i)},n.prototype.handleOffer=function(e,f){f=f||function(){};var n=this;e.type="offer",e.jingle&&(this.enableChromeNativeSimulcast&&e.jingle.contents.forEach(function(e){"video"===e.name&&(e.description.googConferenceFlag=!0)}),e.sdp=t.toSessionSDP(e.jingle,n.config.sdpSessionID),n.remoteDescription=e.jingle),e.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkRemoteCandidate(e)}),n.pc.setRemoteDescription(new i.SessionDescription(e),function(){f()},f)},n.prototype.answerAudioOnly=function(e){var f={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}};this._answer(f,e)},n.prototype.answerBroadcastOnly=function(e){var f={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};this._answer(f,e)},n.prototype.answer=function(e,f){var n=2===arguments.length,o=n?f:e,d=n?e:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};this._answer(d,o)},n.prototype.handleAnswer=function(e,f){f=f||function(){};var n=this;e.jingle&&(e.sdp=t.toSessionSDP(e.jingle,n.config.sdpSessionID),n.remoteDescription=e.jingle),e.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkRemoteCandidate(e)}),n.pc.setRemoteDescription(new i.SessionDescription(e),function(){f(null)},f)},n.prototype.close=function(){this.pc.close(),this._localDataChannels=[],this._remoteDataChannels=[],this.emit("close")},n.prototype._answer=function(e,f){f=f||function(){};var n=this;if(!this.pc.remoteDescription)throw new Error("remoteDescription not set");n.pc.createAnswer(function(e){var o=[];if(n.enableChromeNativeSimulcast&&(e.jingle=t.toSessionJSON(e.sdp),e.jingle.contents.length>=2&&"video"===e.jingle.contents[1].name)){var d=e.jingle.contents[1].description.sourceGroups||[],i=!1;
if(d.forEach(function(e){"SIM"==e.semantics&&(i=!0)}),!i&&e.jingle.contents[1].description.sources.length){var l=JSON.parse(JSON.stringify(e.jingle.contents[1].description.sources[0]));l.ssrc=""+Math.floor(4294967295*Math.random()),e.jingle.contents[1].description.sources.push(l),o.push(e.jingle.contents[1].description.sources[0].ssrc),o.push(l.ssrc),d.push({semantics:"SIM",sources:o});var u=JSON.parse(JSON.stringify(l));u.ssrc=""+Math.floor(4294967295*Math.random()),e.jingle.contents[1].description.sources.push(u),d.push({semantics:"FID",sources:[l.ssrc,u.ssrc]}),e.jingle.contents[1].description.sourceGroups=d,e.sdp=t.toSessionSDP(e.jingle,n.config.sdpSessionID)}}n.pc.setLocalDescription(e,function(){var o={type:"answer",sdp:e.sdp};if(n.config.useJingle){var d=t.toSessionJSON(e.sdp);d.sid=n.config.sid,n.localDescription=d,o.jingle=d}if(n.enableChromeNativeSimulcast){o.jingle||(o.jingle=t.toSessionJSON(e.sdp));{o.jingle.contents[1].description.sourceGroups||[]}o.jingle.contents[1].description.sources.forEach(function(e,f){e.parameters=e.parameters.map(function(e){return"msid"===e.key&&(e.value+="-"+Math.floor(f/2)),e})}),o.sdp=t.toSessionSDP(o.jingle)}o.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkLocalCandidate(e)}),n.emit("answer",o),f(null,o)},function(e){n.emit("error",e),f(e)})},function(e){n.emit("error",e),f(e)},e)},n.prototype._onIce=function(e){var f=this;if(e.candidate){var n=e.candidate,d={candidate:e.candidate},i=t.toCandidateJSON(n.candidate);if(f.config.useJingle){if(n.sdpMid||(n.sdpMid=f.localDescription.contents[n.sdpMLineIndex].name),!f.config.ice[n.sdpMid]){var l=t.toSessionJSON(f.pc.localDescription.sdp,f.config.isInitiator?"initiator":"responder");o.each(l.contents,function(e){var n=e.transport||{};n.ufrag&&(f.config.ice[e.name]={ufrag:n.ufrag,pwd:n.pwd})})}d.jingle={contents:[{name:n.sdpMid,creator:f.config.isInitiator?"initiator":"responder",transport:{transType:"iceUdp",ufrag:f.config.ice[n.sdpMid].ufrag,pwd:f.config.ice[n.sdpMid].pwd,candidates:[i]}}]}}this._checkLocalCandidate(n.candidate),this.emit("ice",d)}else this.emit("endOfCandidates")},n.prototype._onDataChannel=function(e){var f=e.channel;this._remoteDataChannels.push(f),this.emit("addChannel",f)},n.prototype._onAddStream=function(e){this.remoteStreams.push(e.stream),this.emit("addStream",e)},n.prototype.createDataChannel=function(e,f){var n=this.pc.createDataChannel(e,f);return this._localDataChannels.push(n),n},n.prototype.getStats=function(e){"moz"===i.prefix?this.pc.getStats(function(f){var n=[];for(var o in f)"object"==typeof f[o]&&n.push(f[o]);e(null,n)},e):this.pc.getStats(function(f){var n=[];f.result().forEach(function(e){var f={};e.names().forEach(function(n){f[n]=e.stat(n)}),f.id=e.id,f.type=e.type,f.timestamp=e.timestamp,n.push(f)}),e(null,n)})},f.exports=n},{"sdp-jingle-json":321,traceablepeerconnection:325,underscore:353,util:186,webrtcsupport:327,wildemitter:354}],327:[function(e,f){var n,o=!1,d=!1,i=window.navigator.userAgent.toLowerCase();-1!==i.indexOf("firefox")?(n="moz",d=!0):-1!==i.indexOf("chrome")&&(n="webkit",o=!0);var t=window.mozRTCPeerConnection||window.webkitRTCPeerConnection,l=window.mozRTCIceCandidate||window.RTCIceCandidate,u=window.mozRTCSessionDescription||window.RTCSessionDescription,p=window.webkitMediaStream||window.MediaStream,s="https:"===window.location.protocol&&(window.navigator.userAgent.match("Chrome")&&parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10)>=26||window.navigator.userAgent.match("Firefox")&&parseInt(window.navigator.userAgent.match(/Firefox\/(.*)/)[1],10)>=33),y=window.webkitAudioContext||window.AudioContext;f.exports={support:!!t,dataChannel:o||d||t&&t.prototype&&t.prototype.createDataChannel,prefix:n,webAudio:!(!y||!y.prototype.createMediaStreamSource),mediaStream:!(!p||!p.prototype.removeTrack),screenSharing:!!s,AudioContext:y,PeerConnection:t,SessionDescription:u,IceCandidate:l,MediaStream:p}},{}],328:[function(e,f,n){"use strict";var o=e("jxt"),d=e("xmpp-jid").JID;n.jidAttribute=function(e,f){return{get:function(){var n=new d(o.getAttribute(this.xml,e));return f&&(n.prepped=!0),n},set:function(f){o.setAttribute(this.xml,e,(f||"").toString())}}},n.jidSub=function(e,f,n){return{get:function(){var i=new d(o.getSubText(this.xml,e,f));return n&&(i.prepped=!0),i},set:function(n){o.setSubText(this.xml,e,f,(n||"").toString())}}},n.tzoSub=o.field(function(e,f,n,d){var i,t,l,u=-1,p=o.getSubText(e,f,n);return p?("-"===p.charAt(0)&&(u=1,p=p.slice(1)),i=p.split(":"),t=parseInt(i[0],10),l=parseInt(i[1],10),(60*t+l)*u):d},function(e,f,n,d){var i,t,l="-";"number"==typeof d?(0>d&&(d=-d,l="+"),i=d/60,t=d%60,l+=(10>i?"0":"")+i+":"+(10>t?"0":"")+t):l=d,o.setSubText(e,f,n,l)})},{jxt:329,"xmpp-jid":355}],329:[function(e,f){"use strict";function n(){this._LOOKUP={},this._LOOKUP_EXT={},this._TAGS={},this._CB_DEFINITION={},this._CB_TAG={},this._ID=i.v4(),this.utils=d({},t,l)}var o=e("ltx"),d=e("extend-object"),i=e("node-uuid"),t=e("./lib/types"),l=e("./lib/helpers"),u=e("./lib/stanza");n.prototype.use=function(e){return e["__JXT_LOADED_"+this._ID]||e(this),e["__JXT_LOADED_"+this._ID]=!0,this},n.prototype.getDefinition=function(e,f,n){var o=this._LOOKUP[f+"|"+e];if(n&&!o)throw new Error("Could not find definition for <"+e+' xmlns="'+f+'" />');return o},n.prototype.getExtensions=function(e,f){return this._LOOKUP_EXT[f+"|"+e]||{}},n.prototype.withDefinition=function(e,f,n){var o=f+"|"+e;this._CB_DEFINITION[o]||(this._CB_DEFINITION[o]=[]),this._CB_DEFINITION[o].push(n),this._LOOKUP[o]&&n(this._LOOKUP[o])},n.prototype.withTag=function(e,f){this._CB_TAG[e]||(this._CB_TAG[e]=[]),this._CB_TAG[e].push(f),this.tagged(e).forEach(function(e){f(e)})},n.prototype.tagged=function(e){return this._TAGS[e]||[]},n.prototype.build=function(e){var f=this._LOOKUP[e.namespaceURI+"|"+e.localName];return f?new f(null,e):void 0},n.prototype.parse=function(e){var f=o.parse(e);if(1===f.nodeType){var n=this.getDefinition(f.localName,f.namespaceURI);return n?new n(null,f):void 0}},n.prototype.extend=function(e,f,n){var o=e.prototype._NS+"|"+e.prototype._EL,d=f.prototype._name,i=f.prototype._NS+"|"+f.prototype._EL;this._LOOKUP[i]=f,this._LOOKUP_EXT[i]||(this._LOOKUP_EXT[i]={}),this._LOOKUP_EXT[o]||(this._LOOKUP_EXT[o]={}),this._LOOKUP_EXT[o][d]=f,this.add(e,d,t.extension(f)),n&&this.add(e,n,t.multiExtension(f))},n.prototype.add=function(e,f,n){n.enumerable=!0,Object.defineProperty(e.prototype,f,n)},n.prototype.define=function(e){var f=this,n=u(this,e),o=n.prototype._NS,d=n.prototype._EL,i=n.prototype._TAGS,t=o+"|"+d;this._LOOKUP[t]=n,i.forEach(function(e){f._TAGS[e]||(f._TAGS[e]=[]),f._TAGS[e].push(n)});var l=Object.keys(e.fields||{});return l.forEach(function(o){f.add(n,o,e.fields[o])}),this._CB_DEFINITION[t]&&this._CB_DEFINITION[t].forEach(function(e){e(n)}),i.forEach(function(e){f._CB_TAG[e]&&f._CB_TAG[e].forEach(function(e){e(n)})}),n},n.createRegistry=function(){return new n},d(n,l),d(n,t);var p=new n;n.define=p.define.bind(p),n.extend=p.extend.bind(p),n.add=p.add.bind(p),n.parse=p.parse.bind(p),n.build=p.build.bind(p),n.getExtensions=p.getExtensions.bind(p),n.getDefinition=p.getDefinition.bind(p),n.withDefinition=p.withDefinition.bind(p),n.withTag=p.withTag.bind(p),n.tagged=p.tagged.bind(p),n.getGlobalJXT=function(){return p},f.exports=n},{"./lib/helpers":330,"./lib/stanza":331,"./lib/types":332,"extend-object":333,ltx:336,"node-uuid":340}],330:[function(e,f,n){"use strict";var o=e("ltx"),d=n.XML_NS="http://www.w3.org/XML/1998/namespace";n.createElement=function(e,f,d){var i=new o.Element(f);return d&&d===e||n.setAttribute(i,"xmlns",e),i};var i=n.find=function(e,f,n){for(var o=[],d=e.getElementsByTagName(n),i=0,t=d.length;t>i;i++){var l=d[i];l.namespaceURI===f&&l.parentNode===e&&o.push(l)}return o};n.findOrCreate=function(e,f,o){var d=n.find(e,f,o);if(d.length)return d[0];var i=n.createElement(f,o,e.namespaceURI);return e.appendChild(i),i},n.getAttribute=function(e,f,n){return e.getAttribute(f)||n||""},n.getAttributeNS=function(e,f,n,o){return e.getAttributeNS(f,n)||o||""},n.setAttribute=function(e,f,n,o){n||o?e.setAttribute(f,n):e.removeAttribute(f)},n.setAttributeNS=function(e,f,n,o,d){o||d?e.setAttributeNS(f,n,o):e.removeAttributeNS(f,n)},n.getBoolAttribute=function(e,f,n){var o=e.getAttribute(f)||n||"";return"true"===o||"1"===o},n.setBoolAttribute=function(e,f,n){n?e.setAttribute(f,"1"):e.removeAttribute(f)},n.getSubAttribute=function(e,f,n,o,d){var t=i(e,f,n);if(!t)return"";for(var l=0;l<t.length;l++)return t[l].getAttribute(o)||d||"";return""},n.setSubAttribute=function(e,f,o,d,t){var l=i(e,f,o);if(l.length)for(var u=0;u<l.length;u++){if(t)return void l[u].setAttribute(d,t);l[u].removeAttribute(d)}else t&&(o=n.createElement(f,o,e.namespaceURI),o.setAttribute(d,t),e.appendChild(o))},n.getBoolSubAttribute=function(e,f,n,o,d){var i=e.getSubAttribute(f,n,o)||d||"";return"true"===i||"1"===i},n.setBoolSubAttribute=function(e,f,o,d,i){i=i?"1":"",n.setSubAttribute(e,f,o,d,i)},n.getText=function(e){return e.textContent},n.setText=function(e,f){e.textContent=f},n.getSubText=n.getTextSub=function(e,f,n,o){var d=i(e,f,n);return o=o||"",d.length?d[0].textContent||o:o},n.setSubText=n.setTextSub=function(e,f,o,d){var t=i(e,f,o);if(t.length)for(var l=0;l<t.length;l++)e.removeChild(t[l]);if(d){var u=n.createElement(f,o,e.namespaceURI);d!==!0&&(u.textContent=d),e.appendChild(u)}},n.getMultiSubText=function(e,f,n,o){var d=i(e,f,n),t=[];o=o||function(e){return e.textContent||""};for(var l=0;l<d.length;l++)t.push(o(d[l]));return t},n.setMultiSubText=function(e,f,o,d,t){var l=i(e,f,o),u=[];t=t||function(d){if(d){var i=n.createElement(f,o,e.namespaceURI);i.textContent=d,e.appendChild(i)}},u="string"==typeof d?(d||"").split("\n"):d;var p,s;for(p=0,s=l.length;s>p;p++)e.removeChild(l[p]);for(p=0,s=u.length;s>p;p++)t(u[p])},n.getMultiSubAttribute=function(e,f,o,d){return n.getMultiSubText(e,f,o,function(e){return n.getAttribute(e,d)})},n.setMultiSubAttribute=function(e,f,o,d,i){n.setMultiSubText(e,f,o,i,function(i){var t=n.createElement(f,o,e.namespaceURI);n.setAttribute(t,d,i),e.appendChild(t)})},n.getSubLangText=function(e,f,n,o){var t=i(e,f,n);if(!t.length)return{};for(var l,u,p={},s=[],y=0;y<t.length;y++)u=t[y],l=u.getAttributeNS(d,"lang")||o,s.push(l),p[l]=u.textContent||"";return p},n.setSubLangText=function(e,f,o,t,l){var u,p,s=i(e,f,o);if(s.length)for(var y=0;y<s.length;y++)e.removeChild(s[y]);if("string"==typeof t)u=n.createElement(f,o,e.namespaceURI),u.textContent=t,e.appendChild(u);else if("object"==typeof t)for(p in t)t.hasOwnProperty(p)&&(u=n.createElement(f,o,e.namespaceURI),p!==l&&u.setAttributeNS(d,"lang",p),u.textContent=t[p],e.appendChild(u))},n.getBoolSub=function(e,f,n){var o=i(e,f,n);return!!o.length},n.setBoolSub=function(e,f,o,d){var t=i(e,f,o);if(t.length)for(var l=0;l<t.length;l++){if(d)return;e.removeChild(t[l])}else if(d){var u=n.createElement(f,o,e.namespaceURI);e.appendChild(u)}}},{ltx:336}],331:[function(e,f){"use strict";var n=e("./helpers"),o=e("extend-object"),d={constructor:!0,parent:!0,prototype:!0,toJSON:!0,toString:!0,xml:!0};f.exports=function(e,f){function i(d,i,t){var l=this,u=(i||{}).parentNode||(t||{}).xml,p=(u||{}).namespaceURI;l.xml=i||n.createElement(l._NS,l._EL,p),Object.keys(l._PREFIXES).forEach(function(e){var f=l._PREFIXES[e];l.xml.setAttribute("xmlns:"+e,f)}),l._extensions={};for(var s=0,y=l.xml.childNodes.length;y>s;s++){var c=l.xml.childNodes[s],a=e.getDefinition(c.localName,c.namespaceURI);if(void 0!==a){var r=a.prototype._name;l._extensions[r]=new a(null,c),l._extensions[r].parent=l}}return o(l,d),f.init&&f.init.apply(l,[d]),l}return i.prototype._name=f.name,i.prototype._eventname=f.eventName,i.prototype._NS=f.namespace,i.prototype._EL=f.element||f.name,i.prototype._PREFIXES=f.prefixes||{},i.prototype._TAGS=f.tags||[],i.prototype.toString=function(){return this.xml.toString()},i.prototype.toJSON=function(){var f,n={};for(f in this._extensions)this._extensions[f].toJSON&&"_"!==f[0]&&(n[f]=this._extensions[f].toJSON());for(f in this){var o=!d[f]&&"_"!==f[0],i=e.getExtensions(this._EL,this._NS)[f];if(o&&!i){var t=this[f];if("function"==typeof t)continue;var l=Object.prototype.toString.call(t);if(l.indexOf("Object")>=0)Object.keys(t).length>0&&(n[f]=t);else if(l.indexOf("Array")>=0){if(t.length>0){var u=[];for(var p in t){var s=t[p];u.push(void 0!==s.toJSON?s.toJSON():s)}n[f]=u}}else void 0!==t&&t!==!1&&""!==t&&(n[f]=t)}}return n},i}},{"./helpers":330,"extend-object":333}],332:[function(e,f,n){"use strict";var o=e("atob"),d=e("btoa"),i=e("./helpers"),t=e("extend-object"),l=i.find,u=i.createElement,p=n.field=function(e,f){return function(){var n=Array.prototype.slice.call(arguments);return{get:function(){return e.apply(null,[this.xml].concat(n))},set:function(e){f.apply(null,[this.xml].concat(n).concat([e]))}}}};n.boolAttribute=p(i.getBoolAttribute,i.setBoolAttribute),n.subAttribute=p(i.getSubAttribute,i.setSubAttribute),n.boolSubAttribute=p(i.getSubBoolAttribute,i.setSubBoolAttribute),n.text=p(i.getText,i.setText),n.subText=p(i.getSubText,i.setSubText),n.multiSubText=p(i.getMultiSubText,i.setMultiSubText),n.multiSubAttribute=p(i.getMultiSubAttribute,i.setMultiSubAttribute),n.subLangText=p(i.getSubLangText,i.setSubLangText),n.boolSub=p(i.getBoolSub,i.setBoolSub),n.langAttribute=p(function(e){return e.getAttributeNS(i.XML_NS,"lang")||""},function(e,f){e.setAttributeNS(i.XML_NS,"lang",f)}),n.b64Text=p(function(e){return e.textContent&&"="!==e.textContent?o(e.textContent):""},function(e,f){e.textContent="string"==typeof f?d(f)||"=":""}),n.dateAttribute=function(e,f){return{get:function(){var n=i.getAttribute(this.xml,e);return n?new Date(n):f?new Date(Date.now()):void 0},set:function(f){f&&("string"!=typeof f&&(f=f.toISOString()),i.setAttribute(this.xml,e,f))}}},n.dateSub=function(e,f,n){return{get:function(){var o=i.getSubText(this.xml,e,f);return o?new Date(o):n?new Date(Date.now()):void 0},set:function(n){n&&("string"!=typeof n&&(n=n.toISOString()),i.setSubText(this.xml,e,f,n))}}},n.dateSubAttribute=function(e,f,n,o){return{get:function(){var d=i.getSubAttribute(this.xml,e,f,n);return d?new Date(d):o?new Date(Date.now()):void 0},set:function(o){o&&("string"!=typeof o&&(o=o.toISOString()),i.setSubAttribute(this.xml,e,f,n,o))}}},n.numberAttribute=function(e,f,n){return{get:function(){var o=f?parseFloat:parseInt,d=i.getAttribute(this.xml,e,"");if(!d)return n;var t=o(d,10);return isNaN(t)?n:t},set:function(f){i.setAttribute(this.xml,e,f.toString())}}},n.numberSub=function(e,f,n,o){return{get:function(){var d=n?parseFloat:parseInt,t=i.getSubText(this.xml,e,f,"");if(!t)return o;var l=d(t,10);return isNaN(l)?o:l},set:function(n){i.setSubText(this.xml,e,f,n.toString())}}},n.attribute=function(e,f){return{get:function(){return i.getAttribute(this.xml,e,f)},set:function(f){i.setAttribute(this.xml,e,f)}}},n.attributeNS=function(e,f,n){return{get:function(){return i.getAttributeNS(this.xml,e,f,n)},set:function(n){i.setAttributeNS(this.xml,e,f,n)}}},n.extension=function(e){return{get:function(){var f=this,n=e.prototype._name;if(!this._extensions[n]){var o=l(this.xml,e.prototype._NS,e.prototype._EL);o.length?this._extensions[n]=new e(null,o[0],f):(this._extensions[n]=new e({},null,f),this.xml.appendChild(this._extensions[n].xml)),this._extensions[n].parent=this}return this._extensions[n]},set:function(f){if(f){var n=this[e.prototype._name];f===!0&&(f={}),t(n,f)}}}},n.multiExtension=function(e){return{get:function(){for(var f=this,n=l(this.xml,e.prototype._NS,e.prototype._EL),o=[],d=0,i=n.length;i>d;d++)o.push(new e({},n[d],f));return o},set:function(f){f=f||[];var n,o,d=this,i=l(this.xml,e.prototype._NS,e.prototype._EL);for(n=0,o=i.length;o>n;n++)d.xml.removeChild(i[n]);for(n=0,o=f.length;o>n;n++){var t=new e(f[n],null,d);d.xml.appendChild(t.xml)}}}},n.enumSub=function(e,f){return{get:function(){var n=this,o=[];return f.forEach(function(f){var d=l(n.xml,e,f);d.length&&o.push(d[0].nodeName)}),o[0]||""},set:function(n){var o=this;if(f.forEach(function(f){var n=l(o.xml,e,f);n.length&&o.xml.removeChild(n[0])}),n){var d=u(e,n);this.xml.appendChild(d)}}}},n.subExtension=function(e,f,n,o){return{get:function(){if(!this._extensions[e]){var d=l(this.xml,f,n);d.length?d=d[0]:(d=u(f,n,this._NS),this.xml.appendChild(d));var i=l(d,o.prototype._NS,o.prototype._EL);i.length?this._extensions[e]=new o(null,i[0],{xml:d}):(this._extensions[e]=new o({},null,{xml:d}),d.appendChild(this._extensions[e].xml)),this._extensions[e].parent=this}return this._extensions[e]},set:function(o){var d=l(this.xml,f,n);if(d.length&&!o&&this.xml.removeChild(d[0]),o){var i=this[e];o===!0&&(o={}),t(i,o)}}}},n.subMultiExtension=function(e,f,n){return{get:function(){var o=this,d=[],i=l(this.xml,e,f);if(!i.length)return d;i=i[0];var t=l(i,n.prototype._NS,n.prototype._EL);return t.forEach(function(e){d.push(new n({},e,o))}),d},set:function(o){var d=this,i=l(this.xml,e,f);i.length&&d.xml.removeChild(i[0]),o.length&&(i=u(e,f,this._NS),o.forEach(function(e){var f=new n(e,null,d);i.appendChild(f.xml)}),d.xml.appendChild(i))}}}},{"./helpers":330,atob:111,btoa:189,"extend-object":333}],333:[function(e,f){f.exports=e(318)},{}],334:[function(e,f){"use strict";function n(e,f){d.call(this,e,f),this.nodeType=1,this.nodeName=this.localName}var o=e("util"),d=e("./element").Element;o.inherits(n,d),n.prototype._getElement=function(e,f){var o=new n(e,f);return o},Object.defineProperty(n.prototype,"localName",{get:function(){return this.getName()}}),Object.defineProperty(n.prototype,"namespaceURI",{get:function(){return this.getNS()}}),Object.defineProperty(n.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(n.prototype,"childNodes",{get:function(){return this.children}}),Object.defineProperty(n.prototype,"textContent",{get:function(){return this.getText()},set:function(e){this.children.push(e)}}),n.prototype.getElementsByTagName=function(e){return this.getChildren(e)},n.prototype.getAttribute=function(e){return this.getAttr(e)},n.prototype.setAttribute=function(e,f){this.attr(e,f)},n.prototype.getAttributeNS=function(e,f){return"http://www.w3.org/XML/1998/namespace"===e?this.getAttr(["xml",f].join(":")):this.getAttr(f,e)},n.prototype.setAttributeNS=function(e,f,n){var o;if("http://www.w3.org/XML/1998/namespace"===e)o="xml";else{var d=this.getXmlns();o=d[e]||""}o&&this.attr([o,f].join(":"),n)},n.prototype.removeAttribute=function(e){this.attr(e,null)},n.prototype.removeAttributeNS=function(e,f){var n;if("http://www.w3.org/XML/1998/namespace"===e)n="xml";else{var o=this.getXmlns();n=o[e]||""}n&&this.attr([n,f].join(":"),null)},n.prototype.appendChild=function(e){this.cnode(e)},n.prototype.removeChild=function(e){this.remove(e)},f.exports=n},{"./element":335,util:186}],335:[function(e,f,n){"use strict";function o(e,f){this.name=e,this.parent=null,this.attrs=f||{},this.children=[]}function d(e){return e.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/"/g,"&apos;")}function i(e){return e.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}o.prototype.is=function(e,f){return this.getName()===e&&(!f||this.getNS()===f)},o.prototype.getName=function(){return this.name.indexOf(":")>=0?this.name.substr(this.name.indexOf(":")+1):this.name},o.prototype.getNS=function(){if(this.name.indexOf(":")>=0){var e=this.name.substr(0,this.name.indexOf(":"));return this.findNS(e)}return this.findNS()},o.prototype.findNS=function(e){if(e){var f="xmlns:"+e;if(this.attrs[f])return this.attrs[f];if(this.parent)return this.parent.findNS(e)}else{if(this.attrs.xmlns)return this.attrs.xmlns;if(this.parent)return this.parent.findNS()}},o.prototype.getXmlns=function(){var e={};this.parent&&(e=this.parent.getXmlns());for(var f in this.attrs){var n=f.match("xmlns:?(.*)");this.attrs.hasOwnProperty(f)&&n&&(e[this.attrs[f]]=n[1])}return e},o.prototype.getAttr=function(e,f){if(!f)return this.attrs[e];var n=this.getXmlns();return n[f]?this.attrs[[n[f],e].join(":")]:null},o.prototype.getChild=function(e,f){return this.getChildren(e,f)[0]},o.prototype.getChildren=function(e,f){for(var n=[],o=0;o<this.children.length;o++){var d=this.children[o];!d.getName||d.getName()!==e||f&&d.getNS()!==f||n.push(d)}return n},o.prototype.getChildByAttr=function(e,f,n,o){return this.getChildrenByAttr(e,f,n,o)[0]},o.prototype.getChildrenByAttr=function(e,f,n,o){for(var d=[],i=0;i<this.children.length;i++){var t=this.children[i];!t.attrs||t.attrs[e]!==f||n&&t.getNS()!==n||d.push(t),o&&t.getChildrenByAttr&&d.push(t.getChildrenByAttr(e,f,n,!0))}return o&&(d=[].concat.apply([],d)),d},o.prototype.getChildrenByFilter=function(e,f){for(var n=[],o=0;o<this.children.length;o++){var d=this.children[o];e(d)&&n.push(d),f&&d.getChildrenByFilter&&n.push(d.getChildrenByFilter(e,!0))}return f&&(n=[].concat.apply([],n)),n},o.prototype.getText=function(){for(var e="",f=0;f<this.children.length;f++){var n=this.children[f];("string"==typeof n||"number"==typeof n)&&(e+=n)}return e},o.prototype.getChildText=function(e,f){var n=this.getChild(e,f);return n?n.getText():null},o.prototype.getChildElements=function(){return this.getChildrenByFilter(function(e){return e instanceof o})},o.prototype.root=function(){return this.parent?this.parent.root():this},o.prototype.tree=o.prototype.root,o.prototype.up=function(){return this.parent?this.parent:this},o.prototype._getElement=function(e,f){var n=new o(e,f);return n},o.prototype.c=function(e,f){return this.cnode(this._getElement(e,f))},o.prototype.cnode=function(e){return this.children.push(e),e.parent=this,e},o.prototype.t=function(e){return this.children.push(e),this},o.prototype.remove=function(e,f){var n;return n="string"==typeof e?function(n){return!(n.is&&n.is(e,f))}:function(f){return f!==e},this.children=this.children.filter(n),this},o.prototype.clone=function(){var e=this._getElement(this.name,{});for(var f in this.attrs)this.attrs.hasOwnProperty(f)&&(e.attrs[f]=this.attrs[f]);for(var n=0;n<this.children.length;n++){var o=this.children[n];e.cnode(o.clone?o.clone():o)}return e},o.prototype.text=function(e){return e&&1===this.children.length?(this.children[0]=e,this):this.getText()},o.prototype.attr=function(e,f){return"undefined"!=typeof f||null===f?(this.attrs||(this.attrs={}),this.attrs[e]=f,this):this.attrs[e]},o.prototype.toString=function(){var e="";return this.write(function(f){e+=f}),e},o.prototype.toJSON=function(){return{name:this.name,attrs:this.attrs,children:this.children.map(function(e){return e&&e.toJSON?e.toJSON():e})}},o.prototype._addChildren=function(e){e(">");for(var f=0;f<this.children.length;f++){var n=this.children[f];(n||0===n)&&(n.write?n.write(e):"string"==typeof n?e(i(n)):n.toString&&e(i(n.toString(10))))}e("</"),e(this.name),e(">")},o.prototype.write=function(e){e("<"),e(this.name);for(var f in this.attrs){var n=this.attrs[f];(n||""===n||0===n)&&(e(" "),e(f),e('="'),"string"!=typeof n&&(n=n.toString(10)),e(d(n)),e('"'))}0===this.children.length?e("/>"):this._addChildren(e)},n.Element=o,n.escapeXml=d},{}],336:[function(e,f){"use strict";var n=e("./parse");n.availableSaxParsers.push(n.bestSaxParser=e("./sax/sax_ltx")),f.exports=e("./index")},{"./index":337,"./parse":338,"./sax/sax_ltx":339}],337:[function(e,f,n){"use strict";var o=e("./parse");n.Element=e("./dom-element"),n.escapeXml=e("./element").escapeXml,n.parse=o.parse,n.Parser=o.Parser,n.availableSaxParsers=o.availableSaxParsers,n.bestSaxParser=o.bestSaxParser},{"./dom-element":334,"./element":335,"./parse":338}],338:[function(e,f,n){"use strict";var o=e("events"),d=e("util"),i=e("./dom-element");n.availableSaxParsers=[],n.bestSaxParser=null;var t=["./sax/sax_expat.js","./sax/sax_ltx.js","./sax/sax_saxjs.js"];t.forEach(function(f){var o;try{o=e(f)}catch(d){}o&&(n.availableSaxParsers.push(o),n.bestSaxParser||(n.bestSaxParser=o))}),n.Parser=function(e){o.EventEmitter.call(this);var f=this,d=e||n.bestSaxParser;if(!d)throw new Error("No SAX parser available");this.parser=new d;var t;this.parser.addListener("startElement",function(e,f){var n=new i(e,f);t=t?t.cnode(n):n}),this.parser.addListener("endElement",function(e){t&&e===t.name&&(t.parent?t=t.parent:f.tree||(f.tree=t,t=void 0))}),this.parser.addListener("text",function(e){t&&t.t(e)}),this.parser.addListener("error",function(e){f.error=e,f.emit("error",e)})},d.inherits(n.Parser,o.EventEmitter),n.Parser.prototype.write=function(e){this.parser.write(e)},n.Parser.prototype.end=function(e){this.parser.end(e),this.error||(this.tree?this.emit("tree",this.tree):this.emit("error",new Error("Incomplete document")))},n.parse=function(e,f){var o=new n.Parser(f),d=null,i=null;if(o.on("tree",function(e){d=e}),o.on("error",function(e){i=e}),o.write(e),o.end(),i)throw i;return d}},{"./dom-element":334,events:167,util:186}],339:[function(e,f){"use strict";function n(e){return e.replace(/\&(amp|#38);/g,"&").replace(/\&(lt|#60);/g,"<").replace(/\&(gt|#62);/g,">").replace(/\&(quot|#34);/g,'"').replace(/\&(apos|#39);/g,"'").replace(/\&(nbsp|#160);/g,"\n")}var o=e("util"),d=e("events"),i=0,t=1,l=2,u=3,p=4,s=5,y=6,c=7,a=f.exports=function(){d.EventEmitter.call(this);var e,f,o,a,r,w,b,m=i,g=0;this._handleTagOpening=function(e,f,n){e?this.emit("endElement",f):(this.emit("startElement",f,n),r&&this.emit("endElement",f))},this.write=function(d){function x(){if("number"==typeof g){var e=d.slice(g,P);return g=void 0,e}}"string"!=typeof d&&(d=d.toString());var P=0;for(e&&(d=e+d,P+=e.length,e=null);P<d.length;P++){var j=d.charCodeAt(P);switch(m){case i:if(60===j){var v=x();v&&this.emit("text",n(v)),m=l,g=P+1,o={}}break;case l:47===j&&g===P?(g=P+1,a=!0):33===j||63===j?(g=void 0,m=t):(32>=j||47===j||62===j)&&(f=x(),P--,m=u);break;case t:62===j&&(m=i);break;case u:62===j?(this._handleTagOpening(a,f,o),f=void 0,o=void 0,a=void 0,r=void 0,m=i,g=P+1):47===j?r=!0:j>32&&(g=P,m=p);break;case p:(32>=j||61===j)&&(b=x(),P--,m=s);break;case s:61===j&&(m=y);break;case y:(34===j||39===j)&&(w=j,m=c,g=P+1);break;case c:if(j===w){var M=n(x());o[b]=M,b=void 0,m=u}}}"number"==typeof g&&g<=d.length&&(e=d.slice(g),g=0)}};o.inherits(a,d.EventEmitter),a.prototype.end=function(e){e&&this.write(e),this.write=function(){}}},{events:167,util:186}],340:[function(e,f){(function(){function e(e,f,n){var o=f&&n||0,d=0;for(f=f||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>d&&(f[o+d++]=a[e])});16>d;)f[o+d++]=0;return f}function n(e,f){var n=f||0,o=c;return o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]}function o(e,f,o){var d=f&&o||0,i=f||[];e=e||{};var t=null!=e.clockseq?e.clockseq:m,l=null!=e.msecs?e.msecs:(new Date).getTime(),u=null!=e.nsecs?e.nsecs:x+1,p=l-g+(u-x)/1e4;if(0>p&&null==e.clockseq&&(t=t+1&16383),(0>p||l>g)&&null==e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=l,x=u,m=t,l+=122192928e5;var s=(1e4*(268435455&l)+u)%4294967296;i[d++]=s>>>24&255,i[d++]=s>>>16&255,i[d++]=s>>>8&255,i[d++]=255&s;var y=l/4294967296*1e4&268435455;i[d++]=y>>>8&255,i[d++]=255&y,i[d++]=y>>>24&15|16,i[d++]=y>>>16&255,i[d++]=t>>>8|128,i[d++]=255&t;for(var c=e.node||b,a=0;6>a;a++)i[d+a]=c[a];return f?f:n(i)}function d(e,f,o){var d=f&&o||0;"string"==typeof e&&(f="binary"==e?new y(16):null,e=null),e=e||{};var t=e.random||(e.rng||i)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,f)for(var l=0;16>l;l++)f[d+l]=t[l];return f||n(t)}var i,t=this;if("function"==typeof t.require)try{var l=t.require("crypto").randomBytes;i=l&&function(){return l(16)}}catch(u){}if(!i&&t.crypto&&crypto.getRandomValues){var p=new Uint8Array(16);i=function(){return crypto.getRandomValues(p),p}}if(!i){var s=new Array(16);i=function(){for(var e,f=0;16>f;f++)0===(3&f)&&(e=4294967296*Math.random()),s[f]=e>>>((3&f)<<3)&255;return s}}for(var y="function"==typeof t.Buffer?t.Buffer:Array,c=[],a={},r=0;256>r;r++)c[r]=(r+256).toString(16).substr(1),a[c[r]]=r;var w=i(),b=[1|w[0],w[1],w[2],w[3],w[4],w[5]],m=16383&(w[6]<<8|w[7]),g=0,x=0,P=d;if(P.v1=o,P.v4=d,P.parse=e,P.unparse=n,P.BufferClass=y,"function"==typeof define&&define.amd)define(function(){return P});else if("undefined"!=typeof f&&f.exports)f.exports=P;else{var j=t.uuid;P.noConflict=function(){return t.uuid=j,P},t.uuid=P}}).call(this)},{}],341:[function(e,f,n){!function(e,o){"object"==typeof n?o(n,f):"function"==typeof define&&define.amd&&define(["exports","module"],o)}(this,function(e,f){function n(){}n.prototype.name="ANONYMOUS",n.prototype.clientFirst=!0,n.prototype.response=function(e){return e.trace||""},n.prototype.challenge=function(){},e=f.exports=n})},{}],342:[function(e,f,n){!function(o,d){"object"==typeof n?d(n,f,e("./lib/mechanism")):"function"==typeof define&&define.amd&&define(["exports","module","./lib/mechanism"],d)}(this,function(e,f,n){e=f.exports=n,e.Mechanism=n})},{"./lib/mechanism":341}],343:[function(e,f,n){!function(e,o){"object"==typeof n?o(n,f):"function"==typeof define&&define.amd&&define(["exports","module"],o)}(this,function(e,f){function n(){}n.prototype.name="EXTERNAL",n.prototype.clientFirst=!0,n.prototype.response=function(e){return e.authzid||""},n.prototype.challenge=function(){},e=f.exports=n})},{}],344:[function(e,f,n){arguments[4][342][0].apply(n,arguments)},{"./lib/mechanism":343}],345:[function(e,f,n){!function(e,o){"object"==typeof n?o(n,f):"function"==typeof define&&define.amd&&define(["exports","module"],o)}(this,function(e,f){function n(){}n.prototype.name="PLAIN",n.prototype.clientFirst=!0,n.prototype.response=function(e){var f="";return f+=e.authzid||"",f+="\x00",f+=e.username,f+="\x00",f+=e.password},n.prototype.challenge=function(){return this},e=f.exports=n})},{}],346:[function(e,f,n){arguments[4][342][0].apply(n,arguments)},{"./lib/mechanism":345}],347:[function(e,f){(function(n){function o(e){e=e||{},this._genNonce=e.genNonce||i.genNonce,this._stage="initial"}var d=e("./lib/bitops"),i=e("./lib/utils"),t={};o.Mechanism=o,o.prototype.name="SCRAM-SHA-1",o.prototype.clientFirst=!0,o.prototype.response=function(e){return t[this._stage](this,e)},o.prototype.challenge=function(e){var f=i.parse(e);return this._salt=new n(f.s||"","base64"),this._iterationCount=parseInt(f.i,10),this._nonce=f.r,this._verifier=f.v,this._error=f.e,this._challenge=e,this},t.initial=function(e,f){e._cnonce=e._genNonce();var n="";f.authzid&&(n="a="+i.saslname(f.authzid)),e._gs2Header="n,"+n+",";var o="r="+e._cnonce,d="n="+i.saslname(f.username);e._clientFirstMessageBare=d+","+o;var t=e._gs2Header+e._clientFirstMessageBare;return e._stage="challenge",t},t.challenge=function(e,f){var o=new n(e._gs2Header).toString("base64");e._clientFinalMessageWithoutProof="c="+o+",r="+e._nonce;var i,t,l;f.clientKey&&f.serverKey?(t=f.clientKey,l=f.serverKey):(i=f.saltedPassword||d.Hi(f.password,e._salt,e._iterationCount),t=d.HMAC(i,"Client Key"),l=d.HMAC(i,"Server Key"));var u=d.H(t),p=e._clientFirstMessageBare+","+e._challenge+","+e._clientFinalMessageWithoutProof,s=d.HMAC(u,p),y=d.XOR(t,s).toString("base64");e._serverSignature=d.HMAC(l,p);var c=e._clientFinalMessageWithoutProof+",p="+y;return e._stage="final",e.cache={saltedPassword:i,clientKey:t,serverKey:l},c},t["final"]=function(){return""},f.exports=o}).call(this,e("buffer").Buffer)},{"./lib/bitops":348,"./lib/utils":349,buffer:150}],348:[function(e,f,n){(function(f){var o=e("crypto"),d=e("bitwise-xor");n.XOR=d,n.H=function(e){return o.createHash("sha1").update(e).digest()},n.HMAC=function(e,f){return o.createHmac("sha1",e).update(f).digest()},n.Hi=function(e,o,d){for(var i=n.HMAC(e,f.concat([o,new f([0,0,0,1],"binary")])),t=i,l=0;d-1>l;l++)i=n.HMAC(e,i),t=n.XOR(t,i);return t}}).call(this,e("buffer").Buffer)},{"bitwise-xor":350,buffer:150,crypto:157}],349:[function(e,f,n){var o=e("crypto");n.parse=function(e){for(var f={},n=e.split(/,(?=(?:[^"]|"[^"]*")*$)/),o=0,d=n.length;d>o;o++){var i=/(\w+)=["]?([^"]+)["]?$/.exec(n[o]);i&&(f[i[1]]=i[2])}return f},n.saslname=function(e){for(var f=[],n="",o=0;o<e.length;o++)n=e[o],f.push(","===n?"=2C":"="===n?"=3D":n);
return f.join("")},n.genNonce=function(e){return o.randomBytes((e||32)/2).toString("hex")}},{crypto:157}],350:[function(e,f){(function(e){function n(f,n){e.isBuffer(f)||(f=new e(f)),e.isBuffer(n)||(n=new e(n));var o=[];if(f.length>n.length)for(var d=0;d<n.length;d++)o.push(f[d]^n[d]);else for(var d=0;d<f.length;d++)o.push(f[d]^n[d]);return new e(o)}f.exports=n}).call(this,e("buffer").Buffer)},{buffer:150}],351:[function(e,f,n){!function(e,o){"object"==typeof n?o(n,f):"function"==typeof define&&define.amd&&define(["exports","module"],o)}(this,function(e,f){function n(){this._mechs=[]}n.prototype.use=function(e,f){return f||(f=e,e=f.prototype.name),this._mechs.push({name:e,mech:f}),this},n.prototype.create=function(e){for(var f=0,n=this._mechs.length;n>f;f++)for(var o=0,d=e.length;d>o;o++){var i=this._mechs[f];if(i.name==e[o])return new i.mech}return null},e=f.exports=n})},{}],352:[function(e,f,n){!function(o,d){"object"==typeof n?d(n,f,e("./lib/factory")):"function"==typeof define&&define.amd&&define(["exports","module","./lib/factory"],d)}(this,function(e,f,n){e=f.exports=n,e.Factory=n})},{"./lib/factory":351}],353:[function(e,f,n){(function(){var e=this,o=e._,d={},i=Array.prototype,t=Object.prototype,l=Function.prototype,u=i.push,p=i.slice,s=i.concat,y=t.toString,c=t.hasOwnProperty,a=i.forEach,r=i.map,w=i.reduce,b=i.reduceRight,m=i.filter,g=i.every,x=i.some,P=i.indexOf,j=i.lastIndexOf,v=Array.isArray,M=Object.keys,X=l.bind,h=function(e){return e instanceof h?e:this instanceof h?void(this._wrapped=e):new h(e)};"undefined"!=typeof n?("undefined"!=typeof f&&f.exports&&(n=f.exports=h),n._=h):e._=h,h.VERSION="1.6.0";var k=h.each=h.forEach=function(e,f,n){if(null==e)return e;if(a&&e.forEach===a)e.forEach(f,n);else if(e.length===+e.length){for(var o=0,i=e.length;i>o;o++)if(f.call(n,e[o],o,e)===d)return}else for(var t=h.keys(e),o=0,i=t.length;i>o;o++)if(f.call(n,e[t[o]],t[o],e)===d)return;return e};h.map=h.collect=function(e,f,n){var o=[];return null==e?o:r&&e.map===r?e.map(f,n):(k(e,function(e,d,i){o.push(f.call(n,e,d,i))}),o)};var q="Reduce of empty array with no initial value";h.reduce=h.foldl=h.inject=function(e,f,n,o){var d=arguments.length>2;if(null==e&&(e=[]),w&&e.reduce===w)return o&&(f=h.bind(f,o)),d?e.reduce(f,n):e.reduce(f);if(k(e,function(e,i,t){d?n=f.call(o,n,e,i,t):(n=e,d=!0)}),!d)throw new TypeError(q);return n},h.reduceRight=h.foldr=function(e,f,n,o){var d=arguments.length>2;if(null==e&&(e=[]),b&&e.reduceRight===b)return o&&(f=h.bind(f,o)),d?e.reduceRight(f,n):e.reduceRight(f);var i=e.length;if(i!==+i){var t=h.keys(e);i=t.length}if(k(e,function(l,u,p){u=t?t[--i]:--i,d?n=f.call(o,n,e[u],u,p):(n=e[u],d=!0)}),!d)throw new TypeError(q);return n},h.find=h.detect=function(e,f,n){var o;return z(e,function(e,d,i){return f.call(n,e,d,i)?(o=e,!0):void 0}),o},h.filter=h.select=function(e,f,n){var o=[];return null==e?o:m&&e.filter===m?e.filter(f,n):(k(e,function(e,d,i){f.call(n,e,d,i)&&o.push(e)}),o)},h.reject=function(e,f,n){return h.filter(e,function(e,o,d){return!f.call(n,e,o,d)},n)},h.every=h.all=function(e,f,n){f||(f=h.identity);var o=!0;return null==e?o:g&&e.every===g?e.every(f,n):(k(e,function(e,i,t){return(o=o&&f.call(n,e,i,t))?void 0:d}),!!o)};var z=h.some=h.any=function(e,f,n){f||(f=h.identity);var o=!1;return null==e?o:x&&e.some===x?e.some(f,n):(k(e,function(e,i,t){return o||(o=f.call(n,e,i,t))?d:void 0}),!!o)};h.contains=h.include=function(e,f){return null==e?!1:P&&e.indexOf===P?-1!=e.indexOf(f):z(e,function(e){return e===f})},h.invoke=function(e,f){var n=p.call(arguments,2),o=h.isFunction(f);return h.map(e,function(e){return(o?f:e[f]).apply(e,n)})},h.pluck=function(e,f){return h.map(e,h.property(f))},h.where=function(e,f){return h.filter(e,h.matches(f))},h.findWhere=function(e,f){return h.find(e,h.matches(f))},h.max=function(e,f,n){if(!f&&h.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var o=-1/0,d=-1/0;return k(e,function(e,i,t){var l=f?f.call(n,e,i,t):e;l>d&&(o=e,d=l)}),o},h.min=function(e,f,n){if(!f&&h.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var o=1/0,d=1/0;return k(e,function(e,i,t){var l=f?f.call(n,e,i,t):e;d>l&&(o=e,d=l)}),o},h.shuffle=function(e){var f,n=0,o=[];return k(e,function(e){f=h.random(n++),o[n-1]=o[f],o[f]=e}),o},h.sample=function(e,f,n){return null==f||n?(e.length!==+e.length&&(e=h.values(e)),e[h.random(e.length-1)]):h.shuffle(e).slice(0,Math.max(0,f))};var A=function(e){return null==e?h.identity:h.isFunction(e)?e:h.property(e)};h.sortBy=function(e,f,n){return f=A(f),h.pluck(h.map(e,function(e,o,d){return{value:e,index:o,criteria:f.call(n,e,o,d)}}).sort(function(e,f){var n=e.criteria,o=f.criteria;if(n!==o){if(n>o||void 0===n)return 1;if(o>n||void 0===o)return-1}return e.index-f.index}),"value")};var B=function(e){return function(f,n,o){var d={};return n=A(n),k(f,function(i,t){var l=n.call(o,i,t,f);e(d,l,i)}),d}};h.groupBy=B(function(e,f,n){h.has(e,f)?e[f].push(n):e[f]=[n]}),h.indexBy=B(function(e,f,n){e[f]=n}),h.countBy=B(function(e,f){h.has(e,f)?e[f]++:e[f]=1}),h.sortedIndex=function(e,f,n,o){n=A(n);for(var d=n.call(o,f),i=0,t=e.length;t>i;){var l=i+t>>>1;n.call(o,e[l])<d?i=l+1:t=l}return i},h.toArray=function(e){return e?h.isArray(e)?p.call(e):e.length===+e.length?h.map(e,h.identity):h.values(e):[]},h.size=function(e){return null==e?0:e.length===+e.length?e.length:h.keys(e).length},h.first=h.head=h.take=function(e,f,n){return null==e?void 0:null==f||n?e[0]:0>f?[]:p.call(e,0,f)},h.initial=function(e,f,n){return p.call(e,0,e.length-(null==f||n?1:f))},h.last=function(e,f,n){return null==e?void 0:null==f||n?e[e.length-1]:p.call(e,Math.max(e.length-f,0))},h.rest=h.tail=h.drop=function(e,f,n){return p.call(e,null==f||n?1:f)},h.compact=function(e){return h.filter(e,h.identity)};var C=function(e,f,n){return f&&h.every(e,h.isArray)?s.apply(n,e):(k(e,function(e){h.isArray(e)||h.isArguments(e)?f?u.apply(n,e):C(e,f,n):n.push(e)}),n)};h.flatten=function(e,f){return C(e,f,[])},h.without=function(e){return h.difference(e,p.call(arguments,1))},h.partition=function(e,f){var n=[],o=[];return k(e,function(e){(f(e)?n:o).push(e)}),[n,o]},h.uniq=h.unique=function(e,f,n,o){h.isFunction(f)&&(o=n,n=f,f=!1);var d=n?h.map(e,n,o):e,i=[],t=[];return k(d,function(n,o){(f?o&&t[t.length-1]===n:h.contains(t,n))||(t.push(n),i.push(e[o]))}),i},h.union=function(){return h.uniq(h.flatten(arguments,!0))},h.intersection=function(e){var f=p.call(arguments,1);return h.filter(h.uniq(e),function(e){return h.every(f,function(f){return h.contains(f,e)})})},h.difference=function(e){var f=s.apply(i,p.call(arguments,1));return h.filter(e,function(e){return!h.contains(f,e)})},h.zip=function(){for(var e=h.max(h.pluck(arguments,"length").concat(0)),f=new Array(e),n=0;e>n;n++)f[n]=h.pluck(arguments,""+n);return f},h.object=function(e,f){if(null==e)return{};for(var n={},o=0,d=e.length;d>o;o++)f?n[e[o]]=f[o]:n[e[o][0]]=e[o][1];return n},h.indexOf=function(e,f,n){if(null==e)return-1;var o=0,d=e.length;if(n){if("number"!=typeof n)return o=h.sortedIndex(e,f),e[o]===f?o:-1;o=0>n?Math.max(0,d+n):n}if(P&&e.indexOf===P)return e.indexOf(f,n);for(;d>o;o++)if(e[o]===f)return o;return-1},h.lastIndexOf=function(e,f,n){if(null==e)return-1;var o=null!=n;if(j&&e.lastIndexOf===j)return o?e.lastIndexOf(f,n):e.lastIndexOf(f);for(var d=o?n:e.length;d--;)if(e[d]===f)return d;return-1},h.range=function(e,f,n){arguments.length<=1&&(f=e||0,e=0),n=arguments[2]||1;for(var o=Math.max(Math.ceil((f-e)/n),0),d=0,i=new Array(o);o>d;)i[d++]=e,e+=n;return i};var D=function(){};h.bind=function(e,f){var n,o;if(X&&e.bind===X)return X.apply(e,p.call(arguments,1));if(!h.isFunction(e))throw new TypeError;return n=p.call(arguments,2),o=function(){if(!(this instanceof o))return e.apply(f,n.concat(p.call(arguments)));D.prototype=e.prototype;var d=new D;D.prototype=null;var i=e.apply(d,n.concat(p.call(arguments)));return Object(i)===i?i:d}},h.partial=function(e){var f=p.call(arguments,1);return function(){for(var n=0,o=f.slice(),d=0,i=o.length;i>d;d++)o[d]===h&&(o[d]=arguments[n++]);for(;n<arguments.length;)o.push(arguments[n++]);return e.apply(this,o)}},h.bindAll=function(e){var f=p.call(arguments,1);if(0===f.length)throw new Error("bindAll must be passed function names");return k(f,function(f){e[f]=h.bind(e[f],e)}),e},h.memoize=function(e,f){var n={};return f||(f=h.identity),function(){var o=f.apply(this,arguments);return h.has(n,o)?n[o]:n[o]=e.apply(this,arguments)}},h.delay=function(e,f){var n=p.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},f)},h.defer=function(e){return h.delay.apply(h,[e,1].concat(p.call(arguments,1)))},h.throttle=function(e,f,n){var o,d,i,t=null,l=0;n||(n={});var u=function(){l=n.leading===!1?0:h.now(),t=null,i=e.apply(o,d),o=d=null};return function(){var p=h.now();l||n.leading!==!1||(l=p);var s=f-(p-l);return o=this,d=arguments,0>=s?(clearTimeout(t),t=null,l=p,i=e.apply(o,d),o=d=null):t||n.trailing===!1||(t=setTimeout(u,s)),i}},h.debounce=function(e,f,n){var o,d,i,t,l,u=function(){var p=h.now()-t;f>p?o=setTimeout(u,f-p):(o=null,n||(l=e.apply(i,d),i=d=null))};return function(){i=this,d=arguments,t=h.now();var p=n&&!o;return o||(o=setTimeout(u,f)),p&&(l=e.apply(i,d),i=d=null),l}},h.once=function(e){var f,n=!1;return function(){return n?f:(n=!0,f=e.apply(this,arguments),e=null,f)}},h.wrap=function(e,f){return h.partial(f,e)},h.compose=function(){var e=arguments;return function(){for(var f=arguments,n=e.length-1;n>=0;n--)f=[e[n].apply(this,f)];return f[0]}},h.after=function(e,f){return function(){return--e<1?f.apply(this,arguments):void 0}},h.keys=function(e){if(!h.isObject(e))return[];if(M)return M(e);var f=[];for(var n in e)h.has(e,n)&&f.push(n);return f},h.values=function(e){for(var f=h.keys(e),n=f.length,o=new Array(n),d=0;n>d;d++)o[d]=e[f[d]];return o},h.pairs=function(e){for(var f=h.keys(e),n=f.length,o=new Array(n),d=0;n>d;d++)o[d]=[f[d],e[f[d]]];return o},h.invert=function(e){for(var f={},n=h.keys(e),o=0,d=n.length;d>o;o++)f[e[n[o]]]=n[o];return f},h.functions=h.methods=function(e){var f=[];for(var n in e)h.isFunction(e[n])&&f.push(n);return f.sort()},h.extend=function(e){return k(p.call(arguments,1),function(f){if(f)for(var n in f)e[n]=f[n]}),e},h.pick=function(e){var f={},n=s.apply(i,p.call(arguments,1));return k(n,function(n){n in e&&(f[n]=e[n])}),f},h.omit=function(e){var f={},n=s.apply(i,p.call(arguments,1));for(var o in e)h.contains(n,o)||(f[o]=e[o]);return f},h.defaults=function(e){return k(p.call(arguments,1),function(f){if(f)for(var n in f)void 0===e[n]&&(e[n]=f[n])}),e},h.clone=function(e){return h.isObject(e)?h.isArray(e)?e.slice():h.extend({},e):e},h.tap=function(e,f){return f(e),e};var E=function(e,f,n,o){if(e===f)return 0!==e||1/e==1/f;if(null==e||null==f)return e===f;e instanceof h&&(e=e._wrapped),f instanceof h&&(f=f._wrapped);var d=y.call(e);if(d!=y.call(f))return!1;switch(d){case"[object String]":return e==String(f);case"[object Number]":return e!=+e?f!=+f:0==e?1/e==1/f:e==+f;case"[object Date]":case"[object Boolean]":return+e==+f;case"[object RegExp]":return e.source==f.source&&e.global==f.global&&e.multiline==f.multiline&&e.ignoreCase==f.ignoreCase}if("object"!=typeof e||"object"!=typeof f)return!1;for(var i=n.length;i--;)if(n[i]==e)return o[i]==f;var t=e.constructor,l=f.constructor;if(t!==l&&!(h.isFunction(t)&&t instanceof t&&h.isFunction(l)&&l instanceof l)&&"constructor"in e&&"constructor"in f)return!1;n.push(e),o.push(f);var u=0,p=!0;if("[object Array]"==d){if(u=e.length,p=u==f.length)for(;u--&&(p=E(e[u],f[u],n,o)););}else{for(var s in e)if(h.has(e,s)&&(u++,!(p=h.has(f,s)&&E(e[s],f[s],n,o))))break;if(p){for(s in f)if(h.has(f,s)&&!u--)break;p=!u}}return n.pop(),o.pop(),p};h.isEqual=function(e,f){return E(e,f,[],[])},h.isEmpty=function(e){if(null==e)return!0;if(h.isArray(e)||h.isString(e))return 0===e.length;for(var f in e)if(h.has(e,f))return!1;return!0},h.isElement=function(e){return!(!e||1!==e.nodeType)},h.isArray=v||function(e){return"[object Array]"==y.call(e)},h.isObject=function(e){return e===Object(e)},k(["Arguments","Function","String","Number","Date","RegExp"],function(e){h["is"+e]=function(f){return y.call(f)=="[object "+e+"]"}}),h.isArguments(arguments)||(h.isArguments=function(e){return!(!e||!h.has(e,"callee"))}),"function"!=typeof/./&&(h.isFunction=function(e){return"function"==typeof e}),h.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},h.isNaN=function(e){return h.isNumber(e)&&e!=+e},h.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==y.call(e)},h.isNull=function(e){return null===e},h.isUndefined=function(e){return void 0===e},h.has=function(e,f){return c.call(e,f)},h.noConflict=function(){return e._=o,this},h.identity=function(e){return e},h.constant=function(e){return function(){return e}},h.property=function(e){return function(f){return f[e]}},h.matches=function(e){return function(f){if(f===e)return!0;for(var n in e)if(e[n]!==f[n])return!1;return!0}},h.times=function(e,f,n){for(var o=Array(Math.max(0,e)),d=0;e>d;d++)o[d]=f.call(n,d);return o},h.random=function(e,f){return null==f&&(f=e,e=0),e+Math.floor(Math.random()*(f-e+1))},h.now=Date.now||function(){return(new Date).getTime()};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};F.unescape=h.invert(F.escape);var G={escape:new RegExp("["+h.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+h.keys(F.unescape).join("|")+")","g")};h.each(["escape","unescape"],function(e){h[e]=function(f){return null==f?"":(""+f).replace(G[e],function(f){return F[e][f]})}}),h.result=function(e,f){if(null==e)return void 0;var n=e[f];return h.isFunction(n)?n.call(e):n},h.mixin=function(e){k(h.functions(e),function(f){var n=h[f]=e[f];h.prototype[f]=function(){var e=[this._wrapped];return u.apply(e,arguments),L.call(this,n.apply(h,e))}})};var H=0;h.uniqueId=function(e){var f=++H+"";return e?e+f:f},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;h.template=function(e,f,n){var o;n=h.defaults({},n,h.templateSettings);var d=new RegExp([(n.escape||I).source,(n.interpolate||I).source,(n.evaluate||I).source].join("|")+"|$","g"),i=0,t="__p+='";e.replace(d,function(f,n,o,d,l){return t+=e.slice(i,l).replace(K,function(e){return"\\"+J[e]}),n&&(t+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),o&&(t+="'+\n((__t=("+o+"))==null?'':__t)+\n'"),d&&(t+="';\n"+d+"\n__p+='"),i=l+f.length,f}),t+="';\n",n.variable||(t="with(obj||{}){\n"+t+"}\n"),t="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+t+"return __p;\n";try{o=new Function(n.variable||"obj","_",t)}catch(l){throw l.source=t,l}if(f)return o(f,h);var u=function(e){return o.call(this,e,h)};return u.source="function("+(n.variable||"obj")+"){\n"+t+"}",u},h.chain=function(e){return h(e).chain()};var L=function(e){return this._chain?h(e).chain():e};h.mixin(h),k(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var f=i[e];h.prototype[e]=function(){var n=this._wrapped;return f.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],L.call(this,n)}}),k(["concat","join","slice"],function(e){var f=i[e];h.prototype[e]=function(){return L.call(this,f.apply(this._wrapped,arguments))}}),h.extend(h.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return h})}).call(this)},{}],354:[function(e,f){function n(){this.callbacks={}}f.exports=n,n.prototype.on=function(e){var f=3===arguments.length,n=f?arguments[1]:void 0,o=f?arguments[2]:arguments[1];return o._groupName=n,(this.callbacks[e]=this.callbacks[e]||[]).push(o),this},n.prototype.once=function(e){function f(){n.off(e,f),i.apply(this,arguments)}var n=this,o=3===arguments.length,d=o?arguments[1]:void 0,i=o?arguments[2]:arguments[1];return this.on(e,d,f),this},n.prototype.releaseGroup=function(e){var f,n,o,d;for(f in this.callbacks)for(d=this.callbacks[f],n=0,o=d.length;o>n;n++)d[n]._groupName===e&&(d.splice(n,1),n--,o--);return this},n.prototype.off=function(e,f){var n,o=this.callbacks[e];return o?1===arguments.length?(delete this.callbacks[e],this):(n=o.indexOf(f),o.splice(n,1),this):this},n.prototype.emit=function(e){var f,n,o,d=[].slice.call(arguments,1),i=this.callbacks[e],t=this.getWildcardCallbacks(e);if(i)for(o=i.slice(),f=0,n=o.length;n>f&&o[f];++f)o[f].apply(this,d);if(t)for(n=t.length,o=t.slice(),f=0,n=o.length;n>f&&o[f];++f)o[f].apply(this,[e].concat(d));return this},n.prototype.getWildcardCallbacks=function(e){var f,n,o=[];for(f in this.callbacks)n=f.split("*"),("*"===f||2===n.length&&e.slice(0,n[0].length)===n[0])&&(o=o.concat(this.callbacks[f]));return o}},{}],355:[function(e,f,n){"use strict";function o(e,f){return e?e+"@"+f:f}function d(e,f,n){return n?o(e,f)+"/"+n:o(e,f)}var i=e("./lib/stringprep");n.prep=function(e){var f=e.local,t=e.domain,l=e.resource,u=f;return f&&(f=i.nodeprep(f),u=n.unescape(f)),l&&(l=i.resourceprep(l)),"."===t[t.length-1]&&(t=t.slice(0,t.length-1)),t=i.nameprep(t.split(".").map(i.toUnicode).join(".")),{prepped:e.prepped||i.available,local:f,domain:t,resource:l,bare:o(f,t),full:d(f,t,l),unescapedLocal:u,unescapedBare:o(u,t),unescapedFull:d(u,t,l)}},n.parse=function(e,f){var o="",d="",i="";f=/^[\x00-\x7F]*$/.test(e);var t=e.indexOf("/");t>0&&(i=e.slice(t+1),e=e.slice(0,t));var l=e.indexOf("@");l>0&&(o=e.slice(0,l),e=e.slice(l+1)),d=e;var u=n.prep({local:o,domain:d,resource:i});return u.prepped=u.prepped||f,u},n.equal=function(e,f,o){return e=new n.JID(e),f=new n.JID(f),2===arguments.length&&(o=!0),e.local===f.local&&e.domain===f.domain&&e.resource===f.resource&&(o?e.prepped&&f.prepped:!0)},n.equalBare=function(e,f,o){return e=new n.JID(e),f=new n.JID(f),2===arguments.length&&(o=!0),e.local===f.local&&e.domain===f.domain&&(o?e.prepped&&f.prepped:!0)},n.escape=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\\5c/g,"\\5c5c").replace(/\\20/g,"\\5c20").replace(/\\22/g,"\\5c22").replace(/\\26/g,"\\5c26").replace(/\\27/g,"\\5c27").replace(/\\2f/g,"\\5c2f").replace(/\\3a/g,"\\5c3a").replace(/\\3c/g,"\\5c3c").replace(/\\3e/g,"\\5c3e").replace(/\\40/g,"\\5c40").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},n.unescape=function(e){return e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},n.create=function(e,f,o){return new n.JID(e,f,o)},n.JID=function(e,f,o){var d={};if(!e||f||o)d=f?n.prep({local:n.escape(e),domain:f,resource:o}):{};else if("string"==typeof e)d=n.parse(e);else{if(!(e instanceof n.JID))throw new Error("Invalid argument type");d=e}this.local=d.local||"",this.domain=d.domain||"",this.resource=d.resource||"",this.bare=d.bare||"",this.full=d.full||"",this.unescapedLocal=d.unescapedLocal||"",this.unescapedBare=d.unescapedBare||"",this.unescapedFull=d.unescapedFull||"",this.prepped=d.prepped},n.JID.prototype.toString=function(){return this.full},n.JID.prototype.toJSON=function(){return this.full}},{"./lib/stringprep":356}],356:[function(e,f,n){"use strict";var o=e("punycode");n.available=!1,n.toUnicode=o.toUnicode,n.nameprep=function(e){return e.toLowerCase()},n.nodeprep=function(e){return e.toLowerCase()},n.resourceprep=function(e){return e}},{punycode:170}]},{},[1])(1)});